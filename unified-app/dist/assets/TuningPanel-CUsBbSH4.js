import{r as n,j as a}from"./index-BmgLEcVh.js";import{r as P,D as O,a4 as A,ck as k,cl as D,bm as I,A as E,Z as S,L as C,o as F,P as L,Q as R,u as z,n as p,a9 as h,as as v,R as K}from"./CategoricalChart-B3gtutcW.js";import{L as T,a as W}from"./LineChart-BpVk81_f.js";import{c as _,C as M,X,Y}from"./CartesianChart-JiyIF1-F.js";import{T as Z}from"./Tooltip-DB7iJmxT.js";import{a as H}from"./ActivePoints-BNVjkTTJ.js";import"./ErrorBarContext-BI9_YV4U.js";import"./getRadiusAndStrokeWidthFromDot-RCB29W7S.js";import"./ActiveShapeUtils-B4dTBMil.js";import"./Sector-CA3PXCa0.js";import"./Symbols-DCSkJhyu.js";import"./useElementOffset-7v_xyInG.js";function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,s)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(s){$(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function $(e,t,r){return(t=B(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){var t=G(e,"string");return typeof t=="symbol"?t:t+""}function G(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},b.apply(null,arguments)}var Q=(e,t,r,s,o)=>{var d=v(e),c=v(t),i=z(),u=p(m=>h(m,"xAxis",r,i)),x=p(m=>h(m,"yAxis",s,i));if(!d||!c||u==null||x==null)return null;var l=_({x:u,y:x}),f=l.apply({x:e,y:t},{bandAware:!0});return o==="discard"&&!l.isInRange(f)?null:f};function V(e){var t=A();return n.useEffect(()=>(t(k(e)),()=>{t(D(e))})),null}var q=(e,t)=>{var r;return n.isValidElement(e)?r=n.cloneElement(e,t):typeof e=="function"?r=e(t):r=n.createElement(H,b({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r};function J(e){var{x:t,y:r,r:s}=e,o=I(),d=Q(t,r,e.xAxisId,e.yAxisId,e.ifOverflow);if(!d)return null;var{x:c,y:i}=d,{shape:u,className:x,ifOverflow:l}=e,f=l==="hidden"?"url(#".concat(o,")"):void 0,m=y(y({clipPath:f},E(e)),{},{cx:c,cy:i});return n.createElement(S,{zIndex:e.zIndex},n.createElement(C,{className:F("recharts-reference-dot",x)},q(u,m),n.createElement(L,{x:c-s,y:i-s,width:2*s,height:2*s,upperWidth:2*s,lowerWidth:2*s},n.createElement(R,{label:e.label}),e.children)))}var U={ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1,zIndex:O.scatter};function j(e){var t=P(e,U),{x:r,y:s,r:o,ifOverflow:d,yAxisId:c,xAxisId:i}=t;return n.createElement(n.Fragment,null,n.createElement(V,{y:s,x:r,r:o,yAxisId:c,xAxisId:i,ifOverflow:d}),n.createElement(J,t))}j.displayName="ReferenceDot";function xe(){const[e,t]=n.useState(100),[r,s]=n.useState(10),[o,d]=n.useState(3),c=(l,f,m)=>{const w=-1*m*f/l,N=1-Math.exp(w);return Math.pow(N,m)},i=c(e,r,o),u=e/r*Math.log(2),x=[];for(let l=1;l<=15;l++)x.push({k:l,p:c(e,r,l),isCurrent:l===o});return a.jsxs("div",{className:"p-8 h-full flex flex-col items-center",children:[a.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-indigo-900 mb-4",children:"Tuning Studio"}),a.jsxs("p",{className:"text-lg text-slate-700 leading-relaxed",children:["Find the sweet spot! Adjust the parameters to minimize the ",a.jsx("strong",{children:"False Positive Probability"}),"."]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 w-full max-w-6xl",children:[a.jsxs("div",{className:"flex-1 bg-white p-6 rounded-xl shadow-lg border border-slate-200",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("label",{className:"block font-bold text-slate-700 mb-2",children:["Bit Array Size (m): ",e]}),a.jsx("input",{type:"range",min:"10",max:"1000",step:"10",value:e,onChange:l=>t(Number(l.target.value)),className:"w-full accent-indigo-600"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("label",{className:"block font-bold text-slate-700 mb-2",children:["Expected Items (n): ",r]}),a.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:r,onChange:l=>s(Number(l.target.value)),className:"w-full accent-indigo-600"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("label",{className:"block font-bold text-slate-700 mb-2",children:["Hash Functions (k): ",o]}),a.jsx("input",{type:"range",min:"1",max:"15",step:"1",value:o,onChange:l=>d(Number(l.target.value)),className:"w-full accent-indigo-600"})]}),a.jsxs("div",{className:"mt-8 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx("h4",{className:"font-bold text-slate-500 uppercase text-xs mb-2",children:"Optimal k for current m, n"}),a.jsx("p",{className:"text-2xl font-mono font-bold text-slate-800",children:u.toFixed(1)}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Formula: k = (m/n) * ln(2)"})]})]}),a.jsxs("div",{className:"flex-[2] flex flex-col",children:[a.jsx("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-slate-200 h-[400px] mb-6",children:a.jsx(K,{width:"100%",height:"100%",children:a.jsxs(T,{data:x,margin:{top:20,right:30,left:20,bottom:20},children:[a.jsx(M,{strokeDasharray:"3 3"}),a.jsx(X,{dataKey:"k",label:{value:"Number of Hash Functions (k)",position:"bottom",offset:0}}),a.jsx(Y,{label:{value:"False Positive Probability",angle:-90,position:"left"}}),a.jsx(Z,{formatter:l=>[(l*100).toFixed(2)+"%","Probability"],labelFormatter:l=>`k = ${l}`}),a.jsx(W,{type:"monotone",dataKey:"p",stroke:"#4f46e5",strokeWidth:3,dot:{r:4},activeDot:{r:8}}),a.jsx(j,{x:o,y:i,r:8,fill:"#f59e0b",stroke:"white",strokeWidth:2})]})})}),a.jsxs("div",{className:`p-6 rounded-xl border-2 text-center transition-colors ${i<.01?"bg-green-50 border-green-200 text-green-900":i<.1?"bg-yellow-50 border-yellow-200 text-yellow-900":"bg-red-50 border-red-200 text-red-900"}`,children:[a.jsx("p",{className:"text-sm font-bold uppercase opacity-70 mb-1",children:"Current Probability"}),a.jsxs("p",{className:"text-4xl font-mono font-bold",children:[(i*100).toFixed(4),"%"]}),a.jsx("p",{className:"text-sm mt-2",children:i<.01?"âœ… Excellent! Very rare collisions.":i<.1?"âš ï¸ Acceptable for some use cases.":"ðŸš¨ Too high! Increase size (m) or adjust (k)."})]})]})]})]})}export{xe as default};
