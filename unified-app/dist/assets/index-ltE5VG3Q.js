import{r as h,j as e,F as P,Z as S,w as C,H as E,t as B,B as X,L as k,b as R,e as W}from"./index-CsxpOLHd.js";import{g as c}from"./index-C8pce-KX.js";import{P as G}from"./pause-BMcOX1vk.js";import{P as N}from"./play-CIyTSByC.js";import{R as y}from"./rotate-ccw-xVnQluc9.js";import{H as L}from"./hard-drive-D5TPG31V.js";import{C as z}from"./clock-BXk6uTBc.js";import{S as D}from"./scissors-DW11PG_S.js";import{A as U}from"./arrow-left-right-B1uq9VWv.js";import{E as M}from"./eye-Bp4zrP5E.js";import{S as A}from"./scale-oO9klg3P.js";import{C as O}from"./code-CB4Crw6s.js";import{C as I}from"./check-circle-C5pajHEW.js";import{X as F}from"./x-circle-guWBBJ3U.js";import{T as q}from"./type-DpaVq8o2.js";import{F as $}from"./flask-conical-DuXPACWP.js";function T(){const[o,p]=h.useState(!1),r=h.useRef(null),s=h.useRef(null);h.useEffect(()=>{if(!r.current)return;const d=c.context(()=>{s.current=c.timeline({paused:!0}),s.current.fromTo(".t5-input",{opacity:0,x:-30},{opacity:1,x:0,duration:.5}),s.current.fromTo(".t5-tokens",{opacity:0,scale:.8},{opacity:1,scale:1,duration:.4}),s.current.to(".encoder-stack",{opacity:1,duration:.3}),s.current.fromTo(".encoder-layer",{opacity:.3,scaleX:.8},{opacity:1,scaleX:1,stagger:.05,duration:.15}),s.current.fromTo(".t5-output",{opacity:0,y:20},{opacity:1,y:0,duration:.4})},r);return()=>d.revert()},[]);const a=()=>{s.current&&(o?s.current.pause():s.current.progress()===1?s.current.restart():s.current.play(),p(!o))},n=()=>{s.current&&(s.current.restart().pause(),p(!1))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-emerald-400 mb-2",children:"What is T5?"}),e.jsxs("p",{className:"text-gray-300 max-w-3xl mx-auto",children:[e.jsx("strong",{children:"T5 (Text-to-Text Transfer Transformer)"})," is Google's powerful language model that treats all NLP tasks as text-to-text problems. SD3 uses the ",e.jsx("strong",{children:"encoder part only"}),"of T5-XXL for deep language understanding."]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-emerald-500/10 rounded-xl p-4 text-center border border-emerald-500/30",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:"4.7B"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Parameters"})]}),e.jsxs("div",{className:"bg-teal-500/10 rounded-xl p-4 text-center border border-teal-500/30",children:[e.jsx("div",{className:"text-2xl font-bold text-teal-400",children:"24"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Encoder Layers"})]}),e.jsxs("div",{className:"bg-cyan-500/10 rounded-xl p-4 text-center border border-cyan-500/30",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:"4096"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Hidden Dimension"})]}),e.jsxs("div",{className:"bg-blue-500/10 rounded-xl p-4 text-center border border-blue-500/30",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"256+"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Max Tokens"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 rounded-xl p-6 border border-emerald-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-emerald-400 mb-3",children:"üîç SD3 Uses Encoder Only"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-emerald-400 mb-2",children:"Full T5 (Encoder-Decoder)"}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Encoder:"})," Understands input text"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Decoder:"})," Generates output text"]}),e.jsx("p",{children:"‚Ä¢ Used for: translation, summarization, Q&A"})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-teal-400 mb-2",children:"T5 in SD3 (Encoder Only)"}),e.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[e.jsx("p",{children:"‚Ä¢ Only encoder part is used"}),e.jsx("p",{children:"‚Ä¢ Decoder is discarded entirely"}),e.jsx("p",{children:"‚Ä¢ Purpose: Create rich text embeddings"})]})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 rounded-lg transition-colors",children:[o?e.jsx(G,{size:18}):e.jsx(N,{size:18}),o?"Pause":"Play Animation"]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(y,{size:18}),"Reset"]})]}),e.jsx("div",{ref:r,className:"bg-black/40 rounded-xl p-6 min-h-[350px]",children:e.jsxs("svg",{viewBox:"0 0 800 300",className:"w-full h-auto",children:[e.jsxs("g",{className:"t5-input",style:{opacity:0},children:[e.jsx("rect",{x:"20",y:"120",width:"180",height:"60",rx:"8",fill:"#10b981",fillOpacity:"0.2",stroke:"#10b981",strokeWidth:"2"}),e.jsx("text",{x:"110",y:"145",textAnchor:"middle",fill:"#34d399",fontSize:"10",children:"Long Detailed Prompt"}),e.jsx("text",{x:"110",y:"165",textAnchor:"middle",fill:"white",fontSize:"9",children:'"A majestic lion standing'}),e.jsx("text",{x:"110",y:"177",textAnchor:"middle",fill:"white",fontSize:"9",children:'on a cliff at sunset..."'})]}),e.jsx("path",{d:"M 210 150 L 250 150",stroke:"#34d399",strokeWidth:"2",markerEnd:"url(#t5arrow)"}),e.jsxs("g",{className:"t5-tokens",style:{opacity:0},children:[e.jsx("rect",{x:"260",y:"110",width:"120",height:"80",rx:"8",fill:"#06b6d4",fillOpacity:"0.2",stroke:"#06b6d4",strokeWidth:"2"}),e.jsx("text",{x:"320",y:"135",textAnchor:"middle",fill:"#22d3ee",fontSize:"10",children:"SentencePiece"}),e.jsx("text",{x:"320",y:"155",textAnchor:"middle",fill:"white",fontSize:"9",children:"Tokenizer"}),e.jsx("text",{x:"320",y:"175",textAnchor:"middle",fill:"#94a3b8",fontSize:"8",children:"32,000 vocab"})]}),e.jsx("path",{d:"M 390 150 L 430 150",stroke:"#22d3ee",strokeWidth:"2",markerEnd:"url(#t5arrow)"}),e.jsxs("g",{className:"encoder-stack",style:{opacity:0},children:[e.jsx("text",{x:"530",y:"50",textAnchor:"middle",fill:"#a78bfa",fontSize:"11",fontWeight:"bold",children:"T5 Encoder (24 Layers)"}),[...Array(12)].map((d,x)=>e.jsx("rect",{className:"encoder-layer",x:"450",y:60+x*18,width:"160",height:"15",rx:"2",fill:"#8b5cf6",fillOpacity:.2+x*.05,stroke:"#8b5cf6",strokeWidth:"1"},x)),e.jsx("text",{x:"530",y:"290",textAnchor:"middle",fill:"#94a3b8",fontSize:"9",children:"Bidirectional Self-Attention"})]}),e.jsxs("g",{className:"t5-output",style:{opacity:0},children:[e.jsx("rect",{x:"650",y:"100",width:"130",height:"100",rx:"8",fill:"#f59e0b",fillOpacity:"0.2",stroke:"#f59e0b",strokeWidth:"2"}),e.jsx("text",{x:"715",y:"130",textAnchor:"middle",fill:"#fbbf24",fontSize:"10",fontWeight:"bold",children:"Embeddings"}),e.jsx("text",{x:"715",y:"150",textAnchor:"middle",fill:"white",fontSize:"9",children:"[B, seq_len, 4096]"}),e.jsx("text",{x:"715",y:"175",textAnchor:"middle",fill:"#94a3b8",fontSize:"8",children:"Rich contextual"}),e.jsx("text",{x:"715",y:"187",textAnchor:"middle",fill:"#94a3b8",fontSize:"8",children:"representations"})]}),e.jsx("path",{d:"M 620 150 L 650 150",stroke:"#a78bfa",strokeWidth:"2",markerEnd:"url(#t5arrow)"}),e.jsx("defs",{children:e.jsx("marker",{id:"t5arrow",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#34d399"})})})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-emerald-500/10 rounded-lg p-4 border border-emerald-500/30",children:[e.jsx(P,{className:"text-emerald-400 mb-2",size:24}),e.jsx("h4",{className:"font-semibold text-emerald-400 mb-1",children:"Long Context"}),e.jsx("p",{className:"text-sm text-gray-300",children:"256+ tokens vs CLIP's 77. Handle detailed descriptions and complex prompts."})]}),e.jsxs("div",{className:"bg-teal-500/10 rounded-lg p-4 border border-teal-500/30",children:[e.jsx(S,{className:"text-teal-400 mb-2",size:24}),e.jsx("h4",{className:"font-semibold text-teal-400 mb-1",children:"Deep Understanding"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Bidirectional attention captures context from both directions for better comprehension."})]}),e.jsxs("div",{className:"bg-cyan-500/10 rounded-lg p-4 border border-cyan-500/30",children:[e.jsx(L,{className:"text-cyan-400 mb-2",size:24}),e.jsx("h4",{className:"font-semibold text-cyan-400 mb-1",children:"Optional Component"}),e.jsx("p",{className:"text-sm text-gray-300",children:"T5 is optional in SD3. Skip it for faster inference with simpler prompts."})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-4 border border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 font-semibold mb-2",children:[e.jsx(z,{size:18}),"Resource Requirements"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm text-gray-300",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-400",children:"Memory:"})," ~8-10GB VRAM for T5-XXL"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-400",children:"Speed:"})," 100-500ms encoding time"]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-yellow-400",children:"Disk:"})," ~10GB model weights"]})]})]})]})}function _(){const[o,p]=h.useState("A majestic lion standing proudly on a cliff"),[r,s]=h.useState(!1),a=h.useRef(null),n=h.useRef(null),x=(t=>{const i=t.split(/\s+/),u=[];return i.forEach((g,j)=>{const f=j>0?"‚ñÅ":"";g.length>6?(u.push({text:f+g.slice(0,4),type:"subword"}),u.push({text:g.slice(4),type:"subword"})):u.push({text:f+g.toLowerCase(),type:"word"})}),u.push({text:"</s>",type:"special"}),u})(o),b=x.slice(0,15);h.useEffect(()=>{if(!a.current)return;const t=c.context(()=>{c.set(".sp-token",{opacity:0,y:20}),c.set(".sp-id",{opacity:0,scale:.5})},a);return()=>t.revert()},[o]);const m=()=>{a.current&&(s(!0),c.context(()=>{n.current=c.timeline({onComplete:()=>s(!1)}),n.current.to(".sp-token",{opacity:1,y:0,stagger:.08,duration:.3,ease:"back.out(1.7)"}),n.current.to(".sp-id",{opacity:1,scale:1,stagger:.08,duration:.2},"-=0.4")},a))},l=()=>{n.current&&n.current.kill(),c.context(()=>{c.set(".sp-token",{opacity:0,y:20}),c.set(".sp-id",{opacity:0,scale:.5})},a),s(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-emerald-400 mb-2",children:"SentencePiece Tokenization"}),e.jsxs("p",{className:"text-gray-300 max-w-3xl mx-auto",children:["T5 uses ",e.jsx("strong",{children:"SentencePiece"})," with a vocabulary of ~32,000 tokens. Unlike CLIP's BPE, SentencePiece treats text as raw bytes and learns subword units directly."]})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-6",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Enter a prompt to tokenize:"}),e.jsx("input",{type:"text",value:o,onChange:t=>p(t.target.value),className:"w-full px-4 py-3 bg-black/50 border border-emerald-500/30 rounded-lg text-white focus:outline-none focus:border-emerald-500",placeholder:"Type your prompt here..."})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:m,disabled:r,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 rounded-lg transition-colors",children:[e.jsx(N,{size:18}),"Animate Tokenization"]}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(y,{size:18}),"Reset"]})]}),e.jsxs("div",{ref:a,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 rounded-xl p-6 border border-emerald-500/30",children:[e.jsxs("h3",{className:"font-semibold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(D,{size:20}),"SentencePiece Tokens"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"bg-black/40 rounded-lg px-4 py-3 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Input:"}),e.jsxs("div",{className:"text-white font-mono mt-1",children:['"',o,'"']})]}),e.jsx(C,{className:"text-emerald-400 shrink-0",size:24}),e.jsxs("div",{className:"bg-black/40 rounded-lg px-4 py-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Tokens:"}),e.jsx("div",{className:"text-emerald-400 font-mono mt-1",children:x.length})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[b.map((t,i)=>e.jsx("div",{className:`sp-token px-3 py-2 rounded-lg text-sm font-mono ${t.type==="special"?"bg-yellow-500/30 text-yellow-300 border border-yellow-500/50":t.type==="subword"?"bg-teal-500/30 text-teal-300 border border-teal-500/50":"bg-emerald-500/30 text-emerald-300 border border-emerald-500/50"}`,children:t.text},i)),x.length>15&&e.jsxs("div",{className:"px-3 py-2 text-gray-500",children:["...+",x.length-15," more"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-teal-500/10 to-cyan-500/10 rounded-xl p-6 border border-teal-500/30",children:[e.jsxs("h3",{className:"font-semibold text-teal-400 mb-4 flex items-center gap-2",children:[e.jsx(E,{size:20}),"Token IDs"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((t,i)=>e.jsxs("div",{className:"sp-id flex flex-col items-center gap-1",children:[e.jsx("div",{className:`px-3 py-1 rounded text-xs font-mono ${t.type==="special"?"bg-yellow-500/30 text-yellow-300":t.type==="subword"?"bg-teal-500/30 text-teal-300":"bg-emerald-500/30 text-emerald-300"}`,children:t.text}),e.jsx("div",{className:"text-xs text-gray-400",children:"‚Üì"}),e.jsx("div",{className:"px-2 py-1 bg-black/40 rounded text-xs font-mono text-yellow-400",children:1e3+i*127+Math.floor(Math.random()*100)})]},i))})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-300 mb-4",children:"üìä SentencePiece vs BPE (CLIP)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left py-2 px-3 text-gray-400",children:"Feature"}),e.jsx("th",{className:"text-left py-2 px-3 text-emerald-400",children:"SentencePiece (T5)"}),e.jsx("th",{className:"text-left py-2 px-3 text-blue-400",children:"BPE (CLIP)"})]})}),e.jsxs("tbody",{className:"text-gray-300",children:[e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3",children:"Vocabulary"}),e.jsx("td",{className:"py-2 px-3",children:"32,000 tokens"}),e.jsx("td",{className:"py-2 px-3",children:"49,000 tokens"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3",children:"Space handling"}),e.jsx("td",{className:"py-2 px-3",children:"‚ñÅ (underscore) prefix"}),e.jsx("td",{className:"py-2 px-3",children:"Implicit spaces"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3",children:"Training"}),e.jsx("td",{className:"py-2 px-3",children:"Unigram language model"}),e.jsx("td",{className:"py-2 px-3",children:"Byte pair merges"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3",children:"Special tokens"}),e.jsx("td",{className:"py-2 px-3",children:"</s>, <pad>, <unk>"}),e.jsx("td",{className:"py-2 px-3",children:"[BOS], [EOS], [PAD]"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3",children:"Pre-tokenization"}),e.jsx("td",{className:"py-2 px-3",children:"None (raw bytes)"}),e.jsx("td",{className:"py-2 px-3",children:"Whitespace split"})]})]})]})})]}),e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-6 border border-yellow-500/30",children:[e.jsx("h3",{className:"font-semibold text-yellow-400 mb-3",children:"üìù The ‚ñÅ (Underscore) Marker"}),e.jsxs("div",{className:"text-gray-300 text-sm space-y-2",children:[e.jsxs("p",{children:["SentencePiece uses ",e.jsx("code",{className:"text-emerald-400",children:"‚ñÅ"})," (U+2581, lower one eighth block) to mark word boundaries:"]}),e.jsxs("div",{className:"bg-black/40 rounded p-4 font-mono text-sm",children:[e.jsx("div",{className:"text-gray-400",children:'# Input: "hello world"'}),e.jsx("div",{className:"text-emerald-400",children:'# Tokens: ["‚ñÅhello", "‚ñÅworld"]'}),e.jsx("br",{}),e.jsx("div",{className:"text-gray-400",children:'# Input: "unbelievable"'}),e.jsx("div",{className:"text-emerald-400",children:'# Tokens: ["‚ñÅun", "believ", "able"]'})]}),e.jsx("p",{className:"mt-2",children:"This allows reconstructing the original text perfectly, including spaces, which is important for language models."})]})]}),e.jsxs("div",{className:"bg-emerald-500/10 rounded-xl p-4 border border-emerald-500/30",children:[e.jsx("div",{className:"font-semibold text-emerald-400 mb-2",children:"üí° Dynamic Length in SD3"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Unlike CLIP's fixed 77 tokens, T5 in SD3 can handle variable-length sequences. The embeddings are projected and padded as needed before entering the DiT. This flexibility is why T5 excels at long, detailed prompts."})]})]})}function H(){const[o,p]=h.useState(!1),[r,s]=h.useState(null),a=h.useRef(null),n=h.useRef(null),d=[{name:"Self-Attention",color:"#10b981",desc:"Bidirectional attention over all tokens"},{name:"LayerNorm",color:"#06b6d4",desc:"Pre-LN normalization"},{name:"Feed-Forward",color:"#8b5cf6",desc:"MLP with GEGLU activation"},{name:"Residual",color:"#f59e0b",desc:"Skip connections for gradient flow"}];h.useEffect(()=>{if(!a.current)return;const m=c.context(()=>{c.set(".arch-block",{opacity:0,x:-20}),c.set(".arch-arrow",{scaleX:0,transformOrigin:"left"}),c.set(".output-box",{opacity:0,scale:.8})},a);return()=>m.revert()},[]);const x=()=>{a.current&&(p(!0),c.context(()=>{n.current=c.timeline({onComplete:()=>p(!1)}),n.current.to(".arch-block",{opacity:1,x:0,stagger:.1,duration:.4,ease:"power2.out"}),n.current.to(".arch-arrow",{scaleX:1,stagger:.1,duration:.3},"-=0.3"),n.current.to(".output-box",{opacity:1,scale:1,duration:.4,ease:"back.out(1.7)"})},a))},b=()=>{n.current&&n.current.kill(),c.context(()=>{c.set(".arch-block",{opacity:0,x:-20}),c.set(".arch-arrow",{scaleX:0}),c.set(".output-box",{opacity:0,scale:.8})},a),p(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-emerald-400 mb-2",children:"T5-XXL Encoder Architecture"}),e.jsx("p",{className:"text-gray-300 max-w-3xl mx-auto",children:"T5's encoder uses 24 transformer blocks with pre-layer normalization and GEGLU activations. Each block has bidirectional self-attention allowing full context understanding."})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-emerald-400",children:"24"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Encoder Layers"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-teal-400",children:"4096"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Hidden Dim"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-cyan-400",children:"64"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Attention Heads"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-xl font-bold text-blue-400",children:"10240"}),e.jsx("div",{className:"text-sm text-gray-400",children:"FFN Dim"})]})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:x,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 rounded-lg transition-colors",children:[e.jsx(N,{size:18}),"Animate Architecture"]}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(y,{size:18}),"Reset"]})]}),e.jsx("div",{ref:a,className:"bg-black/40 rounded-xl p-6",children:e.jsxs("svg",{viewBox:"0 0 850 350",className:"w-full h-auto",children:[e.jsxs("g",{className:"arch-block",children:[e.jsx("rect",{x:"20",y:"140",width:"80",height:"60",rx:"6",fill:"#10b981",fillOpacity:"0.2",stroke:"#10b981",strokeWidth:"2"}),e.jsx("text",{x:"60",y:"165",textAnchor:"middle",fill:"#34d399",fontSize:"10",children:"Input"}),e.jsx("text",{x:"60",y:"180",textAnchor:"middle",fill:"white",fontSize:"9",children:"Embeddings"})]}),e.jsx("line",{className:"arch-arrow",x1:"105",y1:"170",x2:"145",y2:"170",stroke:"#34d399",strokeWidth:"2"}),e.jsxs("g",{className:"arch-block",children:[e.jsx("rect",{x:"150",y:"60",width:"280",height:"220",rx:"8",fill:"#1e293b",stroke:"#475569",strokeWidth:"2"}),e.jsx("text",{x:"290",y:"85",textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"bold",children:"Encoder Block √ó 24"}),e.jsx("rect",{x:"170",y:"100",width:"100",height:"30",rx:"4",fill:"#06b6d4",fillOpacity:"0.3",stroke:"#06b6d4"}),e.jsx("text",{x:"220",y:"120",textAnchor:"middle",fill:"#22d3ee",fontSize:"9",children:"LayerNorm"}),e.jsx("rect",{x:"170",y:"140",width:"240",height:"40",rx:"4",fill:"#10b981",fillOpacity:"0.2",stroke:"#10b981",strokeWidth:"2"}),e.jsx("text",{x:"290",y:"165",textAnchor:"middle",fill:"#34d399",fontSize:"10",children:"Bidirectional Self-Attention"}),e.jsx("circle",{cx:"395",y:"115",r:"15",fill:"#f59e0b",fillOpacity:"0.3",stroke:"#f59e0b"}),e.jsx("text",{x:"395",y:"120",textAnchor:"middle",fill:"#fbbf24",fontSize:"12",children:"+"}),e.jsx("rect",{x:"170",y:"195",width:"100",height:"30",rx:"4",fill:"#06b6d4",fillOpacity:"0.3",stroke:"#06b6d4"}),e.jsx("text",{x:"220",y:"215",textAnchor:"middle",fill:"#22d3ee",fontSize:"9",children:"LayerNorm"}),e.jsx("rect",{x:"170",y:"235",width:"240",height:"35",rx:"4",fill:"#8b5cf6",fillOpacity:"0.2",stroke:"#8b5cf6",strokeWidth:"2"}),e.jsx("text",{x:"290",y:"258",textAnchor:"middle",fill:"#a78bfa",fontSize:"10",children:"Feed-Forward (GEGLU)"}),e.jsx("circle",{cx:"395",y:"210",r:"15",fill:"#f59e0b",fillOpacity:"0.3",stroke:"#f59e0b"}),e.jsx("text",{x:"395",y:"215",textAnchor:"middle",fill:"#fbbf24",fontSize:"12",children:"+"}),e.jsx("path",{d:"M 150 170 L 140 170 L 140 115 L 380 115",stroke:"#f59e0b",strokeWidth:"1",fill:"none",strokeDasharray:"3,2"}),e.jsx("path",{d:"M 150 250 L 140 250 L 140 210 L 380 210",stroke:"#f59e0b",strokeWidth:"1",fill:"none",strokeDasharray:"3,2"})]}),e.jsx("line",{className:"arch-arrow",x1:"435",y1:"170",x2:"475",y2:"170",stroke:"#a78bfa",strokeWidth:"2"}),e.jsxs("g",{className:"arch-block",children:[e.jsx("rect",{x:"480",y:"140",width:"100",height:"60",rx:"6",fill:"#06b6d4",fillOpacity:"0.3",stroke:"#06b6d4",strokeWidth:"2"}),e.jsx("text",{x:"530",y:"165",textAnchor:"middle",fill:"#22d3ee",fontSize:"10",children:"Final"}),e.jsx("text",{x:"530",y:"180",textAnchor:"middle",fill:"#22d3ee",fontSize:"10",children:"LayerNorm"})]}),e.jsx("line",{className:"arch-arrow",x1:"585",y1:"170",x2:"625",y2:"170",stroke:"#22d3ee",strokeWidth:"2"}),e.jsxs("g",{className:"output-box",children:[e.jsx("rect",{x:"630",y:"120",width:"120",height:"100",rx:"8",fill:"#f59e0b",fillOpacity:"0.2",stroke:"#f59e0b",strokeWidth:"2"}),e.jsx("text",{x:"690",y:"150",textAnchor:"middle",fill:"#fbbf24",fontSize:"11",fontWeight:"bold",children:"Output"}),e.jsx("text",{x:"690",y:"170",textAnchor:"middle",fill:"white",fontSize:"10",children:"[B, seq, 4096]"}),e.jsx("text",{x:"690",y:"195",textAnchor:"middle",fill:"#94a3b8",fontSize:"8",children:"Contextualized"}),e.jsx("text",{x:"690",y:"207",textAnchor:"middle",fill:"#94a3b8",fontSize:"8",children:"Embeddings"})]}),e.jsx("g",{transform:"translate(20, 300)",children:d.map((m,l)=>e.jsxs("g",{transform:`translate(${l*200}, 0)`,children:[e.jsx("rect",{x:"0",y:"0",width:"12",height:"12",rx:"2",fill:m.color,fillOpacity:"0.5"}),e.jsx("text",{x:"18",y:"10",fill:m.color,fontSize:"9",children:m.name})]},l))})]})}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:d.map((m,l)=>e.jsxs("div",{className:`bg-black/30 rounded-lg p-4 border cursor-pointer transition-all ${r===l?"border-white/50 bg-white/5":"border-white/10 hover:border-white/30"}`,onClick:()=>s(r===l?null:l),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:m.color}}),e.jsx("span",{className:"font-semibold text-white",children:m.name})]}),e.jsx("p",{className:"text-sm text-gray-400",children:m.desc})]},l))}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-xl p-6 border border-purple-500/30",children:[e.jsx("h3",{className:"font-semibold text-purple-400 mb-3",children:"üîß GEGLU Activation"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-gray-300",children:[e.jsxs("p",{className:"mb-2",children:["T5 uses ",e.jsx("strong",{children:"GEGLU"})," (Gaussian Error Gated Linear Unit) instead of ReLU:"]}),e.jsx("div",{className:"bg-black/40 rounded p-3 font-mono text-xs",children:"GEGLU(x) = GELU(xW‚ÇÅ) ‚äô (xW‚ÇÇ)"})]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("p",{className:"mb-2",children:"Benefits:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-400",children:[e.jsx("li",{children:"Better gradient flow"}),e.jsx("li",{children:"Smoother activations"}),e.jsx("li",{children:"Improved training stability"})]})]})]})]}),e.jsxs("div",{className:"bg-teal-500/10 rounded-xl p-6 border border-teal-500/30",children:[e.jsx("h3",{className:"font-semibold text-teal-400 mb-3",children:"üìê Pre-Layer Normalization"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"bg-black/30 rounded p-4",children:[e.jsx("div",{className:"font-semibold text-gray-400 mb-2",children:"Post-LN (original Transformer)"}),e.jsx("div",{className:"font-mono text-xs",children:"y = LayerNorm(x + Attention(x))"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Norm after residual - harder to train"})]}),e.jsxs("div",{className:"bg-black/30 rounded p-4",children:[e.jsx("div",{className:"font-semibold text-teal-400 mb-2",children:"Pre-LN (T5)"}),e.jsx("div",{className:"font-mono text-xs",children:"y = x + Attention(LayerNorm(x))"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Norm before attention - more stable training"})]})]})]})]})}function V(){const[o,p]=h.useState(!1),[r,s]=h.useState(2),a=h.useRef(null),n=h.useRef(null),d=["A","majestic","lion","on","a","cliff"];h.useEffect(()=>{if(!a.current)return;const m=c.context(()=>{c.set(".attention-line",{opacity:0}),c.set(".token-highlight",{scale:1})},a);return()=>m.revert()},[r]);const x=()=>{a.current&&(p(!0),c.context(()=>{n.current=c.timeline({onComplete:()=>p(!1)}),n.current.to(`.token-${r}`,{scale:1.2,duration:.3,ease:"back.out(1.7)"}),n.current.to(".attention-line",{opacity:1,stagger:.1,duration:.3}),n.current.to(".attention-line",{opacity:.7,duration:.5,yoyo:!0,repeat:2})},a))},b=()=>{n.current&&n.current.kill(),c.context(()=>{c.set(".attention-line",{opacity:0}),c.set(".token-highlight",{scale:1})},a),p(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-emerald-400 mb-2",children:"Bidirectional Attention"}),e.jsxs("p",{className:"text-gray-300 max-w-3xl mx-auto",children:["Unlike CLIP's causal attention, T5 uses ",e.jsx("strong",{children:"bidirectional self-attention"}),". Every token can attend to ALL other tokens - both before and after it."]})]}),e.jsxs("div",{className:"flex justify-center gap-4 flex-wrap",children:[e.jsxs("button",{onClick:x,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50 rounded-lg transition-colors",children:[e.jsx(N,{size:18}),"Animate Attention"]}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(y,{size:18}),"Reset"]})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"Select a token to see what it attends to:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map((m,l)=>e.jsx("button",{onClick:()=>{s(l),b()},className:`px-4 py-2 rounded-lg transition-colors ${r===l?"bg-emerald-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:m},l))})]}),e.jsx("div",{ref:a,className:"bg-black/40 rounded-xl p-6",children:e.jsxs("svg",{viewBox:"0 0 800 250",className:"w-full h-auto",children:[d.map((m,l)=>{const t=80+l*110,i=l===r;return e.jsxs("g",{children:[e.jsxs("g",{className:`token-highlight token-${l}`,children:[e.jsx("rect",{x:t,y:"100",width:"80",height:"50",rx:"8",fill:i?"#10b981":"#1e3a5f",fillOpacity:i?.5:.3,stroke:i?"#34d399":"#3b82f6",strokeWidth:i?3:1}),e.jsx("text",{x:t+40,y:"130",textAnchor:"middle",fill:i?"#34d399":"white",fontSize:"12",fontWeight:i?"bold":"normal",children:m})]}),l!==r&&e.jsxs("g",{className:"attention-line",style:{opacity:0},children:[e.jsx("line",{x1:80+r*110+40,y1:r<l?150:100,x2:t+40,y2:r<l?100:150,stroke:"#34d399",strokeWidth:"2",strokeDasharray:Math.abs(l-r)>2?"4,2":"none"}),e.jsx("circle",{cx:t+40,cy:r<l?100:150,r:"4",fill:"#34d399"})]})]},l)}),e.jsxs("text",{x:"400",y:"40",textAnchor:"middle",fill:"#34d399",fontSize:"14",fontWeight:"bold",children:['Bidirectional: "',d[r],'" sees ALL tokens']}),e.jsx("text",{x:"400",y:"200",textAnchor:"middle",fill:"#94a3b8",fontSize:"11",children:"Every token has full context of the entire sequence"})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-blue-500/10 rounded-xl p-6 border border-blue-500/30",children:[e.jsxs("h3",{className:"font-semibold text-blue-400 mb-4 flex items-center gap-2",children:[e.jsx(U,{size:20}),"CLIP: Causal (Unidirectional)"]}),e.jsxs("div",{className:"bg-black/40 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"font-mono text-xs text-gray-400 mb-2",children:"Attention Mask:"}),e.jsx("div",{className:"grid grid-cols-6 gap-1 text-xs",children:d.map((m,l)=>e.jsx("div",{className:"flex flex-col gap-1",children:d.map((t,i)=>e.jsx("div",{className:`w-full aspect-square rounded flex items-center justify-center ${i<=l?"bg-blue-500/50 text-white":"bg-gray-800 text-gray-600"}`,children:i<=l?"1":"0"},i))},l))})]}),e.jsxs("p",{className:"text-sm text-gray-300",children:["Token can only see ",e.jsx("strong",{children:"itself and previous tokens"}),". Good for generation, but limits understanding."]})]}),e.jsxs("div",{className:"bg-emerald-500/10 rounded-xl p-6 border border-emerald-500/30",children:[e.jsxs("h3",{className:"font-semibold text-emerald-400 mb-4 flex items-center gap-2",children:[e.jsx(M,{size:20}),"T5: Bidirectional"]}),e.jsxs("div",{className:"bg-black/40 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"font-mono text-xs text-gray-400 mb-2",children:"Attention Mask:"}),e.jsx("div",{className:"grid grid-cols-6 gap-1 text-xs",children:d.map((m,l)=>e.jsx("div",{className:"flex flex-col gap-1",children:d.map((t,i)=>e.jsx("div",{className:"w-full aspect-square rounded flex items-center justify-center bg-emerald-500/50 text-white",children:"1"},i))},l))})]}),e.jsxs("p",{className:"text-sm text-gray-300",children:["Every token sees ",e.jsx("strong",{children:"all other tokens"}),". Full context for understanding complex relationships."]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 rounded-xl p-6 border border-emerald-500/30",children:[e.jsx("h3",{className:"font-semibold text-emerald-400 mb-4",children:"üéØ Why Bidirectional Matters for SD3"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-white mb-2",children:'Example: "A red ball to the LEFT of a blue cube"'}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-gray-300",children:[e.jsx("span",{className:"text-blue-400",children:"CLIP (causal):"}),` When processing "LEFT", it hasn't seen "blue cube" yet. Harder to understand the spatial relationship.`]}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("span",{className:"text-emerald-400",children:"T5 (bidirectional):"}),' "LEFT" can attend to both "red ball" AND "blue cube" simultaneously. Full spatial context!']})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-white mb-2",children:'Example: "not a dog but a cat"'}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-gray-300",children:[e.jsx("span",{className:"text-blue-400",children:"CLIP:"}),' "dog" is encoded before seeing "but a cat", potentially missing the negation context.']}),e.jsxs("div",{className:"text-gray-300",children:[e.jsx("span",{className:"text-emerald-400",children:"T5:"}),' "dog" sees the full context including "not" and "but a cat", properly encoding the negation.']})]})]})]})]}),e.jsxs("div",{className:"bg-teal-500/10 rounded-xl p-6 border border-teal-500/30",children:[e.jsx("h3",{className:"font-semibold text-teal-400 mb-3",children:"üìç Relative Position Bias"}),e.jsxs("div",{className:"text-gray-300 text-sm space-y-2",children:[e.jsxs("p",{children:["T5 uses ",e.jsx("strong",{children:"relative position biases"})," instead of absolute position embeddings:"]}),e.jsxs("div",{className:"bg-black/40 rounded p-4 font-mono text-xs",children:["Attention(Q, K) = softmax((QK·µÄ + B) / ‚àöd) V",e.jsx("br",{}),e.jsx("span",{className:"text-teal-400",children:"where B = learned_bias(pos_i - pos_j)"})]}),e.jsx("p",{children:"This means T5 can generalize to longer sequences than it was trained on, and the attention patterns are translation-invariant."})]})]})]})}function Q(){const[o,p]=h.useState("xxl"),r={base:{name:"T5-Base",params:"220M",layers:12,hidden:768,heads:12,ffn:3072,memory:"~1GB",speed:"Very Fast",quality:"Basic",sdUse:!1},large:{name:"T5-Large",params:"770M",layers:24,hidden:1024,heads:16,ffn:4096,memory:"~3GB",speed:"Fast",quality:"Good",sdUse:!1},xl:{name:"T5-XL",params:"3B",layers:24,hidden:2048,heads:32,ffn:5120,memory:"~6GB",speed:"Medium",quality:"Great",sdUse:!1},xxl:{name:"T5-XXL",params:"11B (4.7B encoder)",layers:24,hidden:4096,heads:64,ffn:10240,memory:"~8-10GB",speed:"Slow",quality:"Excellent",sdUse:!0}},s=r[o],a=11e3,n={base:220,large:770,xl:3e3,xxl:11e3};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-emerald-400 mb-2",children:"T5 Model Scaling"}),e.jsxs("p",{className:"text-gray-300 max-w-3xl mx-auto",children:["T5 comes in multiple sizes. SD3 uses ",e.jsx("strong",{children:"T5-XXL"})," (the largest) for maximum text understanding capability, though only the encoder portion."]})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:Object.entries(r).map(([d,x])=>e.jsxs("button",{onClick:()=>p(d),className:`px-4 py-2 rounded-lg transition-all ${o===d?"bg-emerald-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"} ${x.sdUse?"ring-2 ring-yellow-500/50":""}`,children:[x.name,x.sdUse&&e.jsx("span",{className:"ml-2 text-yellow-400 text-xs",children:"‚òÖ SD3"})]},d))}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/10 to-teal-500/10 rounded-xl p-6 border border-emerald-500/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-emerald-400",children:s.name}),s.sdUse&&e.jsx("span",{className:"px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm",children:"Used in SD3"})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:s.params}),e.jsx("div",{className:"text-sm text-gray-400",children:"Parameters"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-teal-400",children:s.layers}),e.jsx("div",{className:"text-sm text-gray-400",children:"Encoder Layers"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-cyan-400",children:s.hidden}),e.jsx("div",{className:"text-sm text-gray-400",children:"Hidden Dim"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:s.heads}),e.jsx("div",{className:"text-sm text-gray-400",children:"Attention Heads"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-black/30 rounded-lg p-3",children:[e.jsx(L,{className:"text-purple-400",size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"VRAM"}),e.jsx("div",{className:"text-white font-semibold",children:s.memory})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-black/30 rounded-lg p-3",children:[e.jsx(z,{className:"text-orange-400",size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Speed"}),e.jsx("div",{className:"text-white font-semibold",children:s.speed})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-black/30 rounded-lg p-3",children:[e.jsx(B,{className:"text-green-400",size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Quality"}),e.jsx("div",{className:"text-white font-semibold",children:s.quality})]})]})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-300 mb-4",children:"üìä Parameter Scale Comparison"}),e.jsx("div",{className:"space-y-3",children:Object.entries(r).map(([d,x])=>{const b=n[d]/a*100,m=d===o;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 text-sm text-gray-400",children:x.name}),e.jsx("div",{className:"flex-1 bg-black/50 rounded-full h-6 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 flex items-center justify-end pr-2 ${m?"bg-emerald-500":"bg-emerald-500/40"}`,style:{width:`${Math.max(b,5)}%`},children:e.jsx("span",{className:"text-xs text-white font-medium",children:x.params})})})]},d)})})]}),e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-6 border border-yellow-500/30",children:[e.jsxs("h3",{className:"font-semibold text-yellow-400 mb-3 flex items-center gap-2",children:[e.jsx(A,{size:20}),"Why SD3 Uses T5-XXL"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{className:"text-yellow-400",children:"4096-dim embeddings"})}),e.jsx("p",{children:"Much richer representations than CLIP's 768/1280. Can capture subtle nuances in prompts."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{className:"text-yellow-400",children:"4.7B encoder parameters"})}),e.jsx("p",{children:"Massive capacity for language understanding. Better at complex relationships and details."})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-xl p-6 border border-purple-500/30",children:[e.jsx("h3",{className:"font-semibold text-purple-400 mb-4",children:"üìà Scaling Laws in Practice"}),e.jsxs("div",{className:"space-y-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-mono text-xs mb-2",children:"Quality ‚àù log(Parameters) √ó log(Data) √ó log(Compute)"}),e.jsx("p",{className:"text-gray-400",children:"T5-XXL follows the scaling laws - more parameters = better understanding, but with diminishing returns and increasing costs."})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left py-2 px-3 text-gray-400",children:"Metric"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Base ‚Üí Large"}),e.jsx("th",{className:"text-left py-2 px-3",children:"Large ‚Üí XL"}),e.jsx("th",{className:"text-left py-2 px-3",children:"XL ‚Üí XXL"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3 text-gray-400",children:"Params"}),e.jsx("td",{className:"py-2 px-3 text-emerald-400",children:"3.5√ó"}),e.jsx("td",{className:"py-2 px-3 text-emerald-400",children:"4√ó"}),e.jsx("td",{className:"py-2 px-3 text-emerald-400",children:"3.7√ó"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3 text-gray-400",children:"Hidden Dim"}),e.jsx("td",{className:"py-2 px-3",children:"768‚Üí1024"}),e.jsx("td",{className:"py-2 px-3",children:"1024‚Üí2048"}),e.jsx("td",{className:"py-2 px-3",children:"2048‚Üí4096"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3 text-gray-400",children:"Memory"}),e.jsx("td",{className:"py-2 px-3",children:"3√ó"}),e.jsx("td",{className:"py-2 px-3",children:"2√ó"}),e.jsx("td",{className:"py-2 px-3",children:"1.5√ó"})]})]})]})})]})]}),e.jsxs("div",{className:"bg-emerald-500/10 rounded-xl p-6 border border-emerald-500/30",children:[e.jsx("h3",{className:"font-semibold text-emerald-400 mb-3",children:"üí° Practical Considerations"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-300",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-white mb-2",children:"When to use T5"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-400",children:[e.jsx("li",{children:"Complex, detailed prompts"}),e.jsx("li",{children:"Spatial relationships"}),e.jsx("li",{children:"Negations and qualifiers"}),e.jsx("li",{children:"Long descriptions (100+ tokens)"})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-white mb-2",children:"When to skip T5"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-400",children:[e.jsx("li",{children:"Simple prompts"}),e.jsx("li",{children:"Fast generation needed"}),e.jsx("li",{children:"Limited VRAM (<12GB)"}),e.jsx("li",{children:"Batch processing"})]})]})]})]})]})}function K(){const[o,p]=h.useState({}),[r,s]=h.useState(!1),[a,n]=h.useState(0),d=[{id:1,question:"What tokenizer does T5 use?",options:["BPE","WordPiece","SentencePiece","Character-level"],correct:2,explanation:"T5 uses SentencePiece with a vocabulary of ~32,000 tokens and the ‚ñÅ marker for word boundaries."},{id:2,question:"How many encoder layers does T5-XXL have?",options:["12","24","32","48"],correct:1,explanation:"T5-XXL has 24 encoder layers (and 24 decoder layers, but SD3 only uses the encoder)."},{id:3,question:"What is the hidden dimension of T5-XXL?",options:["768","1024","2048","4096"],correct:3,explanation:"T5-XXL has a hidden dimension of 4096, much larger than CLIP's 768/1280."},{id:4,question:"What type of attention does T5's encoder use?",options:["Causal (unidirectional)","Bidirectional","Cross-attention only","Sparse attention"],correct:1,explanation:"T5's encoder uses bidirectional self-attention - every token can attend to all other tokens."},{id:5,question:"What activation function does T5 use in its feed-forward layers?",options:["ReLU","GELU","GEGLU","SiLU"],correct:2,explanation:"T5 uses GEGLU (Gaussian Error Gated Linear Unit) which combines GELU with a gating mechanism."},{id:6,question:"Why does SD3 only use T5's encoder (not decoder)?",options:["The decoder is broken","Encoders are faster","SD3 needs text understanding, not text generation","The decoder uses too much memory"],correct:2,explanation:"SD3 needs rich text embeddings to condition image generation. The encoder provides understanding; the decoder would generate text, which isn't needed."},{id:7,question:"What is T5's advantage over CLIP for long prompts?",options:["Faster processing","Bidirectional attention + longer context","Visual alignment","Smaller model size"],correct:1,explanation:"T5 supports 256+ tokens (vs CLIP's 77) and uses bidirectional attention for better understanding of complex relationships."},{id:8,question:"Approximately how much VRAM does T5-XXL require?",options:["~2GB","~4GB","~8-10GB","~20GB"],correct:2,explanation:"T5-XXL's encoder requires approximately 8-10GB VRAM, making it optional for users with limited resources."}],x=[{title:"Exercise 1: T5 Output Dimensions",description:"Calculate the output shapes for different T5 variants.",task:`Given a batch of 2 prompts with 50 tokens each, calculate the encoder output shape for:

1. T5-Base (hidden_dim=768)
2. T5-Large (hidden_dim=1024)
3. T5-XXL (hidden_dim=4096)

Note: T5 doesn't pad to fixed length like CLIP.`,solution:`All T5 variants output shape: [batch_size, seq_len, hidden_dim]

1. T5-Base: [2, 50, 768]
   Total elements: 2 √ó 50 √ó 768 = 76,800

2. T5-Large: [2, 50, 1024]
   Total elements: 2 √ó 50 √ó 1024 = 102,400

3. T5-XXL: [2, 50, 4096]
   Total elements: 2 √ó 50 √ó 4096 = 409,600

T5-XXL has 5.3√ó more output elements than T5-Base!`},{title:"Exercise 2: Attention Comparison",description:"Compare attention patterns between CLIP and T5 for a sample sentence.",task:`For the sentence: "The cat sat on the mat"
(6 tokens, ignoring special tokens)

1. How many attention connections per token in CLIP (causal)?
2. How many attention connections per token in T5 (bidirectional)?
3. What's the total attention computations for each?`,solution:`CLIP (Causal Attention):
Token 1: sees 1 token
Token 2: sees 2 tokens
Token 3: sees 3 tokens
Token 4: sees 4 tokens
Token 5: sees 5 tokens
Token 6: sees 6 tokens
Total: 1+2+3+4+5+6 = 21 attention connections

T5 (Bidirectional Attention):
Each token sees all 6 tokens
Total: 6 √ó 6 = 36 attention connections

T5 has 36/21 = 1.7√ó more attention connections!

For n tokens:
- CLIP: n(n+1)/2 connections
- T5: n¬≤ connections`},{title:"Exercise 3: SentencePiece Tokenization",description:"Practice SentencePiece tokenization patterns.",task:`Predict how SentencePiece would tokenize these phrases:

1. "hello world"
2. "unbelievable"
3. "artificial intelligence"
4. "SD3 is amazing"

Remember: ‚ñÅ marks word boundaries (including leading space)`,solution:`1. "hello world"
   ‚Üí ["‚ñÅhello", "‚ñÅworld"]
   (Each word gets ‚ñÅ prefix for space)

2. "unbelievable"
   ‚Üí ["‚ñÅun", "believ", "able"]
   (Common prefix + suffix split)

3. "artificial intelligence"  
   ‚Üí ["‚ñÅart", "ificial", "‚ñÅintellig", "ence"]
   (Long words split into subwords)

4. "SD3 is amazing"
   ‚Üí ["‚ñÅSD", "3", "‚ñÅis", "‚ñÅamazing"]
   (Numbers often separate, common words intact)

Key insight: ‚ñÅ appears at START of words (not end), 
representing the space BEFORE the word.`},{title:"Exercise 4: Memory Calculation",description:"Estimate memory requirements for T5 encoding.",task:`Calculate the memory needed to store T5-XXL encoder outputs for a batch:

Batch size: 8
Sequence length: 256 tokens
Hidden dimension: 4096
Data type: float16 (2 bytes per value)

Also calculate for float32 (4 bytes per value).`,solution:`Output tensor shape: [8, 256, 4096]
Total elements: 8 √ó 256 √ó 4096 = 8,388,608 elements

float16 memory:
8,388,608 √ó 2 bytes = 16,777,216 bytes
= 16 MB per batch

float32 memory:
8,388,608 √ó 4 bytes = 33,554,432 bytes
= 32 MB per batch

Note: This is just the OUTPUT. The model weights 
themselves require ~8-10GB for T5-XXL encoder!

Total during inference ‚âà 10GB + batch outputs`}],b=(t,i)=>{p({...o,[t]:i})},m=()=>{let t=0;return d.forEach(i=>{o[i.id]===i.correct&&t++}),t},l=()=>{p({}),s(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-emerald-400 mb-2",children:"Practice Lab"}),e.jsx("p",{className:"text-gray-300",children:"Test your understanding of T5 text encoders with quizzes and exercises."})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>n(-1),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${a===-1?"bg-emerald-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:[e.jsx(X,{size:18}),"Quiz"]}),e.jsxs("button",{onClick:()=>n(0),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${a>=0?"bg-teal-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:[e.jsx(O,{size:18}),"Exercises"]})]}),a===-1?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:"T5 Text Encoder Quiz"}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded-lg text-sm transition-colors",children:[e.jsx(y,{size:16}),"Reset"]})]}),d.map((t,i)=>e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-white/10",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-emerald-600 flex items-center justify-center text-white font-bold shrink-0",children:i+1}),e.jsx("p",{className:"text-gray-200 font-medium",children:t.question})]}),e.jsx("div",{className:"space-y-2 ml-11",children:t.options.map((u,g)=>{const j=o[t.id]===g,f=g===t.correct,v=r&&f,w=r&&j&&!f;return e.jsxs("button",{onClick:()=>!r&&b(t.id,g),disabled:r,className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center gap-3 ${v?"bg-green-500/20 border-green-500":w?"bg-red-500/20 border-red-500":j?"bg-emerald-500/30 border-emerald-500":"bg-white/5 border-transparent hover:bg-white/10"} border`,children:[e.jsx("span",{className:`w-6 h-6 rounded-full border flex items-center justify-center text-sm ${j?"border-emerald-400 text-emerald-400":"border-gray-500 text-gray-500"}`,children:String.fromCharCode(65+g)}),e.jsx("span",{className:"text-gray-300",children:u}),v&&e.jsx(I,{className:"ml-auto text-green-400",size:20}),w&&e.jsx(F,{className:"ml-auto text-red-400",size:20})]},g)})}),r&&e.jsx("div",{className:`mt-4 ml-11 p-3 rounded-lg ${o[t.id]===t.correct?"bg-green-500/10":"bg-yellow-500/10"}`,children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(k,{size:16,className:"text-yellow-400"}),e.jsx("span",{className:"text-gray-300",children:t.explanation})]})})]},t.id)),e.jsx("div",{className:"text-center",children:r?e.jsxs("div",{className:"bg-gradient-to-r from-emerald-500/20 to-teal-500/20 rounded-xl p-6 border border-emerald-500/30",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:[m()," / ",d.length]}),e.jsx("p",{className:"text-gray-300",children:m()===d.length?"üéâ Perfect! You've mastered T5 text encoders!":m()>=d.length*.7?"üëç Great job! Review the explanations for any missed questions.":"üìö Keep learning! Review the previous panels and try again."})]}):e.jsx("button",{onClick:()=>s(!0),disabled:Object.keys(o).length<d.length,className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 disabled:opacity-50 rounded-lg font-semibold transition-colors",children:"Submit Answers"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map((t,i)=>e.jsxs("button",{onClick:()=>n(i),className:`px-3 py-2 rounded-lg text-sm transition-colors ${a===i?"bg-teal-600 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:["Exercise ",i+1]},i))}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-teal-500/30",children:[e.jsx("h3",{className:"text-xl font-semibold text-teal-400 mb-2",children:x[a].title}),e.jsx("p",{className:"text-gray-300 mb-4",children:x[a].description}),e.jsxs("div",{className:"bg-black/40 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Task:"}),e.jsx("pre",{className:"text-gray-200 whitespace-pre-wrap font-mono text-sm",children:x[a].task})]}),e.jsxs("details",{className:"group",children:[e.jsx("summary",{className:"cursor-pointer px-4 py-2 bg-teal-600/30 hover:bg-teal-600/40 rounded-lg text-teal-300 transition-colors",children:"Show Solution"}),e.jsx("div",{className:"mt-4 bg-green-500/10 rounded-lg p-4 border border-green-500/30",children:e.jsx("pre",{className:"text-green-300 whitespace-pre-wrap font-mono text-sm",children:x[a].solution})})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-4 border border-yellow-500/30",children:[e.jsxs("h4",{className:"text-yellow-400 font-semibold mb-2 flex items-center gap-2",children:[e.jsx(k,{size:18}),"Tips for Success"]}),e.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ T5-XXL hidden_dim = 4096 (much larger than CLIP)"}),e.jsx("li",{children:"‚Ä¢ Bidirectional attention = n¬≤ attention computations"}),e.jsx("li",{children:"‚Ä¢ SentencePiece uses ‚ñÅ to mark word boundaries"}),e.jsx("li",{children:"‚Ä¢ T5 encoder output shape: [batch, seq_len, hidden_dim]"})]})]})]})]})}const Y=[{id:"overview",label:"T5 Overview",icon:R},{id:"tokenization",label:"SentencePiece",icon:q},{id:"architecture",label:"Architecture",icon:W},{id:"bidirectional",label:"Bidirectional",icon:S},{id:"scale",label:"Model Scale",icon:A},{id:"practice",label:"Practice Lab",icon:$}];function pe(){const[o,p]=h.useState("overview"),r=()=>{switch(o){case"overview":return e.jsx(T,{});case"tokenization":return e.jsx(_,{});case"architecture":return e.jsx(H,{});case"bidirectional":return e.jsx(V,{});case"scale":return e.jsx(Q,{});case"practice":return e.jsx(K,{});default:return e.jsx(T,{})}};return e.jsx("div",{className:"text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:Y.map((s,a)=>{const n=s.icon;return e.jsxs("button",{onClick:()=>p(s.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${o===s.id?"bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-lg shadow-emerald-500/25":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-white/20 flex items-center justify-center text-xs font-bold",children:a+1}),e.jsx(n,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:s.label})]},s.id)})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-6",children:r()})]})})}export{pe as default};
