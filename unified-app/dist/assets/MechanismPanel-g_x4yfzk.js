import{r as n,j as e}from"./index-quAWpIA7.js";import{m as o}from"./proxy-D7LjGbFl.js";function m(){const[l,i]=n.useState(0),a=[{i:0,freq:1,label:"Fast rotation"},{i:1,freq:.5,label:"Medium rotation"},{i:2,freq:.25,label:"Slow rotation"},{i:3,freq:.125,label:"Very slow rotation"}];return e.jsx("div",{className:"p-8 h-full overflow-y-auto",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-violet-600 dark:text-violet-400 mb-4",children:"RoPE Mathematics"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-300 max-w-2xl mx-auto",children:'RoPE applies rotation matrices to pairs of dimensions, each with a different frequency. This creates a unique "fingerprint" for each position.'})]}),e.jsxs("div",{className:"bg-slate-900 rounded-2xl p-8 mb-8 text-white",children:[e.jsx("h3",{className:"text-lg font-bold text-violet-400 mb-4",children:"The Rotation Matrix"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-8",children:[e.jsxs("div",{className:"font-mono text-center",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-2",children:"For dimension pair (2i, 2i+1):"}),e.jsxs("div",{className:"text-xl",children:["R",e.jsx("sub",{children:"θ,m"})," ="]})]}),e.jsx("div",{className:"bg-slate-800 p-4 rounded-lg font-mono",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[e.jsxs("div",{className:"px-4 py-2 bg-violet-900/50 rounded",children:["cos(mθ",e.jsx("sub",{children:"i"}),")"]}),e.jsxs("div",{className:"px-4 py-2 bg-fuchsia-900/50 rounded",children:["-sin(mθ",e.jsx("sub",{children:"i"}),")"]}),e.jsxs("div",{className:"px-4 py-2 bg-fuchsia-900/50 rounded",children:["sin(mθ",e.jsx("sub",{children:"i"}),")"]}),e.jsxs("div",{className:"px-4 py-2 bg-violet-900/50 rounded",children:["cos(mθ",e.jsx("sub",{children:"i"}),")"]})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-2",children:"Where:"}),e.jsxs("div",{className:"font-mono text-violet-300",children:["θ",e.jsx("sub",{children:"i"})," = 10000",e.jsx("sup",{children:"-2i/d"})]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-slate-200 dark:border-slate-700 mb-8",children:[e.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-200 mb-6",children:"Different Frequencies for Different Dimension Pairs"}),e.jsx("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:a.map((s,t)=>e.jsxs("button",{onClick:()=>i(t),className:`p-4 rounded-xl border-2 transition-all ${l===t?"border-violet-500 bg-violet-50 dark:bg-violet-900/20":"border-slate-200 dark:border-slate-700 hover:border-violet-300"}`,children:[e.jsxs("div",{className:"text-sm font-mono text-slate-500",children:["Pair ",t]}),e.jsxs("div",{className:"text-lg font-bold text-violet-600 dark:text-violet-400",children:["d",e.jsx("sub",{children:2*t}),", d",e.jsx("sub",{children:2*t+1})]}),e.jsx("div",{className:"text-xs text-slate-400 mt-1",children:s.label})]},t))}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-900 rounded-xl p-4",children:[e.jsxs("svg",{viewBox:"0 0 400 100",className:"w-full h-24",children:[[0,1,2,3,4,5,6,7].map(s=>e.jsx("line",{x1:s*50,y1:"0",x2:s*50,y2:"100",stroke:"currentColor",strokeOpacity:"0.1"},s)),e.jsx("line",{x1:"0",y1:"50",x2:"400",y2:"50",stroke:"currentColor",strokeOpacity:"0.2"}),e.jsx(o.path,{d:Array.from({length:81},(s,t)=>{const r=t*5,d=50-35*Math.sin(t*.2*a[l].freq*Math.PI);return`${t===0?"M":"L"} ${r} ${d}`}).join(" "),fill:"none",stroke:"url(#waveGradient)",strokeWidth:"3",initial:{pathLength:0},animate:{pathLength:1}},l),[0,1,2,3,4,5,6,7].map(s=>{const t=50-35*Math.sin(s*10*.2*a[l].freq*Math.PI);return e.jsxs("g",{children:[e.jsx("circle",{cx:s*50,cy:t,r:"4",fill:"#8b5cf6"}),e.jsxs("text",{x:s*50,y:"95",textAnchor:"middle",className:"text-xs fill-slate-500",children:["pos=",s]})]},s)}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"waveGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8b5cf6"}),e.jsx("stop",{offset:"100%",stopColor:"#d946ef"})]})})]}),e.jsxs("div",{className:"text-center text-sm text-slate-500 mt-2",children:["Frequency θ",e.jsx("sub",{children:l})," = ",a[l].freq.toFixed(3)," (relative)"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-xl p-6",children:[e.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200 mb-3",children:"Efficient Implementation"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Instead of matrix multiplication, RoPE can be computed element-wise:"}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-3 rounded-lg font-mono text-xs overflow-x-auto",children:[e.jsx("div",{className:"text-violet-600",children:"x'[2i] = x[2i]·cos(mθ) - x[2i+1]·sin(mθ)"}),e.jsx("div",{className:"text-fuchsia-600",children:"x'[2i+1] = x[2i]·sin(mθ) + x[2i+1]·cos(mθ)"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-violet-500 to-fuchsia-500 rounded-xl p-6 text-white",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Used In"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["LLaMA","LLaMA 2","LLaMA 3","Mistral","Mixtral","PaLM","Gemma","Falcon"].map(s=>e.jsx("span",{className:"px-3 py-1 bg-white/20 rounded-full text-sm",children:s},s))})]})]})]})})}export{m as default};
