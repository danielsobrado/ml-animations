import{r as h,j as t}from"./index-quAWpIA7.js";function v({nodes:i,setNodes:a,links:x,setLinks:f}){const c=h.useRef(null),[m,g]=h.useState(null),[n,u]=h.useState(null),p=(e,o)=>i.find(s=>Math.hypot(s.x-e,s.y-o)<30),b=e=>{const o=c.current.getBoundingClientRect(),s=e.clientX-o.left,l=e.clientY-o.top,r=p(s,l);if(r)e.shiftKey?u({source:r,x:s,y:l}):g(r);else{const d=String.fromCharCode(65+i.length);i.length<26&&a([...i,{id:d,x:s,y:l}])}},y=e=>{const o=c.current.getBoundingClientRect(),s=e.clientX-o.left,l=e.clientY-o.top;n?u({...n,x:s,y:l}):m&&a(i.map(r=>r.id===m.id?{...r,x:s,y:l}:r))},j=e=>{const o=c.current.getBoundingClientRect(),s=e.clientX-o.left,l=e.clientY-o.top,r=p(s,l);n&&r&&r.id!==n.source.id&&(x.some(d=>d.source===n.source.id&&d.target===r.id)||f([...x,{source:n.source.id,target:r.id}])),u(null),g(null)};return t.jsxs("div",{className:"p-8 h-full flex flex-col items-center",children:[t.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-indigo-900 mb-4",children:"Graph Builder"}),t.jsxs("p",{className:"text-lg text-slate-700 leading-relaxed",children:["Build your mini-internet!",t.jsx("br",{}),t.jsx("span",{className:"text-sm bg-slate-100 px-2 py-1 rounded border border-slate-300 mx-1",children:"Click Empty Space"})," to Add Node.",t.jsx("span",{className:"text-sm bg-slate-100 px-2 py-1 rounded border border-slate-300 mx-1",children:"Shift + Drag"})," from Node to Link."]})]}),t.jsxs("div",{className:"w-full max-w-4xl h-[500px] bg-slate-50 rounded-xl border-2 border-slate-200 shadow-inner relative overflow-hidden",children:[t.jsxs("svg",{ref:c,className:"w-full h-full cursor-crosshair",onMouseDown:b,onMouseMove:y,onMouseUp:j,children:[t.jsx("defs",{children:t.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"28",refY:"3.5",orient:"auto",children:t.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#94a3b8"})})}),x.map((e,o)=>{const s=i.find(r=>r.id===e.source),l=i.find(r=>r.id===e.target);return!s||!l?null:t.jsx("line",{x1:s.x,y1:s.y,x2:l.x,y2:l.y,stroke:"#94a3b8",strokeWidth:"2",markerEnd:"url(#arrowhead)"},o)}),n&&t.jsx("line",{x1:n.source.x,y1:n.source.y,x2:n.x,y2:n.y,stroke:"#cbd5e1",strokeWidth:"2",strokeDasharray:"5 5"}),i.map(e=>t.jsxs("g",{transform:`translate(${e.x},${e.y})`,children:[t.jsx("circle",{r:"20",fill:"white",stroke:"#4f46e5",strokeWidth:"3",className:"cursor-move hover:fill-indigo-50"}),t.jsx("text",{dy:"5",textAnchor:"middle",className:"font-bold text-indigo-900 pointer-events-none select-none",children:e.id})]},e.id))]}),t.jsx("button",{onClick:()=>{a([]),f([])},className:"absolute top-4 right-4 px-4 py-2 bg-white text-red-600 border border-red-200 rounded-lg shadow-sm hover:bg-red-50 font-bold text-sm",children:"Clear All"})]})]})}export{v as default};
