import{r as b,j as e}from"./index-quAWpIA7.js";function S(){const N=Array.from({length:4},()=>Array.from({length:4},()=>Math.floor(Math.random()*5))),v=[{name:"Edge (Vertical)",kernel:[[1,0,-1],[1,0,-1],[1,0,-1]]},{name:"Edge (Horizontal)",kernel:[[1,1,1],[0,0,0],[-1,-1,-1]]},{name:"Sharpen",kernel:[[0,-1,0],[-1,5,-1],[0,-1,0]]},{name:"Blur (Average)",kernel:[[1,1,1],[1,1,1],[1,1,1]]},{name:"Identity",kernel:[[0,0,0],[0,1,0],[0,0,0]]}],o=v[Math.floor(Math.random()*v.length)],i=o.kernel,p=o.name,f=[];for(let x=0;x<2;x++){const g=[];for(let u=0;u<2;u++){let j=0;for(let m=0;m<3;m++)for(let d=0;d<3;d++)j+=N[x+m][u+d]*i[m][d];g.push(j)}f.push(g)}return{input:N,kernel:i,kernelName:p,output:f}}function D(){const[N,v]=b.useState(S),[o,i]=b.useState({row:0,col:0}),[p,f]=b.useState([["",""],["",""]]),[x,g]=b.useState([[null,null],[null,null]]),[u,j]=b.useState(!1),[m,d]=b.useState(!1),{input:k,kernel:y,kernelName:E,output:w}=N,H=(t,r,n)=>{const s=p.map((a,l)=>a.map((c,h)=>l===t&&h===r?n:c));f(s)},P=(t,r)=>{const s=parseInt(p[t][r])===w[t][r],a=x.map((l,c)=>l.map((h,K)=>c===t&&K===r?s:h));g(a),s&&(r<1?i({row:t,col:r+1}):t<1?i({row:t+1,col:0}):d(!0))},$=()=>{const t=w.map((n,s)=>n.map((a,l)=>parseInt(p[s][l])===a));g(t),t.every(n=>n.every(s=>s===!0))&&d(!0)},C=()=>{v(S()),i({row:0,col:0}),f([["",""],["",""]]),g([[null,null],[null,null]]),j(!1),d(!1)},I=(t,r)=>{const n=[];for(let s=0;s<3;s++){const a=[];for(let l=0;l<3;l++)a.push(k[t+s][r+l]);n.push(a)}return n},A=(t,r)=>{const n=I(t,r),s=[];let a=0;for(let l=0;l<3;l++)for(let c=0;c<3;c++){const h=n[l][c]*y[l][c];s.push(`${n[l][c]}Ã—${y[l][c]}=${h}`),a+=h}return{products:s,sum:a}},M=(t,r,n,s)=>t>=n&&t<n+3&&r>=s&&r<s+3;return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3 text-center",children:"Interactive Practice"}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-4",children:[e.jsx("p",{className:"text-center text-gray-700 mb-3 font-semibold",children:"Compute the 2D convolution output"}),e.jsxs("div",{className:"flex flex-wrap items-start justify-center gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-center mb-1",children:"Input (4Ã—4)"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:k.flat().map((t,r)=>{const n=Math.floor(r/4),s=r%4,a=M(n,s,o.row,o.col);return e.jsx("div",{className:`w-9 h-9 flex items-center justify-center text-sm font-mono font-bold border-2 rounded
                        ${a?"bg-purple-100 border-purple-400":"bg-blue-50 border-blue-300"}
                      `,children:t},r)})}),e.jsx("div",{className:"absolute border-3 border-purple-600 rounded pointer-events-none",style:{top:o.row*38-1,left:o.col*38-1,width:3*38+2,height:3*38+2,borderWidth:3}})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-center mb-1",children:"Kernel (3Ã—3)"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-center mb-1",children:E}),e.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:"repeat(3, 1fr)"},children:y.flat().map((t,r)=>e.jsx("div",{className:`w-9 h-9 flex items-center justify-center text-sm font-mono font-bold border-2 rounded
                    ${t>0?"bg-green-100 border-green-400":t<0?"bg-red-100 border-red-400":"bg-gray-100 border-gray-300"}
                    ${t<0?"text-red-700":"text-gray-800"}
                  `,children:t},r))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-center mb-1",children:"Output (2Ã—2)"}),e.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:"repeat(2, 1fr)"},children:w.flat().map((t,r)=>{const n=Math.floor(r/2),s=r%2,a=n===o.row&&s===o.col,l=x[n][s];return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:p[n][s],onChange:c=>H(n,s,c.target.value),className:`w-12 h-12 text-center text-sm font-mono font-bold border-2 rounded
                        ${a?"border-purple-600 ring-2 ring-purple-300":"border-purple-300"}
                        ${l===!0?"bg-green-100":l===!1?"bg-red-100":"bg-purple-50"}
                        focus:outline-none focus:ring-2 focus:ring-purple-500
                      `,onFocus:()=>i({row:n,col:s})}),l===!0&&e.jsx("span",{className:"absolute -top-1 -right-1 text-xs",children:"âœ“"}),l===!1&&e.jsx("span",{className:"absolute -top-1 -right-1 text-xs",children:"âœ—"})]},r)})})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("p",{className:"font-semibold text-purple-700",children:["Computing Output[",o.row,", ",o.col,"]"]}),e.jsx("button",{onClick:()=>j(!u),className:"text-sm text-purple-600 hover:underline",children:u?"Hide Hint":"Show Hint"})]}),u&&e.jsxs("div",{className:"text-sm text-gray-800 dark:text-gray-600 bg-white p-2 rounded border",children:[e.jsx("p",{className:"mb-1",children:"Element-wise multiply and sum:"}),e.jsxs("div",{className:"flex flex-wrap gap-1 font-mono text-xs",children:[A(o.row,o.col).products.map((t,r)=>e.jsxs("span",{className:"bg-gray-100 px-1 rounded",children:[t,r<8?" +":""]},r)),e.jsxs("span",{className:"font-bold",children:["= ",A(o.row,o.col).sum]})]})]}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("button",{onClick:()=>P(o.row,o.col),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm",children:"Check Cell"}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Check All"})]})]}),m&&e.jsxs("div",{className:"p-4 bg-green-100 rounded-lg border border-green-300 text-center mb-4",children:[e.jsx("p",{className:"text-green-700 font-bold text-lg mb-2",children:"ðŸŽ‰ Excellent!"}),e.jsx("p",{className:"text-green-600 mb-3",children:"You correctly computed the 2D convolution!"}),e.jsx("button",{onClick:C,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Try Another Problem"})]}),!m&&e.jsx("button",{onClick:C,className:"w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Skip / New Problem"}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-gray-700",children:e.jsx("strong",{children:"Common Kernels:"})}),e.jsxs("ul",{className:"text-xs text-gray-800 dark:text-gray-600 mt-1 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Edge Detection:"})," Highlights boundaries (positive on one side, negative on other)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Sharpen:"})," Enhances edges while keeping center (large positive center, negative surroundings)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Blur:"})," Averages neighboring pixels (all same values)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Identity:"})," Keeps image unchanged (1 in center, 0 elsewhere)"]})]})]})]})}export{D as default};
