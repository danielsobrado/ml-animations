import{r,j as e,x,L as h}from"./index-CsxpOLHd.js";import{g as u}from"./index-C8pce-KX.js";import{R as g}from"./rotate-ccw-xVnQluc9.js";import{C as p}from"./chevron-left-qHzaZS-I.js";import{P as b}from"./pause-BMcOX1vk.js";import{P as j}from"./play-CIyTSByC.js";const a=[{id:"input",title:"1. Input Reception",description:"The model receives an image and a text prompt simultaneously",visual:"input",details:'Image: 224Ã—224 pixels | Text: "What animal is in this image?"'},{id:"vision-encode",title:"2. Vision Encoding",description:"The Vision Transformer (ViT) splits the image into patches and encodes them",visual:"vision",details:"16Ã—16 patches â†’ 196 patch embeddings of 768 dimensions each"},{id:"text-encode",title:"3. Text Tokenization",description:"Text is tokenized into subword tokens and embedded",visual:"text",details:'"What animal is in this image?" â†’ 8 tokens â†’ 8 embeddings'},{id:"projection",title:"4. Modality Projection",description:"Visual tokens are projected into the same space as text tokens",visual:"projection",details:"Linear projection: 768-dim â†’ LLM embedding dimension"},{id:"combine",title:"5. Sequence Combination",description:"Visual and text tokens are concatenated into a single sequence",visual:"combine",details:"[IMG_1, IMG_2, ..., IMG_196, What, animal, is, in, this, image, ?]"},{id:"attention",title:"6. Cross-Modal Attention",description:"The LLM processes the sequence, allowing text to attend to visual features",visual:"attention",details:'Self-attention lets "animal" attend to visual patches containing the cat'},{id:"generate",title:"7. Response Generation",description:"The model generates tokens autoregressively based on the multimodal context",visual:"generate",details:'Output: "This image shows a cat sitting on a windowsill."'}];function T(){const[i,n]=r.useState(0),[l,o]=r.useState(!1),c=r.useRef(null);r.useEffect(()=>{if(!l)return;const s=setInterval(()=>{n(t=>t>=a.length-1?(o(!1),t):t+1)},3e3);return()=>clearInterval(s)},[l]),r.useEffect(()=>{c.current&&u.fromTo(c.current,{opacity:0,y:20},{opacity:1,y:0,duration:.5})},[i]);const d=a[i],m=()=>{switch(d.visual){case"input":return e.jsxs("div",{className:"flex items-center justify-center gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-32 h-32 bg-green-100 rounded-lg border-2 border-green-400 flex items-center justify-center text-5xl shadow-lg",children:"ðŸ±"}),e.jsx("div",{className:"mt-2 text-sm text-green-700 font-medium",children:"Image Input"})]}),e.jsx("div",{className:"text-3xl text-slate-300",children:"+"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-100 rounded-lg border-2 border-blue-400 p-4 shadow-lg",children:e.jsx("div",{className:"text-blue-800 font-medium",children:'"What animal is in this image?"'})}),e.jsx("div",{className:"mt-2 text-sm text-blue-700 font-medium",children:"Text Input"})]})]});case"vision":return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-grid grid-cols-4 gap-1 p-4 bg-green-50 rounded-lg border border-green-200",children:Array(16).fill(0).map((s,t)=>e.jsxs("div",{className:"w-12 h-12 bg-green-200 rounded flex items-center justify-center text-green-700 font-mono text-xs border border-green-300",style:{animationDelay:`${t*50}ms`},children:["P",t+1]},t))}),e.jsx("div",{className:"mt-3 text-sm text-green-700",children:"Image split into 16 patches â†’ encoded by ViT"})]});case"text":return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:["What","animal","is","in","this","image","?"].map((s,t)=>e.jsx("div",{className:"px-3 py-2 bg-blue-200 rounded-lg border border-blue-400 font-mono text-blue-800",children:s},t))}),e.jsx("div",{className:"mt-3 text-sm text-blue-700",children:"Text tokenized into subwords"})]});case"projection":return e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-green-100 rounded-lg p-3 border border-green-300",children:[e.jsx("div",{className:"font-mono text-xs text-green-700",children:"[0.23, -0.45, ...]"}),e.jsx("div",{className:"text-sm text-green-600 mt-1",children:"Visual Embedding"})]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-2xl",children:"â†’"}),e.jsx("div",{className:"bg-purple-100 rounded px-2 py-1 text-xs text-purple-700",children:"Linear Proj"}),e.jsx("div",{className:"text-2xl",children:"â†’"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-purple-100 rounded-lg p-3 border border-purple-300",children:[e.jsx("div",{className:"font-mono text-xs text-purple-700",children:"[0.12, 0.89, ...]"}),e.jsx("div",{className:"text-sm text-purple-600 mt-1",children:"LLM Space"})]})})]});case"combine":return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex justify-center gap-1 flex-wrap max-w-lg mx-auto",children:[Array(8).fill(0).map((s,t)=>e.jsxs("div",{className:"w-8 h-8 bg-green-400 rounded text-xs text-white flex items-center justify-center",children:["V",t+1]},`v${t}`)),e.jsx("div",{className:"w-2"}),["What","animal","is","in","this","image","?"].map((s,t)=>e.jsx("div",{className:"h-8 px-2 bg-blue-400 rounded text-xs text-white flex items-center justify-center",children:s},`t${t}`))]}),e.jsx("div",{className:"mt-3 text-sm text-purple-700",children:"Combined sequence of 15 tokens"})]});case"attention":return e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-block bg-slate-50 p-4 rounded-lg",children:[e.jsx("div",{className:"flex justify-center gap-2 mb-4",children:["V1","V2","V3","animal","?"].map((s,t)=>e.jsx("div",{className:`w-12 h-12 rounded flex items-center justify-center text-xs ${s.startsWith("V")?"bg-green-200":"bg-blue-200"}`,children:s},t))}),e.jsxs("svg",{className:"w-full h-16",viewBox:"0 0 260 60",children:[e.jsx("defs",{children:e.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"10",refY:"3.5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#8b5cf6"})})}),e.jsx("path",{d:"M130,10 Q70,40 30,50",stroke:"#8b5cf6",strokeWidth:"2",fill:"none",strokeDasharray:"4",markerEnd:"url(#arrowhead)"}),e.jsx("path",{d:"M130,10 Q100,35 70,50",stroke:"#8b5cf6",strokeWidth:"2",fill:"none",strokeDasharray:"4",markerEnd:"url(#arrowhead)"}),e.jsx("path",{d:"M130,10 Q130,35 130,50",stroke:"#8b5cf6",strokeWidth:"2",fill:"none",strokeDasharray:"4",markerEnd:"url(#arrowhead)"})]}),e.jsx("div",{className:"text-sm text-purple-700",children:'"animal" attends to visual patches containing ðŸ±'})]})});case"generate":return e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-amber-50 rounded-lg p-6 border-2 border-amber-300 inline-block",children:[e.jsx("div",{className:"text-lg font-medium text-amber-800 mb-2",children:"Generated Response:"}),e.jsxs("div",{className:"text-xl text-amber-900 font-serif",children:['"This image shows a ',e.jsx("strong",{children:"cat"}),' sitting on a windowsill."']})]}),e.jsx("div",{className:"mt-3 flex justify-center gap-2",children:["This","image","shows","a","cat","..."].map((s,t)=>e.jsx("div",{className:"px-2 py-1 bg-amber-200 rounded text-xs text-amber-800",style:{opacity:1-t*.1},children:s},t))})]});default:return null}};return e.jsx("div",{className:"p-8 h-full",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-indigo-900 mb-2",children:"Data Flow Animation"}),e.jsx("p",{className:"text-slate-600",children:"Watch how data flows through a multimodal LLM step by step"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between mb-2",children:a.map((s,t)=>e.jsx("button",{onClick:()=>n(t),className:`w-8 h-8 rounded-full font-bold text-sm transition-all ${t===i?"bg-indigo-600 text-white scale-125":t<i?"bg-indigo-200 text-indigo-700":"bg-slate-200 text-slate-500"}`,children:t+1},s.id))}),e.jsx("div",{className:"h-2 bg-slate-200 rounded-full",children:e.jsx("div",{className:"h-full bg-indigo-600 rounded-full transition-all duration-300",style:{width:`${i/(a.length-1)*100}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>n(0),className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200",children:e.jsx(g,{size:20})}),e.jsx("button",{onClick:()=>n(Math.max(0,i-1)),disabled:i===0,className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200 disabled:opacity-50",children:e.jsx(p,{size:20})}),e.jsx("button",{onClick:()=>o(!l),className:`px-6 py-2 rounded-lg font-bold ${l?"bg-red-500 text-white":"bg-indigo-600 text-white"}`,children:l?e.jsx(b,{size:20}):e.jsx(j,{size:20})}),e.jsx("button",{onClick:()=>n(Math.min(a.length-1,i+1)),disabled:i===a.length-1,className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200 disabled:opacity-50",children:e.jsx(x,{size:20})})]}),e.jsxs("div",{className:"bg-indigo-50 rounded-xl p-4 mb-6 border border-indigo-200",children:[e.jsx("h3",{className:"font-bold text-indigo-900 text-xl",children:d.title}),e.jsx("p",{className:"text-indigo-800 mt-1",children:d.description}),e.jsx("p",{className:"text-sm text-indigo-600 mt-2 font-mono",children:d.details})]}),e.jsx("div",{ref:c,className:"bg-white rounded-xl p-8 border min-h-[200px] flex items-center justify-center",children:m()}),e.jsx("div",{className:"mt-6 bg-amber-50 p-4 rounded-xl border border-amber-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(h,{className:"text-amber-600 flex-shrink-0 mt-1",size:20}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-900 mb-1",children:"Key Concept"}),e.jsxs("p",{className:"text-amber-800 text-sm",children:["The magic happens at the ",e.jsx("strong",{children:"attention layer"}),' - text tokens can "look at" relevant visual patches. When processing "animal", the model attends strongly to the patches containing the cat, enabling accurate visual understanding.']})]})]})})]})})}export{T as default};
