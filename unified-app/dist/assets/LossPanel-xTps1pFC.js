import{r as m,j as e}from"./index-CsxpOLHd.js";import{R as j}from"./CategoricalChart-DwESr9Pa.js";import{B as b,a as h}from"./BarChart-C8wp1IMO.js";import{C as g,X as N,Y as w}from"./CartesianChart-XX896M35.js";import{T as v}from"./Tooltip-BOms9-Qc.js";import"./with-selector-BmRVIYUQ.js";import"./tooltipContext-CdogrbYn.js";import"./ActiveShapeUtils-DqppQJJ3.js";import"./Sector-lmKnJuZM.js";import"./Symbols-BmE2jprK.js";import"./ErrorBarContext-Dbj6aYe0.js";import"./useElementOffset-CVHfGa0I.js";function R(){const[o]=m.useState([0,1,0]),[l,p]=m.useState([.33,.33,.34]),u=(t,r)=>{const s=[...l];s[t]=parseFloat(r);const c=s.reduce((n,a,f)=>f===t?n:n+a,0),x=1-s[t];c===0?s.forEach((n,a)=>{a!==t&&(s[a]=x/(s.length-1))}):s.forEach((n,a)=>{a!==t&&(s[a]=n*(x/c))}),p(s)},i=o.reduce((t,r,s)=>r===0?t:t-r*Math.log2(l[s]||1e-10),0),d=[{name:"Dog",p:o[0],q:l[0]},{name:"Cat",p:o[1],q:l[1]},{name:"Bird",p:o[2],q:l[2]}];return e.jsxs("div",{className:"p-8 h-full flex flex-col items-center overflow-y-auto",children:[e.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-orange-400 mb-4",children:"Cross-Entropy Loss"}),e.jsxs("p",{className:"text-lg text-slate-300 leading-relaxed",children:['How much "surprise" is there when we use our model Q to predict the true labels P?',e.jsx("br",{}),e.jsx("strong",{children:"Goal:"})," Minimize Cross-Entropy by making Q match P."]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 w-full max-w-5xl items-start",children:[e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[e.jsx("h3",{className:"font-bold text-white mb-6",children:"Model Prediction (Q)"}),e.jsx("div",{className:"space-y-6",children:l.map((t,r)=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-1",children:[e.jsxs("label",{className:"text-sm text-slate-400",children:["P(",d[r].name,") ",o[r]===1&&e.jsx("span",{className:"text-green-400 font-bold",children:"(TRUE LABEL)"})]}),e.jsxs("span",{className:"font-mono font-bold text-orange-400",children:[(t*100).toFixed(0),"%"]})]}),e.jsx("input",{type:"range",min:"0.01",max:"0.99",step:"0.01",value:t,onChange:s=>u(r,s.target.value),className:"w-full accent-orange-400"})]},r))}),e.jsxs("div",{className:"mt-8 p-4 bg-slate-900 rounded-lg text-sm text-slate-300",children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Formula:"})," H(P, Q) = - Î£ P(x) log Q(x)"]}),e.jsx("p",{children:'Since the True Label is "Cat" (P=1), the loss depends ONLY on your confidence in "Cat".'})]})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 flex flex-col items-center",children:[e.jsx("h3",{className:"font-bold text-white mb-4",children:"True (Green) vs Predicted (Orange)"}),e.jsx("div",{className:"w-full h-64 mb-6",children:e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(b,{data:d,children:[e.jsx(g,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(N,{dataKey:"name",stroke:"#94a3b8"}),e.jsx(w,{domain:[0,1],stroke:"#94a3b8"}),e.jsx(v,{cursor:{fill:"#334155"},contentStyle:{backgroundColor:"#1e293b",border:"none"}}),e.jsx(h,{dataKey:"p",name:"True (P)",fill:"#22c55e",radius:[4,4,0,0]}),e.jsx(h,{dataKey:"q",name:"Predicted (Q)",fill:"#fb923c",radius:[4,4,0,0]})]})})}),e.jsxs("div",{className:"w-full bg-slate-900 p-6 rounded-xl border border-orange-500/30 text-center",children:[e.jsx("div",{className:"text-sm text-slate-400 uppercase tracking-wider mb-2",children:"Cross-Entropy Loss"}),e.jsxs("div",{className:`text-5xl font-mono font-bold mb-2 transition-colors ${i<.1?"text-green-400":"text-red-400"}`,children:[i.toFixed(3)," ",e.jsx("span",{className:"text-lg text-slate-500",children:"bits"})]}),e.jsx("div",{className:"text-xs text-slate-500",children:"Lower is Better. 0 is Perfect."})]})]})]})]})}export{R as default};
