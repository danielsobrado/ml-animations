import{r as m,j as t}from"./index-BmgLEcVh.js";import{R as p}from"./CategoricalChart-B3gtutcW.js";import{S as f,a as b}from"./ScatterChart-CMyvbkPq.js";import{C as g,X as j,Y as y}from"./CartesianChart-JiyIF1-F.js";import{R as v}from"./ReferenceLine-CFaclrr-.js";import"./Sector-CA3PXCa0.js";import"./tooltipContext-C7z7tGNX.js";import"./Symbols-DCSkJhyu.js";import"./ActiveShapeUtils-B4dTBMil.js";import"./ErrorBarContext-BI9_YV4U.js";function P(){const[r,x]=m.useState([]),d=m.useRef(null),s=(()=>{if(r.length<2)return null;const n=r.length;let e=0,l=0,a=0,i=0;r.forEach(o=>{e+=o.x,l+=o.y,a+=o.x*o.y,i+=o.x*o.x});const c=(n*a-e*l)/(n*i-e*e),u=(l-c*e)/n;return{slope:c,intercept:u}})(),h=n=>{if(!d.current)return;const e=d.current.getBoundingClientRect(),l=(n.clientX-e.left)/e.width,a=1-(n.clientY-e.top)/e.height,i=l*10,c=a*10;x([...r,{x:i,y:c}])};return t.jsxs("div",{className:"p-8 h-full flex flex-col items-center",children:[t.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-indigo-900 mb-4",children:"Interactive Fitter"}),t.jsxs("p",{className:"text-lg text-slate-700 leading-relaxed",children:["Click anywhere to add data points.",t.jsx("br",{}),"The ",t.jsx("strong",{children:"Least Squares Line"})," updates instantly. Watch how outliers pull the line!"]})]}),t.jsxs("div",{className:"w-full max-w-4xl h-[500px] bg-white rounded-xl shadow-lg border border-slate-200 p-4 relative cursor-crosshair",children:[t.jsx("div",{ref:d,className:"absolute inset-0 z-10",onClick:h}),t.jsx(p,{width:"100%",height:"100%",children:t.jsxs(f,{margin:{top:20,right:20,bottom:20,left:20},children:[t.jsx(g,{strokeDasharray:"3 3"}),t.jsx(j,{dataKey:"x",type:"number",domain:[0,10]}),t.jsx(y,{dataKey:"y",type:"number",domain:[0,10]}),s&&t.jsx(v,{segment:[{x:0,y:s.intercept},{x:10,y:s.slope*10+s.intercept}],stroke:"#4f46e5",strokeWidth:4}),t.jsx(b,{data:r,fill:"#ef4444"})]})}),t.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 p-4 rounded-lg shadow border border-slate-200 pointer-events-none z-20",children:[t.jsx("h4",{className:"font-bold text-slate-500 text-xs uppercase mb-2",children:"Equation"}),s?t.jsxs("div",{className:"font-mono text-lg font-bold text-indigo-700",children:["y = ",s.slope.toFixed(2),"x + ",s.intercept.toFixed(2)]}):t.jsx("div",{className:"text-slate-400 italic",children:"Add at least 2 points"}),t.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["n = ",r.length]})]}),t.jsx("button",{onClick:()=>x([]),className:"absolute bottom-4 right-4 px-4 py-2 bg-white text-red-600 border border-red-200 rounded-lg shadow-sm hover:bg-red-50 font-bold text-sm z-20",children:"Clear All"})]})]})}export{P as default};
