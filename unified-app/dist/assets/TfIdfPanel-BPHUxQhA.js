import{r as g,j as e}from"./index-BmgLEcVh.js";import{P as w}from"./pause-Pw5n6zyp.js";import{P as I}from"./play-4PCPORJF.js";import{R as T}from"./rotate-ccw-DnC3UZWM.js";function $(){const[c,b]=g.useState(0),[p,u]=g.useState(!1),[o,N]=g.useState(0),[z,C]=g.useState("cat"),d=["The cat sat on the mat","The dog chased the cat","The cat and the dog played"],f=[{title:"Document Corpus",description:"Start with a collection of documents"},{title:"Term Frequency (TF)",description:"Count word occurrences in each document, normalized by doc length"},{title:"Document Frequency (DF)",description:"Count how many documents contain each word"},{title:"Inverse Document Frequency (IDF)",description:"Calculate IDF = log(N / DF) to penalize common words"},{title:"TF-IDF Score",description:"Multiply TF Ã— IDF to get final weights"}],a=(()=>{const s=d.length,t=d.map(l=>l.toLowerCase().replace(/[^a-z\s]/g,"").split(/\s+/).filter(n=>n)),r=t.flat(),i=[...new Set(r)].sort(),v=t.map(l=>{const n={};l.forEach(h=>n[h]=(n[h]||0)+1);const x={};return i.forEach(h=>{x[h]=(n[h]||0)/l.length}),x}),y={};i.forEach(l=>{y[l]=t.filter(n=>n.includes(l)).length});const j={};i.forEach(l=>{j[l]=Math.log(s/y[l])});const D=v.map(l=>{const n={};return i.forEach(x=>{n[x]=l[x]*j[x]}),n});return{tokenized:t,vocab:i,tf:v,df:y,idf:j,tfidf:D,N:s}})();g.useEffect(()=>{if(p){const s=setInterval(()=>{b(t=>t>=f.length-1?(u(!1),t):t+1)},3e3);return()=>clearInterval(s)}},[p]);const F=()=>{b(0),u(!1)},m=s=>s.toFixed(3);return e.jsxs("div",{className:"space-y-6 pb-20",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[e.jsx("span",{className:"text-yellow-400",children:"TF-IDF"}),": Term Frequency Ã— Inverse Document Frequency"]}),e.jsx("p",{className:"text-gray-400",children:"Weight words by importance: frequent in document, rare across corpus"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[e.jsxs("button",{onClick:()=>u(!p),className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded-lg transition-colors",children:[p?e.jsx(w,{size:18}):e.jsx(I,{size:18}),p?"Pause":"Play Animation"]}),e.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:[e.jsx(T,{size:18}),"Reset"]})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:f.map((s,t)=>e.jsxs("button",{onClick:()=>{b(t),u(!1)},className:`px-3 py-1 rounded-full text-sm transition-all ${t===c?"bg-yellow-500 text-black scale-110":t<c?"bg-yellow-900 text-yellow-300":"bg-white/10 text-gray-500"}`,children:[t+1,". ",s.title]},t))}),e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-bold text-yellow-400",children:["Step ",c+1,": ",f[c].title]}),e.jsx("p",{className:"text-gray-300 mt-1",children:f[c].description})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[c===0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-bold text-gray-300",children:["Document Corpus (N = ",a.N,")"]}),d.map((s,t)=>e.jsxs("div",{className:"bg-blue-900/30 rounded-lg p-4 border border-blue-500/30 animate-fadeIn",style:{animationDelay:`${t*200}ms`},children:[e.jsxs("span",{className:"text-blue-400 font-mono text-sm",children:["Doc ",t+1,":"]}),e.jsxs("p",{className:"text-white mt-1",children:['"',s,'"']})]},t))]}),c===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-300",children:"Term Frequency (TF)"}),e.jsx("select",{value:o,onChange:s=>N(parseInt(s.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-3 py-1",children:d.map((s,t)=>e.jsxs("option",{value:t,children:["Document ",t+1]},t))})]}),e.jsxs("div",{className:"bg-blue-900/20 rounded-lg p-3 mb-4",children:[e.jsx("p",{className:"text-sm text-blue-400",children:"Formula: TF(t, d) = count(t in d) / |d|"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Word count divided by total words in document"})]}),e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:['"',d[o],'"']}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:a.vocab.map((s,t)=>{const r=a.tf[o][s];return e.jsxs("div",{className:`rounded-lg p-3 text-center animate-fadeIn ${r>0?"bg-green-900/30 border border-green-500/30":"bg-gray-800/30"}`,style:{animationDelay:`${t*50}ms`},children:[e.jsx("p",{className:"font-mono text-sm",children:s}),e.jsx("p",{className:`text-xl font-bold ${r>0?"text-green-400":"text-gray-500"}`,children:m(r)})]},t)})})]}),c===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-300",children:"Document Frequency (DF)"}),e.jsx("div",{className:"bg-purple-900/20 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-sm text-purple-400",children:"DF(t) = number of documents containing term t"})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:a.vocab.map((s,t)=>e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-3 text-center border border-purple-500/30 animate-fadeIn",style:{animationDelay:`${t*50}ms`},children:[e.jsx("p",{className:"font-mono text-sm",children:s}),e.jsxs("p",{className:"text-xl font-bold text-purple-400",children:[a.df[s]," / ",a.N]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["in ",a.df[s]," doc",a.df[s]>1?"s":""]})]},t))})]}),c===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-300",children:"Inverse Document Frequency (IDF)"}),e.jsxs("div",{className:"bg-orange-900/20 rounded-lg p-3 mb-4",children:[e.jsx("p",{className:"text-sm text-orange-400",children:"IDF(t) = log(N / DF(t))"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Rare words â†’ high IDF, Common words â†’ low IDF"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:a.vocab.map((s,t)=>{const r=a.idf[s];return e.jsxs("div",{className:"bg-orange-900/30 rounded-lg p-3 text-center border border-orange-500/30 animate-fadeIn",style:{animationDelay:`${t*50}ms`},children:[e.jsx("p",{className:"font-mono text-sm",children:s}),e.jsx("p",{className:`text-xl font-bold ${r>.5?"text-orange-400":"text-gray-400"}`,children:m(r)}),e.jsxs("p",{className:"text-xs text-gray-500",children:["log(",a.N,"/",a.df[s],")"]})]},t)})}),e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 mt-4",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Notice:"}),e.jsxs("ul",{className:"text-sm space-y-1",children:[e.jsx("li",{className:"text-red-400",children:'â€¢ "the" appears in all docs â†’ IDF = 0 (least important)'}),e.jsxs("li",{className:"text-green-400",children:["â€¢ Unique words â†’ IDF ",">"," 0 (more important)"]})]})]})]}),c===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-300",children:"TF-IDF Scores"}),e.jsx("select",{value:o,onChange:s=>N(parseInt(s.target.value)),className:"bg-gray-700 border border-gray-600 rounded px-3 py-1",children:d.map((s,t)=>e.jsxs("option",{value:t,children:["Document ",t+1]},t))})]}),e.jsxs("div",{className:"bg-yellow-900/20 rounded-lg p-3 mb-4",children:[e.jsx("p",{className:"text-sm text-yellow-400",children:"TF-IDF(t, d) = TF(t, d) Ã— IDF(t)"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"High score = word is important to this specific document"})]}),e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:['"',d[o],'"']}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:a.vocab.map(s=>({word:s,score:a.tfidf[o][s]})).sort((s,t)=>t.score-s.score).map(({word:s,score:t},r)=>e.jsxs("div",{className:`rounded-lg p-3 text-center animate-fadeIn ${t>0?"bg-yellow-900/30 border border-yellow-500/30":"bg-gray-800/30 border border-gray-600/30"}`,style:{animationDelay:`${r*50}ms`},children:[e.jsx("p",{className:"font-mono text-sm",children:s}),e.jsx("p",{className:`text-xl font-bold ${t>0?"text-yellow-400":"text-gray-500"}`,children:m(t)}),t>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[m(a.tf[o][s])," Ã— ",m(a.idf[s])]})]},r))}),e.jsxs("div",{className:"mt-6 overflow-x-auto",children:[e.jsx("h5",{className:"text-sm text-gray-400 mb-2",children:"Complete TF-IDF Matrix:"}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1 text-left text-gray-400",children:"Doc"}),a.vocab.map((s,t)=>e.jsx("th",{className:"px-2 py-1 text-center text-yellow-400 font-mono",children:s},t))]})}),e.jsx("tbody",{children:d.map((s,t)=>e.jsxs("tr",{className:t===o?"bg-yellow-900/20":"",children:[e.jsxs("td",{className:"px-2 py-1 text-gray-400",children:["Doc ",t+1]}),a.vocab.map((r,i)=>e.jsx("td",{className:"px-2 py-1 text-center font-mono",children:e.jsx("span",{className:a.tfidf[t][r]>0?"text-green-400":"text-gray-600",children:m(a.tfidf[t][r])})},i))]},t))})]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/20 to-orange-900/20 rounded-xl p-6 border border-yellow-500/30",children:[e.jsx("h4",{className:"font-bold text-yellow-400 mb-4",children:"ðŸ“ TF-IDF Formulas"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("h5",{className:"text-green-400 font-medium mb-2",children:"Term Frequency"}),e.jsx("div",{className:"bg-black/50 rounded p-2 font-mono text-sm text-center",children:"TF(t,d) = count(t,d) / |d|"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Normalized word count in document"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("h5",{className:"text-purple-400 font-medium mb-2",children:"Inverse Doc Frequency"}),e.jsx("div",{className:"bg-black/50 rounded p-2 font-mono text-sm text-center",children:"IDF(t) = log(N / DF(t))"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Penalizes common words"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("h5",{className:"text-yellow-400 font-medium mb-2",children:"TF-IDF"}),e.jsx("div",{className:"bg-black/50 rounded p-2 font-mono text-sm text-center",children:"TF-IDF = TF Ã— IDF"}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Final importance weight"})]})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"ðŸ Python with scikit-learn:"}),e.jsx("pre",{className:"text-sm overflow-x-auto",children:e.jsx("code",{className:"text-yellow-300",children:`from sklearn.feature_extraction.text import TfidfVectorizer

# Create TF-IDF vectorizer
vectorizer = TfidfVectorizer()

# Example documents
documents = [
    "The cat sat on the mat",
    "The dog chased the cat",
    "The cat and the dog played"
]

# Fit and transform
tfidf_matrix = vectorizer.fit_transform(documents)

# Get feature names
print("Vocabulary:", vectorizer.get_feature_names_out())

# Get TF-IDF scores for first document
print("\\nDoc 1 TF-IDF scores:")
for word, score in zip(vectorizer.get_feature_names_out(), tfidf_matrix[0].toarray()[0]):
    if score > 0:
        print(f"  {word}: {score:.4f}")

# Calculate cosine similarity between documents
from sklearn.metrics.pairwise import cosine_similarity
similarity = cosine_similarity(tfidf_matrix)
print("\\nDocument Similarity Matrix:")
print(similarity)`})})]})]})}export{$ as default};
