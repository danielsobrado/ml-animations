import{c as A,r as h,j as e,F as I,y,b as k,e as w,Z as E,I as O,m as _,g as W,f as M,B as q,W as U}from"./index-quAWpIA7.js";import{I as z}from"./info-CH9TLaYi.js";import{P as H}from"./pause-Ch50eX2B.js";import{P as Q}from"./play-DgR7o5cW.js";import{C as Z}from"./clock-0PPAHBZf.js";import{C as Y}from"./code-BC671jUr.js";import{C as K}from"./check-circle-CZEU1TAG.js";import{X as J}from"./x-circle-D3t0USxl.js";import{T as ee}from"./trophy-CmCS_W-S.js";import{G as te}from"./graduation-cap-B7np-4AT.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=A("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=A("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function R(){const[a,c]=h.useState(null),[d,n]=h.useState("training"),s={prompt:{title:"Text Prompt",description:"User input describing the desired image. This drives the entire generation process.",color:"from-blue-500 to-cyan-500",details:["Natural language","Descriptive text","Style instructions"]},clip:{title:"CLIP Text Encoder",description:"Encodes text into embeddings that understand image-text relationships.",color:"from-green-500 to-emerald-500",details:["77 tokens max","768/1024 dim","Pooled output"]},t5:{title:"T5 Text Encoder",description:"Provides rich, detailed text understanding with longer context.",color:"from-teal-500 to-cyan-500",details:["512 tokens","4096 dim","Better semantics"]},vae_enc:{title:"VAE Encoder",description:"Compresses input image to latent space (training only).",color:"from-purple-500 to-violet-500",details:["8x compression","Latent space","16 channels"]},mmdit:{title:"MMDiT (Transformer)",description:"The core diffusion model. Jointly attends to text and image tokens.",color:"from-fuchsia-500 to-pink-500",details:["Joint attention","AdaLN-Zero","38 layers"]},scheduler:{title:"Flow Matching Scheduler",description:"Controls the denoising process using flow-based sampling.",color:"from-orange-500 to-amber-500",details:["Euler/Heun","Logit-normal","28-50 steps"]},vae_dec:{title:"VAE Decoder",description:"Converts latent representation back to pixel space.",color:"from-rose-500 to-red-500",details:["Upsampling","Final image","1024x1024"]}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["SD3 Architecture: ",e.jsx("span",{className:"text-fuchsia-600 dark:text-fuchsia-400",children:"The Complete System"})]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400",children:"How text becomes images through diffusion"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-xl p-4 text-center border border-white/10",children:[e.jsx("p",{className:"text-3xl font-bold text-fuchsia-600 dark:text-fuchsia-400",children:"8B"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Parameters (largest)"})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-4 text-center border border-white/10",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:"3"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Text Encoders"})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-4 text-center border border-white/10",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:"1024Â²"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Max Resolution"})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-4 text-center border border-white/10",children:[e.jsx("p",{className:"text-3xl font-bold text-green-400",children:"28-50"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Typical Steps"})]})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>n("training"),className:`px-6 py-2 rounded-lg transition-all ${d==="training"?"bg-fuchsia-600":"bg-white/10 hover:bg-white/20"}`,children:"Training Flow"}),e.jsx("button",{onClick:()=>n("inference"),className:`px-6 py-2 rounded-lg transition-all ${d==="inference"?"bg-fuchsia-600":"bg-white/10 hover:bg-white/20"}`,children:"Inference Flow"})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-8 border border-white/10",children:[d==="inference"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap",children:[e.jsx(b,{id:"prompt",data:s.prompt,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(I,{size:20})}),e.jsx(y,{className:"text-gray-700 dark:text-gray-500"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(b,{id:"clip",data:s.clip,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(k,{size:20}),small:!0}),e.jsx(b,{id:"t5",data:s.t5,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(k,{size:20}),small:!0})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-8 w-px bg-gradient-to-b from-green-500 to-fuchsia-500"})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gray-700 flex items-center justify-center mb-2",children:e.jsx("p",{className:"text-2xl",children:"ðŸŽ²"})}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"Random Noise"})]}),e.jsx(y,{className:"text-gray-700 dark:text-gray-500"}),e.jsx(b,{id:"mmdit",data:s.mmdit,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(w,{size:20}),large:!0}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"text-gray-700 dark:text-gray-500"}),e.jsx(b,{id:"scheduler",data:s.scheduler,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(E,{size:20})})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"bg-fuchsia-500/20 border border-fuchsia-500/50 rounded-lg px-4 py-2 text-sm",children:"â†» Repeat for N steps (velocity â†’ denoise â†’ repeat)"})}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg bg-purple-600/30 flex items-center justify-center mb-2 border border-purple-500/50",children:e.jsx("p",{className:"text-xs",children:"Latent"})}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"128Ã—128Ã—16"})]}),e.jsx(y,{className:"text-gray-700 dark:text-gray-500"}),e.jsx(b,{id:"vae_dec",data:s.vae_dec,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(O,{size:20})}),e.jsx(y,{className:"text-gray-700 dark:text-gray-500"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg bg-gradient-to-br from-rose-500/30 to-orange-500/30 flex items-center justify-center mb-2 border border-rose-500/50",children:e.jsx("p",{className:"text-2xl",children:"ðŸ–¼ï¸"})}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"1024Ã—1024 RGB"})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[e.jsx(b,{id:"prompt",data:s.prompt,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(I,{size:20})}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-500",children:"Caption"})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gradient-to-br from-rose-500/30 to-orange-500/30 flex items-center justify-center border border-rose-500/50",children:e.jsx("p",{className:"text-2xl",children:"ðŸ–¼ï¸"})}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-500",children:"Target Image"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(b,{id:"clip",data:s.clip,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(k,{size:20}),small:!0}),e.jsx(b,{id:"t5",data:s.t5,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(k,{size:20}),small:!0})]}),e.jsx(b,{id:"vae_enc",data:s.vae_enc,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(w,{size:20})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"Text Embeddings"})}),e.jsx("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"xâ‚ (clean latent)"})}),e.jsx("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"xâ‚€ ~ N(0,I)"})})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"h-8 w-px bg-gradient-to-b from-purple-500 to-fuchsia-500"})}),e.jsx("div",{className:"flex items-center justify-center gap-4",children:e.jsx(b,{id:"mmdit",data:s.mmdit,hoveredComponent:a,setHoveredComponent:c,icon:e.jsx(w,{size:20}),large:!0})}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-gradient-to-r from-fuchsia-500/20 to-purple-500/20 border border-fuchsia-500/50 rounded-lg px-6 py-3",children:[e.jsx("p",{className:"font-mono text-center",children:"Loss = ||v_Î¸(x_t, t, c) - (xâ‚ - xâ‚€)||Â²"}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-center mt-1",children:"Predict velocity from noisy input conditioned on text"})]})})]}),a&&e.jsx("div",{className:"mt-6 p-4 bg-white/5 rounded-xl border border-white/10",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(z,{className:"text-fuchsia-600 dark:text-fuchsia-400 mt-1",size:20}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:s[a].title}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mt-1",children:s[a].description}),e.jsx("div",{className:"flex gap-2 mt-3 flex-wrap",children:s[a].details.map((g,i)=>e.jsx("span",{className:"bg-white/10 px-2 py-1 rounded text-sm",children:g},i))})]})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-fuchsia-900/30 to-fuchsia-800/20 rounded-xl p-5 border border-fuchsia-500/30",children:[e.jsxs("h3",{className:"font-bold text-fuchsia-300 mb-2 flex items-center gap-2",children:[e.jsx(E,{size:18})," Multi-Modal DiT (MMDiT)"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Unlike U-Net based models, SD3 uses a Transformer that jointly processes image and text tokens with bidirectional attention."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/20 rounded-xl p-5 border border-purple-500/30",children:[e.jsxs("h3",{className:"font-bold text-purple-300 mb-2 flex items-center gap-2",children:[e.jsx(k,{size:18})," Triple Text Encoders"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"CLIP-L, CLIP-G, and T5-XXL provide complementary text understanding: visual-language alignment + rich semantic comprehension."})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-800/20 rounded-xl p-5 border border-blue-500/30",children:[e.jsxs("h3",{className:"font-bold text-blue-300 mb-2 flex items-center gap-2",children:[e.jsx(w,{size:18})," Flow Matching"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Replaces score-based diffusion with simpler flow-based training, enabling better noise schedules and faster sampling."})]})]})]})}function b({id:a,data:c,hoveredComponent:d,setHoveredComponent:n,icon:s,small:g,large:i}){const l=i?"w-32 h-32":g?"w-24 h-16":"w-28 h-20";return e.jsxs("div",{className:`${l} rounded-xl bg-gradient-to-br ${c.color} flex flex-col items-center justify-center cursor-pointer transition-all ${d===a?"scale-110 shadow-lg":"hover:scale-105"}`,onMouseEnter:()=>n(a),onMouseLeave:()=>n(null),children:[s,e.jsx("p",{className:`${g?"text-xs":"text-sm"} font-bold text-center mt-1`,children:c.title.split(" ")[0]})]})}function re(){const[a,c]=h.useState("clip-l"),d={"clip-l":{name:"CLIP-L/14",fullName:"CLIP Large (OpenAI)",params:"400M",dim:768,maxTokens:77,color:"from-green-500 to-emerald-500",role:"Visual-language alignment, style understanding",description:"Trained on 400M image-text pairs. Excels at understanding visual concepts and artistic styles."},"clip-g":{name:"CLIP-G/14",fullName:"CLIP Giant (OpenCLIP)",params:"1.8B",dim:1280,maxTokens:77,color:"from-blue-500 to-cyan-500",role:"Enhanced visual understanding, fine details",description:"Larger CLIP model with better detail understanding. Captures nuanced visual concepts."},"t5-xxl":{name:"T5-XXL",fullName:"Text-to-Text Transfer Transformer XXL",params:"4.7B",dim:4096,maxTokens:512,color:"from-purple-500 to-violet-500",role:"Deep text understanding, complex prompts",description:"Pure text model that understands language deeply. Handles complex, detailed prompts better."}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Text Encoding: ",e.jsx("span",{className:"text-fuchsia-600 dark:text-fuchsia-400",children:"Triple Encoder Power"})]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400",children:"How SD3 understands your prompts using three specialized encoders"})]}),e.jsx("div",{className:"bg-gradient-to-r from-fuchsia-900/30 to-purple-900/30 rounded-2xl p-6 border border-fuchsia-500/30",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(z,{className:"text-fuchsia-600 dark:text-fuchsia-400 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-fuchsia-300 mb-2",children:"Why Three Encoders?"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Each encoder brings unique strengths. ",e.jsx("strong",{className:"text-green-400",children:"CLIP models"})," understand how text relates to images (trained on image-text pairs). ",e.jsx("strong",{className:"text-purple-600 dark:text-purple-400",children:"T5"})," provides deep language understanding (trained on massive text corpora). Together, they give SD3 unparalleled prompt comprehension."]})]})]})}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:Object.entries(d).map(([n,s])=>e.jsxs("button",{onClick:()=>c(n),className:`p-4 rounded-xl border transition-all text-left ${a===n?"border-fuchsia-500 bg-fuchsia-500/20":"border-white/10 bg-black/30 hover:bg-white/5"}`,children:[e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-lg bg-gradient-to-r ${s.color} mb-3`,children:[e.jsx(k,{size:16}),e.jsx("span",{className:"font-bold text-sm",children:s.name})]}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:s.role})]},n))}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:`w-16 h-16 rounded-xl bg-gradient-to-br ${d[a].color} flex items-center justify-center`,children:e.jsx(k,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:d[a].fullName}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400",children:d[a].description})]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-fuchsia-600 dark:text-fuchsia-400",children:d[a].params}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Parameters"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:d[a].dim}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Embedding Dim"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:d[a].maxTokens}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Max Tokens"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-400",children:a.includes("clip")?"CLIP":"T2T"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Training Type"})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"How Embeddings Flow to MMDiT"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-white/10 rounded-lg px-4 py-3 mb-2",children:e.jsx("p",{className:"text-sm font-mono",children:'"a cat wearing sunglasses"'})}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"Input Prompt"})]}),e.jsx(y,{className:"text-gray-700 dark:text-gray-500 rotate-90 md:rotate-0"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-white/10 rounded-lg px-4 py-3 mb-2",children:e.jsx("div",{className:"flex gap-1 flex-wrap justify-center",children:["a","cat","wearing","sun","##glasses"].map((n,s)=>e.jsx("span",{className:"bg-fuchsia-500/30 px-2 py-1 rounded text-xs",children:n},s))})}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"Tokenized"})]}),e.jsx(y,{className:"text-gray-700 dark:text-gray-500 rotate-90 md:rotate-0"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-500/30 to-emerald-500/30 rounded-lg px-3 py-2 text-xs",children:"CLIP-L â†’ [77 Ã— 768]"}),e.jsx("div",{className:"bg-gradient-to-r from-blue-500/30 to-cyan-500/30 rounded-lg px-3 py-2 text-xs",children:"CLIP-G â†’ [77 Ã— 1280]"}),e.jsx("div",{className:"bg-gradient-to-r from-purple-500/30 to-violet-500/30 rounded-lg px-3 py-2 text-xs",children:"T5-XXL â†’ [512 Ã— 4096]"})]}),e.jsx(y,{className:"text-gray-700 dark:text-gray-500 rotate-90 md:rotate-0"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-gradient-to-r from-fuchsia-500/30 to-purple-500/30 rounded-lg px-4 py-3 mb-2",children:[e.jsx("p",{className:"text-sm font-mono",children:"Concatenated"}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"+ Pooled vectors"})]}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"â†’ MMDiT"})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"CLIP vs T5: Complementary Strengths"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/20",children:[e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-400",children:"Aspect"}),e.jsx("th",{className:"py-3 px-4 text-left text-green-400",children:"CLIP (L + G)"}),e.jsx("th",{className:"py-3 px-4 text-left text-purple-600 dark:text-purple-400",children:"T5-XXL"})]})}),e.jsxs("tbody",{className:"divide-y divide-white/10",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"Training"}),e.jsx("td",{className:"py-3 px-4",children:"Image-text pairs"}),e.jsx("td",{className:"py-3 px-4",children:"Text-only (C4 corpus)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"Strength"}),e.jsx("td",{className:"py-3 px-4",children:"Visual concepts, styles"}),e.jsx("td",{className:"py-3 px-4",children:"Language understanding"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"Understands"}),e.jsx("td",{className:"py-3 px-4",children:'"cyberpunk style", "oil painting"'}),e.jsx("td",{className:"py-3 px-4",children:'"the cat to the left of the dog"'})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"Context Length"}),e.jsx("td",{className:"py-3 px-4",children:"77 tokens"}),e.jsx("td",{className:"py-3 px-4",children:"512 tokens"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"Used For"}),e.jsx("td",{className:"py-3 px-4",children:"Cross-attention + pooled conditioning"}),e.jsx("td",{className:"py-3 px-4",children:"Cross-attention only"})]})]})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/20 rounded-xl p-5 border border-green-500/30",children:[e.jsx("h3",{className:"font-bold text-green-300 mb-2",children:"Pooled Embeddings (CLIP)"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3",children:"A single vector representing the whole prompt. Used for global conditioning through AdaLN layers in MMDiT."}),e.jsx("div",{className:"bg-black/30 rounded-lg p-3 font-mono text-xs",children:"pooled = CLIP.encode(text).pooler_output  # [1, 768]"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/20 rounded-xl p-5 border border-purple-500/30",children:[e.jsx("h3",{className:"font-bold text-purple-300 mb-2",children:"Sequence Embeddings (All)"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3",children:"Per-token embeddings preserving word-level info. Used for cross-attention between image and text tokens."}),e.jsx("div",{className:"bg-black/30 rounded-lg p-3 font-mono text-xs",children:"seq = T5.encode(text).last_hidden_state  # [1, N, 4096]"})]})]})]})}function le(){const[a,c]=h.useState(8),d=h.useRef(null);return h.useEffect(()=>{const n=d.current;if(!n)return;const s=n.getContext("2d"),g=n.width,i=n.height;s.clearRect(0,0,g,i);const l=150,r=50,p=(i-l)/2;s.fillStyle="rgba(236, 72, 153, 0.2)",s.fillRect(r,p,l,l),s.strokeStyle="rgba(236, 72, 153, 0.8)",s.lineWidth=2,s.strokeRect(r,p,l,l),s.strokeStyle="rgba(236, 72, 153, 0.3)",s.lineWidth=1;const N=l/8;for(let o=1;o<8;o++)s.beginPath(),s.moveTo(r+o*N,p),s.lineTo(r+o*N,p+l),s.stroke(),s.beginPath(),s.moveTo(r,p+o*N),s.lineTo(r+l,p+o*N),s.stroke();s.fillStyle="white",s.font="bold 14px sans-serif",s.fillText("Pixel Space",r+35,p-10),s.font="12px sans-serif",s.fillStyle="rgba(255, 255, 255, 0.6)",s.fillText("1024 Ã— 1024 Ã— 3",r+25,p+l+20),s.fillText("= 3.1M values",r+35,p+l+35),s.beginPath(),s.moveTo(r+l+30,i/2),s.lineTo(r+l+80,i/2),s.strokeStyle="rgba(139, 92, 246, 0.8)",s.lineWidth=2,s.stroke(),s.beginPath(),s.moveTo(r+l+80,i/2),s.lineTo(r+l+70,i/2-8),s.lineTo(r+l+70,i/2+8),s.closePath(),s.fillStyle="rgba(139, 92, 246, 0.8)",s.fill(),s.fillStyle="rgba(139, 92, 246, 0.3)",s.fillRect(r+l+90,i/2-40,80,80),s.strokeStyle="rgba(139, 92, 246, 0.8)",s.strokeRect(r+l+90,i/2-40,80,80),s.fillStyle="white",s.font="bold 12px sans-serif",s.fillText("VAE",r+l+115,i/2-5),s.fillText("Encoder",r+l+103,i/2+12),s.beginPath(),s.moveTo(r+l+180,i/2),s.lineTo(r+l+230,i/2),s.strokeStyle="rgba(139, 92, 246, 0.8)",s.lineWidth=2,s.stroke(),s.beginPath(),s.moveTo(r+l+230,i/2),s.lineTo(r+l+220,i/2-8),s.lineTo(r+l+220,i/2+8),s.closePath(),s.fill();const u=l/a*2,x=r+l+250,m=(i-u)/2;s.fillStyle="rgba(59, 130, 246, 0.2)",s.fillRect(x,m,u,u),s.strokeStyle="rgba(59, 130, 246, 0.8)",s.lineWidth=2,s.strokeRect(x,m,u,u),s.strokeStyle="rgba(59, 130, 246, 0.3)",s.lineWidth=1;const v=u/4;for(let o=1;o<4;o++)s.beginPath(),s.moveTo(x+o*v,m),s.lineTo(x+o*v,m+u),s.stroke(),s.beginPath(),s.moveTo(x,m+o*v),s.lineTo(x+u,m+o*v),s.stroke();s.fillStyle="white",s.font="bold 14px sans-serif",s.fillText("Latent Space",x-5,m-10),s.font="12px sans-serif",s.fillStyle="rgba(255, 255, 255, 0.6)";const f=1024/a;s.fillText(`${f} Ã— ${f} Ã— 16`,x-15,m+u+20);const j=(3.1/(f*f*16/1e6)).toFixed(0);s.fillText(`= ${(f*f*16/1e6).toFixed(2)}M (${j}Ã— smaller)`,x-30,m+u+35)},[a]),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Latent Space: ",e.jsx("span",{className:"text-fuchsia-600 dark:text-fuchsia-400",children:"Efficient Representation"})]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400",children:"Why SD3 operates in latent space, not pixel space"})]}),e.jsx("div",{className:"bg-gradient-to-r from-fuchsia-900/30 to-purple-900/30 rounded-2xl p-6 border border-fuchsia-500/30",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(z,{className:"text-fuchsia-600 dark:text-fuchsia-400 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-fuchsia-300 mb-2",children:"The Latent Trick"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["Diffusion in pixel space is computationally expensive (1024Ã—1024Ã—3 = 3.1M dimensions!). SD3 uses a pretrained ",e.jsx("strong",{className:"text-purple-600 dark:text-purple-400",children:"VAE"})," to compress images to a much smaller ",e.jsx("strong",{className:"text-blue-600 dark:text-blue-400",children:"latent space"}),", performs diffusion there, then decodes back to pixels. Same quality, ~64Ã— less compute!"]})]})]})}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("canvas",{ref:d,width:600,height:300,className:"w-full rounded-xl mb-4"}),e.jsxs("div",{className:"flex items-center gap-4 px-4",children:[e.jsx(ae,{className:"text-gray-800 dark:text-gray-400",size:20}),e.jsx("input",{type:"range",min:"4",max:"16",step:"4",value:a,onChange:n=>c(parseInt(n.target.value)),className:"flex-1 h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"}),e.jsx(se,{className:"text-gray-800 dark:text-gray-400",size:20}),e.jsxs("span",{className:"text-sm text-gray-800 dark:text-gray-400 w-24",children:[a,"Ã— compression"]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"â†“"})," VAE Encoder"]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Input:"})," RGB image [H, W, 3]"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Output:"})," Latent [H/8, W/8, 16]"]}),e.jsx("p",{children:e.jsx("strong",{children:"Process:"})}),e.jsxs("ol",{className:"list-decimal list-inside pl-4 space-y-1 text-gray-800 dark:text-gray-400",children:[e.jsx("li",{children:"Conv layers downsample spatially"}),e.jsx("li",{children:"ResNet blocks extract features"}),e.jsx("li",{children:"Attention layers capture global context"}),e.jsx("li",{children:"Final conv produces 16-channel latent"})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-rose-400",children:"â†‘"})," VAE Decoder"]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Input:"})," Latent [H/8, W/8, 16]"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Output:"})," RGB image [H, W, 3]"]}),e.jsx("p",{children:e.jsx("strong",{children:"Process:"})}),e.jsxs("ol",{className:"list-decimal list-inside pl-4 space-y-1 text-gray-800 dark:text-gray-400",children:[e.jsx("li",{children:"Initial conv expands channels"}),e.jsx("li",{children:"ResNet blocks process features"}),e.jsx("li",{children:"Upsampling layers increase resolution"}),e.jsx("li",{children:"Final conv produces RGB output"})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"SD3's 16-Channel VAE"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-fuchsia-600 dark:text-fuchsia-400",children:"16"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Latent Channels"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-500",children:"(vs 4 in SD1/2)"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:"8Ã—"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Spatial Compression"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-500",children:"1024px â†’ 128 tokens"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"0.13"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Scaling Factor"}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-500",children:"Normalizes latents"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-900/30 to-blue-900/30 rounded-xl p-4",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{className:"text-purple-300",children:"Why 16 channels?"})," More channels = more information preserved in latent space. SD3's VAE captures finer details than SD1/2's 4-channel VAE, leading to sharper, more detailed outputs. The trade-off is slightly larger latent tensors."]})})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Memory & Compute Savings"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/20",children:[e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-400",children:"Space"}),e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-400",children:"Resolution"}),e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-400",children:"Dimensions"}),e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-400",children:"Size (FP16)"}),e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-400",children:"Transformer Tokens"})]})}),e.jsxs("tbody",{className:"divide-y divide-white/10",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-rose-400",children:"Pixel"}),e.jsx("td",{className:"py-3 px-4",children:"1024Ã—1024"}),e.jsx("td",{className:"py-3 px-4",children:"1024 Ã— 1024 Ã— 3"}),e.jsx("td",{className:"py-3 px-4",children:"6.3 MB"}),e.jsx("td",{className:"py-3 px-4",children:"1,048,576 ðŸ˜±"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-blue-600 dark:text-blue-400",children:"Latent"}),e.jsx("td",{className:"py-3 px-4",children:"128Ã—128"}),e.jsx("td",{className:"py-3 px-4",children:"128 Ã— 128 Ã— 16"}),e.jsx("td",{className:"py-3 px-4",children:"0.5 MB"}),e.jsx("td",{className:"py-3 px-4",children:"16,384 âœ“"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-green-400",children:"Patched"}),e.jsx("td",{className:"py-3 px-4",children:"64Ã—64 patches"}),e.jsx("td",{className:"py-3 px-4",children:"64 Ã— 64 = 4096"}),e.jsx("td",{className:"py-3 px-4",children:"~32 MB (with dim)"}),e.jsx("td",{className:"py-3 px-4",children:"4,096 ðŸš€"})]})]})]})}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-500 mt-4",children:"SD3 patches the 128Ã—128 latent into 2Ã—2 patches, yielding 64Ã—64 = 4096 tokens for the transformer. This is manageable with modern attention mechanisms."})]})]})}function ie(){const[a,c]=h.useState(!1),[d,n]=h.useState(0),[s,g]=h.useState(28),i=h.useRef(null);return h.useEffect(()=>{if(!a)return;const l=setInterval(()=>{n(r=>r>=s?(c(!1),s):r+1)},200);return()=>clearInterval(l)},[a,s]),h.useEffect(()=>{const l=i.current;if(!l)return;const r=l.getContext("2d"),p=l.width,N=l.height;r.clearRect(0,0,p,N);const u=d/s,x=1-u,m=200,v=(p-m)/2,f=30;r.fillStyle="rgba(0, 0, 0, 0.3)",r.fillRect(v,f,m,m);const j=10;for(let C=0;C<m;C+=j)for(let P=0;P<m;P+=j){const G=100+C/m*100,F=80+P/m*120,B=150,L=(Math.random()-.5)*200*x,$=Math.max(0,Math.min(255,G+L)),X=Math.max(0,Math.min(255,F+L)),V=Math.max(0,Math.min(255,B+L));r.fillStyle=`rgb(${$}, ${X}, ${V})`,r.fillRect(v+C,f+P,j,j)}r.strokeStyle="rgba(255, 255, 255, 0.3)",r.strokeRect(v,f,m,m),r.fillStyle="white",r.font="bold 14px sans-serif",r.textAlign="center",r.fillText(`Step ${d} / ${s}`,p/2,f+m+30),r.font="12px sans-serif",r.fillStyle="rgba(255, 255, 255, 0.7)",r.fillText(`Ïƒ = ${x.toFixed(3)} (noise level)`,p/2,f+m+50),r.fillText(`t = ${u.toFixed(3)} (time)`,p/2,f+m+70);const o=300,T=(p-o)/2,S=f+m+90;r.fillStyle="rgba(255, 255, 255, 0.1)",r.fillRect(T,S,o,10),r.fillStyle="rgba(236, 72, 153, 0.8)",r.fillRect(T,S,o*u,10),r.font="11px sans-serif",r.fillStyle="rgba(255, 255, 255, 0.5)",r.textAlign="left",r.fillText("Noise",T,S+25),r.textAlign="right",r.fillText("Data",T+o,S+25)},[d,s]),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Diffusion Process: ",e.jsx("span",{className:"text-fuchsia-600 dark:text-fuchsia-400",children:"Noise to Image"})]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400",children:"Watch the flow matching process transform noise into a coherent image"})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("canvas",{ref:i,width:500,height:380,className:"w-full rounded-xl mb-4"}),e.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[e.jsxs("button",{onClick:()=>c(!a),className:"flex items-center gap-2 px-4 py-2 bg-fuchsia-600 hover:bg-fuchsia-700 rounded-lg transition-colors",children:[a?e.jsx(H,{size:18}):e.jsx(Q,{size:18}),a?"Pause":"Play"]}),e.jsxs("button",{onClick:()=>{n(0),c(!1)},className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:[e.jsx(_,{size:18}),"Reset"]})]}),e.jsxs("div",{className:"flex items-center gap-4 px-4",children:[e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Step"}),e.jsx("input",{type:"range",min:"0",max:s,value:d,onChange:l=>{n(parseInt(l.target.value)),c(!1)},className:"flex-1 h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"}),e.jsxs("span",{className:"text-sm text-gray-800 dark:text-gray-400 w-16",children:[d,"/",s]})]}),e.jsxs("div",{className:"flex items-center gap-4 px-4 mt-4",children:[e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Total Steps"}),e.jsx("input",{type:"range",min:"10",max:"50",value:s,onChange:l=>{g(parseInt(l.target.value)),n(0)},className:"flex-1 h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-400 w-16",children:s})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-fuchsia-900/30 to-purple-900/30 rounded-2xl p-6 border border-fuchsia-500/30",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(z,{size:20,className:"text-fuchsia-600 dark:text-fuchsia-400"}),"What Happens Each Step"]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("p",{className:"text-fuchsia-600 dark:text-fuchsia-400 font-bold mb-2",children:"1. Input"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Current noisy latent x_t + timestep t + text embeddings"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("p",{className:"text-purple-600 dark:text-purple-400 font-bold mb-2",children:"2. Predict"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"MMDiT predicts velocity v_Î¸(x_t, t, c) pointing toward data"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("p",{className:"text-blue-600 dark:text-blue-400 font-bold mb-2",children:"3. Update"}),e.jsxs("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:["Euler step: x_",t+dt," = x_t + v Ã— dt"]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("p",{className:"text-green-400 font-bold mb-2",children:"4. Repeat"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Continue until t=1, noise â†’ clean image"})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Classifier-Free Guidance (CFG)"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"CFG improves prompt adherence by contrasting conditional and unconditional predictions:"}),e.jsx("div",{className:"bg-black/50 rounded-lg p-4 font-mono text-sm text-center",children:e.jsx("p",{className:"text-fuchsia-300",children:"v_guided = v_uncond + w Ã— (v_cond - v_uncond)"})}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-500 mt-2",children:"where w is the guidance scale (typically 4-8 for SD3)"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-purple-300 mb-2",children:"Guidance Scale Effects"}),e.jsxs("ul",{className:"text-sm text-gray-800 dark:text-gray-400 space-y-2",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"w = 1:"})," No guidance, may ignore prompt"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-green-400",children:"w = 4-5:"})," Balanced, natural results"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-yellow-400",children:"w = 7-8:"})," Strong prompt adherence"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-red-400",children:"w > 10:"})," Over-saturated, artifacts"]})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Training vs Inference"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/20 rounded-xl p-4 border border-green-500/30",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-3",children:"Training"}),e.jsxs("ol",{className:"text-sm text-gray-800 dark:text-gray-400 space-y-2 list-decimal list-inside",children:[e.jsx("li",{children:"Sample image xâ‚ from dataset"}),e.jsx("li",{children:"Encode to latent: zâ‚ = VAE.encode(xâ‚)"}),e.jsx("li",{children:"Sample noise: zâ‚€ ~ N(0, I)"}),e.jsx("li",{children:"Sample timestep: t ~ LogitNormal(0, 1)"}),e.jsx("li",{children:"Interpolate: z_t = (1-t)zâ‚€ + tzâ‚"}),e.jsx("li",{children:"Predict: v = MMDiT(z_t, t, text_emb)"}),e.jsx("li",{children:"Loss: ||v - (zâ‚ - zâ‚€)||Â²"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-800/20 rounded-xl p-4 border border-blue-500/30",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-3",children:"Inference"}),e.jsxs("ol",{className:"text-sm text-gray-800 dark:text-gray-400 space-y-2 list-decimal list-inside",children:[e.jsx("li",{children:"Encode prompt with text encoders"}),e.jsx("li",{children:"Sample noise: zâ‚€ ~ N(0, I)"}),e.jsx("li",{children:"For t = 0 to 1 (N steps):"}),e.jsx("li",{className:"pl-4",children:"a. Predict v = MMDiT(z_t, t, text_emb)"}),e.jsx("li",{className:"pl-4",children:"b. Apply CFG: v = v_u + w(v_c - v_u)"}),e.jsxs("li",{className:"pl-4",children:["c. Euler step: z_",t+dt," = z_t + v Ã— dt"]}),e.jsx("li",{children:"Decode: image = VAE.decode(zâ‚)"})]})]})]})]})]})}function ne(){const[a,c]=h.useState("1024"),[d,n]=h.useState(28),[s,g]=h.useState(5),i={512:{size:512,tokens:1024,vram:"~6 GB",time:"5s"},768:{size:768,tokens:2304,vram:"~8 GB",time:"8s"},1024:{size:1024,tokens:4096,vram:"~12 GB",time:"12s"},1536:{size:1536,tokens:9216,vram:"~20 GB",time:"25s"}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Inference Pipeline: ",e.jsx("span",{className:"text-fuchsia-600 dark:text-fuchsia-400",children:"From Prompt to Image"})]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400",children:"The complete generation pipeline with configurable parameters"})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold mb-6 text-center",children:"Generation Pipeline"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-xl bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-2xl",children:"ðŸ“"})}),e.jsx("h4",{className:"font-bold text-blue-600 dark:text-blue-400 mb-2",children:"1. Text Encoding"}),e.jsxs("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:["CLIP-L, CLIP-G, T5-XXL",e.jsx("br",{}),"encode the prompt"]}),e.jsx("div",{className:"mt-2 text-xs text-gray-700 dark:text-gray-500",children:"~0.5s"})]}),e.jsx(y,{className:"text-gray-700 dark:text-gray-500 hidden md:block mt-8"}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-xl bg-gradient-to-br from-gray-500 to-slate-500 flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-2xl",children:"ðŸŽ²"})}),e.jsx("h4",{className:"font-bold text-gray-800 dark:text-gray-400 mb-2",children:"2. Sample Noise"}),e.jsxs("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:["zâ‚€ ~ N(0, I)",e.jsx("br",{}),"Random latent init"]}),e.jsx("div",{className:"mt-2 text-xs text-gray-700 dark:text-gray-500",children:"~0.01s"})]}),e.jsx(y,{className:"text-gray-700 dark:text-gray-500 hidden md:block mt-8"}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-xl bg-gradient-to-br from-fuchsia-500 to-pink-500 flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”„"})}),e.jsx("h4",{className:"font-bold text-fuchsia-600 dark:text-fuchsia-400 mb-2",children:"3. Denoise Loop"}),e.jsxs("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:["MMDiT + Euler",e.jsx("br",{}),d," iterations"]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-700 dark:text-gray-500",children:["~",(d*.3).toFixed(1),"s"]})]}),e.jsx(y,{className:"text-gray-700 dark:text-gray-500 hidden md:block mt-8"}),e.jsxs("div",{className:"flex-1 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-xl bg-gradient-to-br from-rose-500 to-red-500 flex items-center justify-center mb-3",children:e.jsx("span",{className:"text-2xl",children:"ðŸ–¼ï¸"})}),e.jsx("h4",{className:"font-bold text-rose-400 mb-2",children:"4. VAE Decode"}),e.jsxs("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:["Latent â†’ Pixels",e.jsx("br",{}),a,"Ã—",a]}),e.jsx("div",{className:"mt-2 text-xs text-gray-700 dark:text-gray-500",children:"~1s"})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(W,{size:20,className:"text-fuchsia-600 dark:text-fuchsia-400"}),"Generation Settings"]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-800 dark:text-gray-400 block mb-3",children:"Resolution"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(i).map(l=>e.jsxs("button",{onClick:()=>c(l),className:`px-3 py-2 rounded-lg text-sm transition-all ${a===l?"bg-fuchsia-600 text-white":"bg-white/10 text-gray-800 dark:text-gray-400 hover:bg-white/20"}`,children:[l,"Ã—",l]},l))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-800 dark:text-gray-400 block mb-3",children:["Sampling Steps: ",d]}),e.jsx("input",{type:"range",min:"10",max:"50",value:d,onChange:l=>n(parseInt(l.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-700 dark:text-gray-500 mt-1",children:[e.jsx("span",{children:"Fast (10)"}),e.jsx("span",{children:"Quality (50)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm text-gray-800 dark:text-gray-400 block mb-3",children:["CFG Scale: ",s]}),e.jsx("input",{type:"range",min:"1",max:"15",step:"0.5",value:s,onChange:l=>g(parseFloat(l.target.value)),className:"w-full h-2 bg-white/20 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-700 dark:text-gray-500 mt-1",children:[e.jsx("span",{children:"Natural (1)"}),e.jsx("span",{children:"Strong (15)"})]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-fuchsia-600 dark:text-fuchsia-400",children:i[a].tokens}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"Image Tokens"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:i[a].vram}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"Est. VRAM"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:d*2}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"NFE (w/ CFG)"})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[e.jsxs("p",{className:"text-lg font-bold text-green-400",children:["~",Math.round(parseFloat(i[a].time)*d/28),"s"]}),e.jsx("p",{className:"text-xs text-gray-800 dark:text-gray-400",children:"Est. Time (A100)"})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(M,{size:20,className:"text-purple-600 dark:text-purple-400"}),"Hardware Requirements"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/20",children:[e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-400",children:"Model Size"}),e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-400",children:"Parameters"}),e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-400",children:"Min VRAM (FP16)"}),e.jsx("th",{className:"py-3 px-4 text-left text-gray-800 dark:text-gray-400",children:"Recommended"})]})}),e.jsxs("tbody",{className:"divide-y divide-white/10",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-fuchsia-600 dark:text-fuchsia-400",children:"SD3-Medium"}),e.jsx("td",{className:"py-3 px-4",children:"2B"}),e.jsx("td",{className:"py-3 px-4",children:"8 GB"}),e.jsx("td",{className:"py-3 px-4",children:"RTX 3080/4070"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-purple-600 dark:text-purple-400",children:"SD3"}),e.jsx("td",{className:"py-3 px-4",children:"3B"}),e.jsx("td",{className:"py-3 px-4",children:"12 GB"}),e.jsx("td",{className:"py-3 px-4",children:"RTX 4080/A6000"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 px-4 text-blue-600 dark:text-blue-400",children:"SD3.5-Large"}),e.jsx("td",{className:"py-3 px-4",children:"8B"}),e.jsx("td",{className:"py-3 px-4",children:"24 GB"}),e.jsx("td",{className:"py-3 px-4",children:"RTX 4090/A100"})]})]})]})}),e.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-500 mt-4",children:"Note: Memory usage varies with resolution. Using FP8 quantization or model offloading can reduce requirements."})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/20 rounded-xl p-5 border border-green-500/30",children:[e.jsxs("h3",{className:"font-bold text-green-300 mb-2 flex items-center gap-2",children:[e.jsx(E,{size:18})," Speed Tips"]}),e.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[e.jsx("li",{children:"â€¢ Use fewer steps (20-28)"}),e.jsx("li",{children:"â€¢ Lower resolution first"}),e.jsx("li",{children:"â€¢ Enable xformers/flash-attn"}),e.jsx("li",{children:"â€¢ Use torch.compile()"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/20 rounded-xl p-5 border border-purple-500/30",children:[e.jsxs("h3",{className:"font-bold text-purple-300 mb-2 flex items-center gap-2",children:[e.jsx(Z,{size:18})," Quality Tips"]}),e.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[e.jsx("li",{children:"â€¢ Use 40-50 steps"}),e.jsx("li",{children:"â€¢ CFG scale 4-7"}),e.jsx("li",{children:"â€¢ Higher resolution"}),e.jsx("li",{children:"â€¢ Detailed prompts"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-900/30 to-blue-800/20 rounded-xl p-5 border border-blue-500/30",children:[e.jsxs("h3",{className:"font-bold text-blue-300 mb-2 flex items-center gap-2",children:[e.jsx(M,{size:18})," Memory Tips"]}),e.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[e.jsx("li",{children:"â€¢ Use FP8 quantization"}),e.jsx("li",{children:"â€¢ Sequential CPU offload"}),e.jsx("li",{children:"â€¢ Attention slicing"}),e.jsx("li",{children:"â€¢ VAE tiling"})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Quick Start (diffusers)"}),e.jsx("div",{className:"bg-black/50 rounded-lg p-4 font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"text-gray-700 dark:text-gray-300",children:`from diffusers import StableDiffusion3Pipeline
import torch

pipe = StableDiffusion3Pipeline.from_pretrained(
    "stabilityai/stable-diffusion-3-medium-diffusers",
    torch_dtype=torch.float16
).to("cuda")

image = pipe(
    prompt="A cat wearing sunglasses on a beach",
    num_inference_steps=${d},
    guidance_scale=${s},
    height=${a},
    width=${a},
).images[0]

image.save("output.png")`})})]})]})}function de(){const[a,c]=h.useState(0),[d,n]=h.useState(null),[s,g]=h.useState(!1),[i,l]=h.useState(0),[r,p]=h.useState(!1),[N,u]=h.useState(!1),x=[{question:"What are the three text encoders used in SD3?",options:["BERT, GPT-2, T5","CLIP-L, CLIP-G, T5-XXL","RoBERTa, ALBERT, CLIP","GPT-4, CLIP, BERT"],correct:1,explanation:"SD3 uses CLIP ViT-L/14, CLIP ViT-bigG/14, and T5-XXL (optionally) for comprehensive text understanding."},{question:"What is the main architectural innovation in SD3's denoising backbone?",options:["Cross-attention only UNet","Self-attention transformer","MM-DiT with joint attention","Pure convolutional network"],correct:2,explanation:"SD3 introduces Multimodal Diffusion Transformer (MM-DiT) that uses joint attention between image and text tokens."},{question:"What compression ratio does the SD3 VAE achieve?",options:["4x (256â†’64 pixels)","8x (512â†’64 pixels)","16x (1024â†’64 pixels)","2x (512â†’256 pixels)"],correct:1,explanation:"The VAE compresses images by 8x spatially (e.g., 1024Ã—1024 â†’ 128Ã—128 latents with 16 channels)."},{question:"What sampling method does SD3 primarily use?",options:["DDPM","DDIM","Flow matching with Euler","DPM++ 2M"],correct:2,explanation:"SD3 uses flow matching (rectified flow) with a simple Euler solver for efficient, high-quality sampling."},{question:"How does SD3 handle guidance (CFG)?",options:["Single conditional prediction","Dual predictions (cond + uncond) combined","Triple predictions (cond + partial + uncond)","No guidance needed"],correct:2,explanation:"SD3 can use triple classifier-free guidance with conditional, partially-conditional (text only), and unconditional predictions."},{question:"What is the latent dimension (channels) in SD3?",options:["4 channels","8 channels","16 channels","32 channels"],correct:2,explanation:"SD3 uses 16-channel latents (compared to 4 in SD1.5/SDXL), allowing for more information encoding."},{question:"Why does SD3 use timestep shifting?",options:["To reduce memory usage","To handle different resolutions dynamically","To speed up inference only","To reduce model size"],correct:1,explanation:"Timestep shifting adjusts the noise schedule based on resolution - higher res needs more noise at early steps."},{question:"What does the pooled text embedding provide?",options:["Token-level details","Global context for timestep conditioning","Image feature matching","Noise prediction scaling"],correct:1,explanation:"The pooled embedding (from CLIP) provides global semantic context, added to timestep embedding for conditioning."}],m=j=>{n(j),g(!0),j===x[a].correct&&l(i+1)},v=()=>{a<x.length-1?(c(a+1),n(null),g(!1)):p(!0)},f=()=>{c(0),n(null),g(!1),l(0),p(!1)};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Practice Lab: ",e.jsx("span",{className:"text-fuchsia-600 dark:text-fuchsia-400",children:"SD3 Architecture"})]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400",children:"Test your understanding and explore hands-on exercises"})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:()=>u(!1),className:`px-6 py-3 rounded-xl flex items-center gap-2 transition-all ${N?"bg-white/10 text-gray-800 dark:text-gray-400 hover:bg-white/20":"bg-fuchsia-600 text-white"}`,children:[e.jsx(q,{size:18}),"Quiz"]}),e.jsxs("button",{onClick:()=>u(!0),className:`px-6 py-3 rounded-xl flex items-center gap-2 transition-all ${N?"bg-fuchsia-600 text-white":"bg-white/10 text-gray-800 dark:text-gray-400 hover:bg-white/20"}`,children:[e.jsx(Y,{size:18}),"Code Exercises"]})]}),N?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-fuchsia-600 flex items-center justify-center text-sm",children:"1"}),"Explore the VAE Latent Space"]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400 mb-4",children:"Encode an image to latents, visualize the 16 channels, and decode back."}),e.jsx("div",{className:"bg-black/50 rounded-lg p-4 font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"text-gray-700 dark:text-gray-300",children:`from diffusers import AutoencoderKL
from PIL import Image
import torch
import matplotlib.pyplot as plt

# Load VAE
vae = AutoencoderKL.from_pretrained(
    "stabilityai/stable-diffusion-3-medium-diffusers",
    subfolder="vae"
).to("cuda")

# Load and encode image
image = Image.open("your_image.png").resize((1024, 1024))
# TODO: Convert to tensor and normalize to [-1, 1]
# TODO: Encode with vae.encode()
# TODO: Get latent representation
# TODO: Visualize first 4 channels
# TODO: Decode back and compare`})}),e.jsx("div",{className:"mt-4 p-4 bg-green-500/10 rounded-xl border border-green-500/30",children:e.jsxs("p",{className:"text-sm text-green-300",children:[e.jsx("strong",{children:"Goal:"})," Understand how the 16-channel latent space captures image information."]})})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-purple-600 flex items-center justify-center text-sm",children:"2"}),"Compare Text Encodings"]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400 mb-4",children:"Compare how CLIP and T5 encode the same prompt differently."}),e.jsx("div",{className:"bg-black/50 rounded-lg p-4 font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"text-gray-700 dark:text-gray-300",children:`from transformers import CLIPTextModel, T5EncoderModel
from transformers import CLIPTokenizer, T5Tokenizer

# Load models
clip_model = CLIPTextModel.from_pretrained(
    "openai/clip-vit-large-patch14"
)
t5_model = T5EncoderModel.from_pretrained("google/t5-v1_1-xxl")

prompt = "A serene mountain lake at sunset"
# TODO: Tokenize with both tokenizers
# TODO: Encode with both models
# TODO: Compare embedding shapes
# TODO: Analyze token-level attention patterns
# TODO: Test with long vs short prompts`})}),e.jsx("div",{className:"mt-4 p-4 bg-purple-500/10 rounded-xl border border-purple-500/30",children:e.jsxs("p",{className:"text-sm text-purple-300",children:[e.jsx("strong",{children:"Goal:"})," Understand why SD3 uses multiple text encoders and their complementary roles."]})})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-blue-600 flex items-center justify-center text-sm",children:"3"}),"Implement Timestep Shifting"]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400 mb-4",children:"Implement resolution-dependent timestep shifting for flow matching."}),e.jsx("div",{className:"bg-black/50 rounded-lg p-4 font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"text-gray-700 dark:text-gray-300",children:`import numpy as np
import matplotlib.pyplot as plt

def compute_shift(resolution: int, base_res: int = 256) -> float:
    """Compute timestep shift based on resolution."""
    # TODO: Calculate shift factor
    # Higher resolutions need more noise early
    pass

def shift_timesteps(t: np.ndarray, shift: float) -> np.ndarray:
    """Apply shift to timesteps."""
    # TODO: Implement shifted sampling
    # t_shifted = shift * t / (1 + (shift - 1) * t)
    pass

# Test with different resolutions
resolutions = [512, 768, 1024, 1536]
timesteps = np.linspace(0, 1, 1000)

# TODO: Plot original vs shifted timesteps
# TODO: Analyze how shift affects denoising schedule`})}),e.jsx("div",{className:"mt-4 p-4 bg-blue-500/10 rounded-xl border border-blue-500/30",children:e.jsxs("p",{className:"text-sm text-blue-300",children:[e.jsx("strong",{children:"Goal:"})," Understand how timestep shifting enables resolution-independent training."]})})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-rose-600 flex items-center justify-center text-sm",children:"4"}),"Visualize Joint Attention"]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400 mb-4",children:"Extract and visualize attention maps from the MM-DiT blocks."}),e.jsx("div",{className:"bg-black/50 rounded-lg p-4 font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"text-gray-700 dark:text-gray-300",children:`import torch
from diffusers import StableDiffusion3Pipeline

pipe = StableDiffusion3Pipeline.from_pretrained(
    "stabilityai/stable-diffusion-3-medium-diffusers"
).to("cuda")

# Hook to capture attention maps
attention_maps = []

def attention_hook(module, input, output):
    # TODO: Extract attention weights
    # TODO: Store for visualization
    pass

# TODO: Register hooks on transformer blocks
# TODO: Run inference
# TODO: Visualize textâ†’image and imageâ†’text attention
# TODO: Identify which words attend to which regions`})}),e.jsx("div",{className:"mt-4 p-4 bg-rose-500/10 rounded-xl border border-rose-500/30",children:e.jsxs("p",{className:"text-sm text-rose-300",children:[e.jsx("strong",{children:"Goal:"})," See how joint attention creates bidirectional text-image understanding."]})})]})]}):e.jsx("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ee,{className:"w-20 h-20 mx-auto mb-6 text-yellow-400"}),e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Quiz Complete!"}),e.jsxs("p",{className:"text-4xl font-bold text-fuchsia-600 dark:text-fuchsia-400 mb-4",children:[i," / ",x.length]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400 mb-6",children:i===x.length?"Perfect! You've mastered SD3 architecture!":i>=x.length*.7?"Great job! You have a solid understanding.":"Keep learning! Review the other panels and try again."}),e.jsxs("button",{onClick:f,className:"px-6 py-3 bg-fuchsia-600 hover:bg-fuchsia-500 rounded-xl transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(_,{size:18}),"Retry Quiz"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("span",{className:"text-gray-800 dark:text-gray-400",children:["Question ",a+1," of ",x.length]}),e.jsxs("span",{className:"text-fuchsia-600 dark:text-fuchsia-400",children:["Score: ",i]})]}),e.jsx("div",{className:"w-full bg-white/10 rounded-full h-2 mb-8",children:e.jsx("div",{className:"bg-gradient-to-r from-fuchsia-500 to-purple-500 h-2 rounded-full transition-all",style:{width:`${(a+1)/x.length*100}%`}})}),e.jsx("h3",{className:"text-xl font-bold mb-6",children:x[a].question}),e.jsx("div",{className:"space-y-3",children:x[a].options.map((j,o)=>e.jsx("button",{onClick:()=>!s&&m(o),disabled:s,className:`w-full p-4 rounded-xl text-left transition-all ${s?o===x[a].correct?"bg-green-500/30 border-green-500":o===d?"bg-red-500/30 border-red-500":"bg-white/5 border-white/10":"bg-white/10 border-white/20 hover:bg-white/20"} border`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-8 h-8 rounded-lg bg-white/10 flex items-center justify-center font-bold",children:String.fromCharCode(65+o)}),e.jsx("span",{children:j}),s&&o===x[a].correct&&e.jsx(K,{className:"ml-auto text-green-400",size:20}),s&&o===d&&o!==x[a].correct&&e.jsx(J,{className:"ml-auto text-red-400",size:20})]})},o))}),s&&e.jsx("div",{className:"mt-6 p-4 rounded-xl bg-fuchsia-500/20 border border-fuchsia-500/30",children:e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-bold text-fuchsia-300",children:"Explanation:"})," ",x[a].explanation]})}),s&&e.jsx("button",{onClick:v,className:"mt-6 px-6 py-3 bg-fuchsia-600 hover:bg-fuchsia-500 rounded-xl transition-colors",children:a<x.length-1?"Next Question":"See Results"})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-fuchsia-900/30 to-purple-900/30 rounded-2xl p-6 border border-fuchsia-500/30",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Key Takeaways"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-fuchsia-400 mt-2"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:["SD3 uses ",e.jsx("strong",{children:"3 text encoders"})," (CLIP-L, CLIP-G, T5-XXL) for rich prompt understanding"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-400 mt-2"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"MM-DiT"})," replaces UNet with transformers using joint attention"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-2"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Flow matching"})," enables efficient training and straight sampling paths"]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-rose-400 mt-2"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"16-channel VAE"})," provides better image reconstruction quality"]})]})]})]})]})}const D=[{id:"architecture",label:"1. Full Architecture",icon:M},{id:"text",label:"2. Text Encoding",icon:I},{id:"latent",label:"3. Latent Space",icon:w},{id:"diffusion",label:"4. Diffusion Process",icon:U},{id:"inference",label:"5. Inference Pipeline",icon:O},{id:"practice",label:"6. Practice Lab",icon:te}];function be(){const[a,c]=h.useState("architecture"),d=()=>{switch(a){case"architecture":return e.jsx(R,{});case"text":return e.jsx(re,{});case"latent":return e.jsx(le,{});case"diffusion":return e.jsx(ie,{});case"inference":return e.jsx(ne,{});case"practice":return e.jsx(de,{});default:return e.jsx(R,{})}};return e.jsxs("div",{className:"text-white",children:[e.jsx("nav",{className:"bg-black/20 px-6 py-2 flex gap-2 overflow-x-auto",children:D.map((n,s)=>{const g=n.icon,i=a===n.id,l=D.findIndex(p=>p.id===a),r=s<l;return e.jsxs("button",{onClick:()=>c(n.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${i?"bg-fuchsia-600 text-white":r?"bg-fuchsia-900/50 text-fuchsia-300 hover:bg-fuchsia-800/50":"bg-white/5 text-gray-800 dark:text-gray-400 hover:bg-white/10 hover:text-white"}`,children:[e.jsx(g,{size:18}),n.label]},n.id)})}),e.jsx("div",{className:"h-1 bg-black/20 flex",children:D.map((n,s)=>{const g=D.findIndex(i=>i.id===a);return e.jsx("div",{className:`flex-1 transition-all duration-300 ${s<=g?"bg-gradient-to-r from-fuchsia-500 to-purple-600":"bg-transparent"}`},n.id)})}),e.jsx("main",{className:"p-6 max-w-7xl mx-auto",children:d()})]})}export{be as default};
