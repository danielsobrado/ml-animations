import{r as x,j as e,Z as i}from"./index-quAWpIA7.js";import{A as m}from"./alert-triangle-BSxPma3v.js";import{m as r}from"./proxy-D7LjGbFl.js";import{C as n}from"./check-circle-CZEU1TAG.js";function b(){const[t,d]=x.useState(0),a=["The","cat","sat","on","the","mat"];return e.jsx("div",{className:"p-8 h-full flex flex-col items-center overflow-y-auto",children:e.jsxs("div",{className:"max-w-4xl w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-emerald-600 dark:text-emerald-400 mb-4",children:"The Problem: Redundant Computation"}),e.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 leading-relaxed max-w-2xl mx-auto",children:["When generating text ",e.jsx("strong",{children:"token by token"}),", without caching we recompute the Keys and Values for ",e.jsx("em",{children:"every previous token"})," at each step."]})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[e.jsx("button",{onClick:()=>d(Math.max(0,t-1)),disabled:t===0,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 rounded-lg disabled:opacity-50 font-medium",children:"â† Previous"}),e.jsxs("div",{className:"flex items-center gap-2 px-4",children:[e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Token:"}),e.jsxs("span",{className:"font-bold text-emerald-600 dark:text-emerald-400 text-xl",children:[t+1," / ",a.length]})]}),e.jsx("button",{onClick:()=>d(Math.min(a.length-1,t+1)),disabled:t===a.length-1,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg disabled:opacity-50 font-medium hover:bg-emerald-700",children:"Next â†’"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border-2 border-red-200 dark:border-red-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(m,{className:"text-red-500",size:24}),e.jsx("h3",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:"Without KV Cache"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Recomputes K and V for all tokens every step. O(nÂ²) complexity!"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:a.slice(0,t+1).map((l,s)=>e.jsxs(r.div,{initial:{scale:0},animate:{scale:1},className:`px-3 py-2 rounded-lg font-mono text-sm ${s===t?"bg-emerald-500 text-white ring-2 ring-emerald-300":"bg-red-200 dark:bg-red-800 text-red-800 dark:text-red-200"}`,children:[l,s<t&&e.jsx("span",{className:"ml-1 text-xs",children:"ðŸ”„"})]},s))}),e.jsxs("div",{className:"bg-red-100 dark:bg-red-900/40 rounded-lg p-4",children:[e.jsxs("div",{className:"text-sm font-medium text-red-700 dark:text-red-300 mb-2",children:["Computations for step ",t+1,":"]}),e.jsxs("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:[t+1," Ã— (K + V) = ",(t+1)*2," ops"]}),e.jsxs("div",{className:"text-xs text-red-500 mt-2",children:["Total so far: ",(t+1)*(t+2)," operations"]})]})]}),e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 border-2 border-emerald-200 dark:border-emerald-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(n,{className:"text-emerald-500",size:24}),e.jsx("h3",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:"With KV Cache"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:"Stores K and V, only computes for the new token. O(n) complexity!"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:a.slice(0,t+1).map((l,s)=>e.jsxs(r.div,{initial:{scale:0},animate:{scale:1},className:`px-3 py-2 rounded-lg font-mono text-sm ${s===t?"bg-emerald-500 text-white ring-2 ring-emerald-300":"bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 border border-emerald-300 dark:border-emerald-700"}`,children:[l,s<t&&e.jsx("span",{className:"ml-1 text-xs",children:"ðŸ’¾"})]},s))}),e.jsxs("div",{className:"bg-emerald-100 dark:bg-emerald-900/40 rounded-lg p-4",children:[e.jsxs("div",{className:"text-sm font-medium text-emerald-700 dark:text-emerald-300 mb-2",children:["Computations for step ",t+1,":"]}),e.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:"1 Ã— (K + V) = 2 ops"}),e.jsxs("div",{className:"text-xs text-emerald-500 mt-2",children:["Total so far: ",(t+1)*2," operations"]})]})]})]}),e.jsx(r.div,{className:"mt-8 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-2xl p-6 text-white",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{size:32}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-lg",children:["Savings at step ",t+1]}),e.jsxs("p",{className:"text-emerald-100",children:["KV Cache saves ",e.jsx("strong",{children:(t+1)*(t+2)-(t+1)*2})," operations (",Math.round((1-(t+1)*2/((t+1)*(t+2)))*100),"% reduction)"]})]})]})})]})})}export{b as default};
