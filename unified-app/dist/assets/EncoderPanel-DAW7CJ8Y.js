import{r as d,j as e,x}from"./index-CsxpOLHd.js";import{P as j}from"./pause-BMcOX1vk.js";import{P as N}from"./play-CIyTSByC.js";import{R as f}from"./rotate-ccw-xVnQluc9.js";import{A as r}from"./arrow-down-CKgADZk1.js";import{P as h}from"./plus-Ct7xA5ZS.js";import{E as b}from"./eye-Bp4zrP5E.js";function L(){const[t,c]=d.useState(0),[n,o]=d.useState(!1),[p,u]=d.useState(0),a=[{title:"Input + Positional Encoding",description:"Input embeddings are added to positional encodings to give the model position information.",highlight:"input",formula:"X = Embedding(tokens) + PE(positions)"},{title:"Multi-Head Self-Attention",description:"Each position attends to all positions. Multiple heads capture different relationship types.",highlight:"attention",formula:"Attention(Q,K,V) = softmax(QK^T/‚àöd_k)V"},{title:"Residual Connection + LayerNorm",description:"Add the original input (residual) then normalize. This helps gradient flow and training stability.",highlight:"residual1",formula:"Output = LayerNorm(X + Attention(X))"},{title:"Feed-Forward Network",description:"Two linear transformations with ReLU activation. Applied identically to each position.",highlight:"ffn",formula:"FFN(x) = max(0, xW‚ÇÅ + b‚ÇÅ)W‚ÇÇ + b‚ÇÇ"},{title:"Residual Connection + LayerNorm",description:"Another residual connection and layer normalization after FFN.",highlight:"residual2",formula:"Output = LayerNorm(X + FFN(X))"},{title:"Stack N Times",description:"The entire encoder layer is repeated N times (typically 6 or 12). Output goes to decoder.",highlight:"stack",formula:"Encoder = EncoderLayer^N(Input)"}];d.useEffect(()=>{let s;return n&&t<a.length-1?s=setInterval(()=>{c(l=>l+1)},3e3):t>=a.length-1&&o(!1),()=>clearInterval(s)},[n,t]);const g=()=>{c(0),o(!1)},i=s=>{var m;return((m=a[t])==null?void 0:m.highlight)===s?"ring-2 ring-yellow-400 bg-opacity-100 scale-105":"bg-opacity-70"};return e.jsx("div",{className:"p-6 min-h-screen",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-2",children:["The Encoder: ",e.jsx("span",{className:"gradient-text",children:"Processing Input"})]}),e.jsx("p",{className:"text-slate-400",children:"The encoder reads and understands the input sequence"})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>o(!n),className:"flex items-center gap-2 px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-all",children:[n?e.jsx(j,{size:20}):e.jsx(N,{size:20}),n?"Pause":"Play Animation"]}),e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg transition-all",children:[e.jsx(f,{size:20}),"Reset"]})]}),e.jsx("div",{className:"flex justify-center gap-2 mb-8",children:a.map((s,l)=>e.jsx("button",{onClick:()=>c(l),className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all ${t===l?"bg-blue-500 text-white":t>l?"bg-green-500 text-white":"bg-slate-700 text-slate-400"}`,children:l+1},l))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-2xl p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-white font-bold mb-4 text-center",children:"Single Encoder Layer"}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:`w-48 p-3 rounded-lg bg-green-500 text-white text-center text-sm font-medium transition-all ${i("stack")}`,children:"To Next Layer / Decoder"}),e.jsx(r,{className:"text-slate-500"}),e.jsx("div",{className:`w-48 p-2 rounded-lg bg-emerald-500 text-white text-center text-xs transition-all ${i("residual2")}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(h,{size:14})," Add & Norm"]})}),e.jsx(r,{className:"text-slate-500"}),e.jsxs("div",{className:`w-48 p-4 rounded-lg bg-orange-500 text-white text-center transition-all ${i("ffn")}`,children:[e.jsx("div",{className:"font-medium",children:"Feed Forward"}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Linear ‚Üí ReLU ‚Üí Linear"})]}),e.jsxs("div",{className:"relative w-full flex justify-center",children:[e.jsx(r,{className:"text-slate-500"}),e.jsx("div",{className:"absolute left-4 top-0 h-full w-px bg-yellow-400/50"}),e.jsx("div",{className:"absolute left-4 top-1/2 w-16 h-px bg-yellow-400/50"})]}),e.jsx("div",{className:`w-48 p-2 rounded-lg bg-emerald-500 text-white text-center text-xs transition-all ${i("residual1")}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(h,{size:14})," Add & Norm"]})}),e.jsx(r,{className:"text-slate-500"}),e.jsxs("div",{className:`w-48 p-4 rounded-lg bg-purple-500 text-white text-center transition-all ${i("attention")}`,children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(b,{size:18}),e.jsx("span",{className:"font-medium",children:"Multi-Head Attention"})]}),e.jsx("div",{className:"text-xs mt-2 opacity-80",children:"Q, K, V from same input"})]}),e.jsxs("div",{className:"relative w-full flex justify-center",children:[e.jsx(r,{className:"text-slate-500"}),e.jsx("div",{className:"absolute left-4 top-0 h-full w-px bg-yellow-400/50"}),e.jsx("div",{className:"absolute left-4 top-1/2 w-16 h-px bg-yellow-400/50"})]}),e.jsxs("div",{className:`w-48 p-3 rounded-lg bg-blue-500 text-white text-center transition-all ${i("input")}`,children:[e.jsx("div",{className:"font-medium",children:"Input + Positional"}),e.jsx("div",{className:"text-xs mt-1 opacity-80",children:"Embeddings"})]})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("div",{className:"text-slate-400 text-sm mb-2",children:"Encoder Layers (click to select)"}),e.jsx("div",{className:"flex justify-center gap-2",children:[0,1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>u(s),className:`w-8 h-8 rounded text-sm font-medium transition-all ${p===s?"bg-green-500 text-white":"bg-slate-700 text-slate-400 hover:bg-slate-600"}`,children:s+1},s))})]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-2xl p-6 border border-slate-700",children:[e.jsxs("div",{className:"bg-blue-500/20 rounded-xl p-4 mb-6",children:[e.jsxs("h3",{className:"text-blue-400 font-bold text-lg mb-2",children:["Step ",t+1,": ",a[t].title]}),e.jsx("p",{className:"text-slate-300",children:a[t].description})]}),e.jsxs("div",{className:"bg-slate-700/50 p-4 rounded-lg mb-6",children:[e.jsx("div",{className:"text-slate-400 text-sm mb-2",children:"Formula:"}),e.jsx("div",{className:"text-white font-mono text-center text-lg",children:a[t].formula})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-white font-bold",children:"üîç Encoder Self-Attention"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-blue-500/20 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-blue-400 font-bold",children:"Q"}),e.jsx("div",{className:"text-slate-400 text-xs",children:"From input"})]}),e.jsxs("div",{className:"bg-green-500/20 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-green-400 font-bold",children:"K"}),e.jsx("div",{className:"text-slate-400 text-xs",children:"From input"})]}),e.jsxs("div",{className:"bg-purple-500/20 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-purple-400 font-bold",children:"V"}),e.jsx("div",{className:"text-slate-400 text-xs",children:"From input"})]})]}),e.jsx("div",{className:"text-slate-400 text-sm",children:"In encoder self-attention, all of Q, K, V come from the same input sequence. This allows every position to attend to every other position in the input."}),e.jsxs("div",{className:"bg-amber-500/10 p-4 rounded-lg border border-amber-500/30",children:[e.jsx("h5",{className:"text-amber-400 font-medium mb-2",children:"üí° Why Residual Connections?"}),e.jsxs("ul",{className:"text-slate-400 text-sm space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Enable training very deep networks"}),e.jsx("li",{children:"‚Ä¢ Gradients flow directly through skip connections"}),e.jsx("li",{children:"‚Ä¢ Model can learn identity mapping easily"}),e.jsx("li",{children:"‚Ä¢ Inspired by ResNet (He et al., 2015)"})]})]})]})]})]}),e.jsxs("div",{className:"mt-8 bg-slate-800/50 rounded-2xl p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-white font-bold mb-4",children:"üìê Dimension Flow Through Encoder"}),e.jsxs("div",{className:"flex items-center justify-around flex-wrap gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"bg-blue-500/20 px-4 py-2 rounded-lg mb-2",children:e.jsx("span",{className:"text-blue-400 font-mono",children:"[seq_len, d_model]"})}),e.jsx("div",{className:"text-slate-400 text-xs",children:"Input"})]}),e.jsx(x,{className:"text-slate-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-purple-500/20 px-4 py-2 rounded-lg mb-2",children:e.jsx("span",{className:"text-purple-400 font-mono",children:"[seq_len, d_model]"})}),e.jsx("div",{className:"text-slate-400 text-xs",children:"After Attention"})]}),e.jsx(x,{className:"text-slate-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-orange-500/20 px-4 py-2 rounded-lg mb-2",children:e.jsx("span",{className:"text-orange-400 font-mono",children:"[seq_len, d_ff]"})}),e.jsx("div",{className:"text-slate-400 text-xs",children:"FFN Hidden"})]}),e.jsx(x,{className:"text-slate-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"bg-green-500/20 px-4 py-2 rounded-lg mb-2",children:e.jsx("span",{className:"text-green-400 font-mono",children:"[seq_len, d_model]"})}),e.jsx("div",{className:"text-slate-400 text-xs",children:"Output"})]})]}),e.jsxs("div",{className:"mt-4 text-center text-slate-400 text-sm",children:["d_model = ",e.jsx("span",{className:"text-blue-400",children:"512"}),", d_ff = ",e.jsx("span",{className:"text-orange-400",children:"2048"})," (4√ó d_model typically)"]})]})]})})}export{L as default};
