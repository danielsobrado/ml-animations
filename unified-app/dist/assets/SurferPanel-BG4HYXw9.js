import{r as n,j as t}from"./index-CsxpOLHd.js";function N({nodes:r,links:d}){var g;const[i,m]=n.useState(((g=r[0])==null?void 0:g.id)||null),[c,x]=n.useState({}),[h,u]=n.useState(0),[o,p]=n.useState(!1);n.useEffect(()=>{const e={};r.forEach(a=>e[a.id]=0),x(e),r.length>0&&!i&&m(r[0].id)},[r]),n.useEffect(()=>{let e;return o&&i&&(e=setInterval(()=>{const a=d.filter(s=>s.source===i);let l;if(Math.random()<.15||a.length===0){const s=Math.floor(Math.random()*r.length);l=r[s].id}else{const s=Math.floor(Math.random()*a.length);l=a[s].target}m(l),x(s=>({...s,[l]:(s[l]||0)+1})),u(s=>s+1)},100)),()=>clearInterval(e)},[o,i,d,r]);const b=Math.max(...Object.values(c),1);return t.jsxs("div",{className:"p-8 h-full flex flex-col items-center",children:[t.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[t.jsx("h2",{className:"text-3xl font-bold text-indigo-900 mb-4",children:"The Random Surfer"}),t.jsxs("p",{className:"text-lg text-slate-700 leading-relaxed",children:["Imagine a surfer clicking random links forever.",t.jsx("br",{}),t.jsx("strong",{children:"PageRank"})," is simply the probability that the surfer is on a specific page at any moment."]})]}),t.jsxs("div",{className:"flex gap-4 mb-8",children:[t.jsx("button",{onClick:()=>p(!o),className:`px-8 py-3 rounded-xl font-bold text-xl shadow-lg transition-all ${o?"bg-red-500 text-white hover:bg-red-600":"bg-green-600 text-white hover:bg-green-700"}`,children:o?"ðŸ›‘ Stop Surfing":"ðŸ„ Start Surfing"}),t.jsx("button",{onClick:()=>{const e={};r.forEach(a=>e[a.id]=0),x(e),u(0)},className:"px-6 py-3 bg-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-300",children:"Reset Stats"})]}),t.jsxs("div",{className:"w-full max-w-4xl h-[500px] bg-slate-50 rounded-xl border-2 border-slate-200 relative overflow-hidden",children:[t.jsxs("svg",{className:"w-full h-full",children:[t.jsx("defs",{children:t.jsx("marker",{id:"arrowhead-surfer",markerWidth:"10",markerHeight:"7",refX:"28",refY:"3.5",orient:"auto",children:t.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#cbd5e1"})})}),d.map((e,a)=>{const l=r.find(f=>f.id===e.source),s=r.find(f=>f.id===e.target);return!l||!s?null:t.jsx("line",{x1:l.x,y1:l.y,x2:s.x,y2:s.y,stroke:"#cbd5e1",strokeWidth:"2",markerEnd:"url(#arrowhead-surfer)"},a)}),r.map(e=>{const a=c[e.id]||0,l=h>0?a/h*100:0,s=20+a/b*40;return t.jsxs("g",{transform:`translate(${e.x},${e.y})`,children:[t.jsx("circle",{r:s,fill:i===e.id?"#f59e0b":"white",stroke:i===e.id?"#d97706":"#4f46e5",strokeWidth:i===e.id?4:2,className:"transition-all duration-300"}),t.jsx("text",{dy:"5",textAnchor:"middle",className:"font-bold text-indigo-900 pointer-events-none text-sm",children:e.id}),t.jsxs("text",{dy:"25",textAnchor:"middle",className:"text-xs font-mono text-slate-500",children:[l.toFixed(1),"%"]})]},e.id)})]}),t.jsxs("div",{className:"absolute top-4 right-4 bg-white/90 p-4 rounded-lg shadow border border-slate-200",children:[t.jsxs("p",{className:"font-bold text-slate-500 text-xs uppercase mb-2",children:["Total Steps: ",h]}),r.map(e=>t.jsxs("div",{className:"flex justify-between gap-4 text-sm",children:[t.jsxs("span",{className:"font-bold",children:[e.id,":"]}),t.jsxs("span",{className:"font-mono",children:[c[e.id]||0," visits"]})]},e.id))]})]})]})}export{N as default};
