import{c as v,r as i,j as e,H as T,f as I,m as b,y as A,Z as k,R as L,z as S,L as N,e as _,W as B}from"./index-quAWpIA7.js";import{g as u}from"./index-C8pce-KX.js";import{T as y}from"./type-Bjj95k7o.js";import{P as z}from"./pause-Ch50eX2B.js";import{P as f}from"./play-DgR7o5cW.js";import{S as q}from"./search-P0ah77zD.js";import{A as D}from"./alert-circle-DW_D6gqO.js";import{C as R}from"./check-circle-CZEU1TAG.js";import{X as O}from"./x-circle-D3t0USxl.js";import{T as W}from"./trophy-CmCS_W-S.js";import{C as j}from"./code-BC671jUr.js";import{G as M}from"./git-compare-B0IhWami.js";import{F as $}from"./flask-conical-DTo1qTL7.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=v("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=v("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function w(){const[r,c]=i.useState(!1),l=i.useRef(null),n=i.useRef(null);i.useEffect(()=>{if(!l.current)return;const t=u.context(()=>{n.current=u.timeline({paused:!0}),n.current.fromTo(".text-box",{opacity:0,x:-30},{opacity:1,x:0,duration:.5}),n.current.to(".tokenizer-box",{opacity:1,duration:.3}),n.current.to(".tokenizer-gear",{rotation:360,duration:1,ease:"linear"}),n.current.fromTo(".token-chip",{opacity:0,scale:0},{opacity:1,scale:1,stagger:.1,duration:.3,ease:"back.out(1.7)"}),n.current.fromTo(".token-id",{opacity:0,y:10},{opacity:1,y:0,stagger:.1,duration:.2}),n.current.to(".embed-box",{opacity:1,duration:.4})},l);return()=>t.revert()},[]);const o=()=>{n.current&&(r?n.current.pause():n.current.progress()===1?n.current.restart():n.current.play(),c(!r))},d=()=>{n.current&&(n.current.restart().pause(),c(!1))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-2",children:"Why Tokenization?"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 max-w-3xl mx-auto",children:["Neural networks can't process text directly - they work with numbers.",e.jsx("strong",{children:" Tokenization"})," converts human-readable text into sequences of integers that can be embedded into high-dimensional vectors."]})]}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-500/10 rounded-xl p-4 text-center border border-blue-500/30",children:[e.jsx(y,{className:"mx-auto text-blue-600 dark:text-blue-400 mb-2",size:32}),e.jsx("div",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"Text"}),e.jsx("div",{className:"text-xs text-gray-800 dark:text-gray-400 mt-1",children:'"A cat on a mat"'})]}),e.jsxs("div",{className:"bg-orange-500/10 rounded-xl p-4 text-center border border-orange-500/30",children:[e.jsx(T,{className:"mx-auto text-orange-600 dark:text-orange-400 mb-2",size:32}),e.jsx("div",{className:"font-semibold text-orange-600 dark:text-orange-400",children:"Tokenize"}),e.jsx("div",{className:"text-xs text-gray-800 dark:text-gray-400 mt-1",children:"Split into subwords"})]}),e.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 text-center border border-purple-500/30",children:[e.jsx("div",{className:"mx-auto w-8 h-8 rounded bg-purple-400/50 flex items-center justify-center text-white font-mono text-sm mb-2",children:"ID"}),e.jsx("div",{className:"font-semibold text-purple-600 dark:text-purple-400",children:"Encode"}),e.jsx("div",{className:"text-xs text-gray-800 dark:text-gray-400 mt-1",children:"Map to integers"})]}),e.jsxs("div",{className:"bg-green-500/10 rounded-xl p-4 text-center border border-green-500/30",children:[e.jsx(I,{className:"mx-auto text-green-400 mb-2",size:32}),e.jsx("div",{className:"font-semibold text-green-400",children:"Embed"}),e.jsx("div",{className:"text-xs text-gray-800 dark:text-gray-400 mt-1",children:"768/4096-dim vectors"})]})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors",children:[r?e.jsx(z,{size:18}):e.jsx(f,{size:18}),r?"Pause":"Play Animation"]}),e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(b,{size:18}),"Reset"]})]}),e.jsx("div",{ref:l,className:"bg-black/40 rounded-xl p-6 min-h-[300px]",children:e.jsxs("svg",{viewBox:"0 0 800 250",className:"w-full h-auto",children:[e.jsxs("g",{className:"text-box",style:{opacity:0},children:[e.jsx("rect",{x:"20",y:"90",width:"150",height:"60",rx:"8",fill:"#3b82f6",fillOpacity:"0.2",stroke:"#3b82f6",strokeWidth:"2"}),e.jsx("text",{x:"95",y:"115",textAnchor:"middle",fill:"#60a5fa",fontSize:"10",children:"Text Prompt"}),e.jsx("text",{x:"95",y:"135",textAnchor:"middle",fill:"white",fontSize:"11",children:'"A cute cat"'})]}),e.jsx("path",{d:"M 175 120 L 210 120",stroke:"#60a5fa",strokeWidth:"2",markerEnd:"url(#tokenArrow)"}),e.jsxs("g",{className:"tokenizer-box",style:{opacity:0},children:[e.jsx("rect",{x:"220",y:"80",width:"100",height:"80",rx:"8",fill:"#f97316",fillOpacity:"0.2",stroke:"#f97316",strokeWidth:"2"}),e.jsx("text",{x:"270",y:"105",textAnchor:"middle",fill:"#fb923c",fontSize:"10",children:"Tokenizer"}),e.jsx("circle",{className:"tokenizer-gear",cx:"270",cy:"130",r:"15",fill:"none",stroke:"#fb923c",strokeWidth:"2",strokeDasharray:"5,3"})]}),e.jsx("path",{d:"M 325 120 L 360 120",stroke:"#fb923c",strokeWidth:"2",markerEnd:"url(#tokenArrow)"}),["[BOS]","A","cute","cat","[EOS]"].map((t,x)=>e.jsxs("g",{children:[e.jsxs("g",{className:"token-chip",style:{opacity:0},children:[e.jsx("rect",{x:370+x*55,y:"90",width:"50",height:"30",rx:"4",fill:"#8b5cf6",fillOpacity:"0.3",stroke:"#8b5cf6",strokeWidth:"1"}),e.jsx("text",{x:395+x*55,y:"110",textAnchor:"middle",fill:"white",fontSize:"9",children:t})]}),e.jsx("text",{className:"token-id",x:395+x*55,y:"140",textAnchor:"middle",fill:"#fbbf24",fontSize:"9",style:{opacity:0},children:[49406,320,2242,2368,49407][x]})]},x)),e.jsx("path",{d:"M 650 120 L 690 120",stroke:"#a78bfa",strokeWidth:"2",markerEnd:"url(#tokenArrow)"}),e.jsxs("g",{className:"embed-box",style:{opacity:0},children:[e.jsx("rect",{x:"700",y:"80",width:"80",height:"80",rx:"8",fill:"#10b981",fillOpacity:"0.2",stroke:"#10b981",strokeWidth:"2"}),e.jsx("text",{x:"740",y:"110",textAnchor:"middle",fill:"#34d399",fontSize:"10",children:"Embeddings"}),e.jsx("text",{x:"740",y:"130",textAnchor:"middle",fill:"white",fontSize:"9",children:"[5, 768]"}),e.jsx("text",{x:"740",y:"150",textAnchor:"middle",fill:"#94a3b8",fontSize:"8",children:"vectors"})]}),e.jsx("defs",{children:e.jsx("marker",{id:"tokenArrow",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#94a3b8"})})})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-500/10 to-red-500/10 rounded-xl p-6 border border-orange-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400 mb-4",children:"SD3's Three Tokenizers"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2",children:"CLIP-L Tokenizer"}),e.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ BPE algorithm"}),e.jsx("li",{children:"‚Ä¢ ~49,000 vocabulary"}),e.jsx("li",{children:"‚Ä¢ Max 77 tokens"}),e.jsx("li",{children:"‚Ä¢ [BOS]/[EOS] markers"})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-2",children:"CLIP-G Tokenizer"}),e.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ BPE algorithm"}),e.jsx("li",{children:"‚Ä¢ ~49,000 vocabulary"}),e.jsx("li",{children:"‚Ä¢ Max 77 tokens"}),e.jsx("li",{children:"‚Ä¢ Same as CLIP-L"})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-green-400 mb-2",children:"T5 Tokenizer"}),e.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ SentencePiece"}),e.jsx("li",{children:"‚Ä¢ ~32,000 vocabulary"}),e.jsx("li",{children:"‚Ä¢ Max 256+ tokens"}),e.jsx("li",{children:"‚Ä¢ ‚ñÅ word markers"})]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 border border-white/10",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"üéØ Why Subword Tokenization?"}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Word-level tokenization can't handle new words. Character-level is too fine-grained.",e.jsx("strong",{children:" Subword tokenization"})," balances both: common words stay whole, rare words split into meaningful pieces."]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 border border-white/10",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"üìä Token vs Word"}),e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:['"photorealistic" ‚Üí ["photo", "real", "istic"] (3 tokens)',e.jsx("br",{}),'"cat" ‚Üí ["cat"] (1 token)',e.jsx("br",{}),'"a" ‚Üí ["a"] (1 token)',e.jsx("br",{}),"Token count ‚â† word count!"]})]})]})]})}function K(){const[r,c]=i.useState(0),[l,n]=i.useState(!1),o=i.useRef(null),d=[{title:"Start with characters",chars:["l","o","w"," ","l","o","w","e","r"," ","n","e","w","e","s","t"],pairs:[],merged:null,explanation:"Begin with individual characters as initial 'vocabulary'"},{title:"Count pairs",chars:["l","o","w"," ","l","o","w","e","r"," ","n","e","w","e","s","t"],pairs:[{pair:"lo",count:2},{pair:"ow",count:2},{pair:"we",count:2}],merged:null,explanation:"Find the most frequent adjacent pairs: 'lo' appears 2 times"},{title:"Merge most frequent",chars:["lo","w"," ","lo","w","e","r"," ","n","e","w","e","s","t"],pairs:[{pair:"lo",count:2,merged:!0}],merged:"lo",explanation:"Merge 'l' + 'o' ‚Üí 'lo' everywhere in the corpus"},{title:"Repeat: count new pairs",chars:["lo","w"," ","lo","w","e","r"," ","n","e","w","e","s","t"],pairs:[{pair:"low",count:2},{pair:"we",count:2}],merged:null,explanation:"Now 'low' appears twice (lo+w)"},{title:"Merge again",chars:["low"," ","low","e","r"," ","n","e","w","e","s","t"],pairs:[{pair:"low",count:2,merged:!0}],merged:"low",explanation:"Merge 'lo' + 'w' ‚Üí 'low'"},{title:"Continue until vocab size reached",chars:["low"," ","low","er"," ","new","est"],pairs:[],merged:null,explanation:"Keep merging until desired vocabulary size (~49K for CLIP)"}],t=d[r],x=()=>{if(r>=d.length-1){c(0);return}n(!0);const a=setInterval(()=>{c(s=>s>=d.length-1?(clearInterval(a),n(!1),s):s+1)},1500)},h=()=>{c(0),n(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-2",children:"Byte Pair Encoding (BPE)"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 max-w-3xl mx-auto",children:"BPE is a data compression algorithm adapted for tokenization. It iteratively merges the most frequent pairs of characters/subwords until reaching the desired vocabulary size."})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:x,disabled:l,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 disabled:opacity-50 rounded-lg transition-colors",children:[e.jsx(f,{size:18}),r===0?"Start BPE":"Continue"]}),e.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(b,{size:18}),"Reset"]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-black/30 rounded-lg",children:[e.jsx("span",{className:"text-gray-800 dark:text-gray-400",children:"Step:"}),e.jsxs("span",{className:"text-orange-600 dark:text-orange-400 font-bold",children:[r+1,"/",d.length]})]})]}),e.jsxs("div",{ref:o,className:"bg-black/40 rounded-xl p-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-orange-600 dark:text-orange-400",children:t.title}),e.jsx("p",{className:"text-gray-800 dark:text-sm mt-1",children:t.explanation})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-3",children:'Current tokenization of "low lower newest":'}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.chars.map((a,s)=>e.jsx("div",{className:`px-3 py-2 rounded-lg font-mono text-sm transition-all ${a===t.merged?"bg-orange-500/50 text-orange-200 border-2 border-orange-400 scale-110":a.length>1?"bg-purple-500/30 text-purple-300 border border-purple-500/50":a===" "?"bg-gray-700/50 text-gray-800 dark:text-gray-400 border border-gray-600":"bg-blue-500/30 text-blue-300 border border-blue-500/50"}`,children:a===" "?"‚éµ":a},s))})]}),t.pairs.length>0&&e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-3",children:"Most frequent pairs:"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:t.pairs.map((a,s)=>e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${a.merged?"bg-green-500/30 border-2 border-green-400":"bg-gray-700/50 border border-gray-600"}`,children:[e.jsxs("span",{className:`font-mono ${a.merged?"text-green-300":"text-white"}`,children:['"',a.pair,'"']}),e.jsx("span",{className:"text-gray-800 dark:text-gray-400",children:"√ó"}),e.jsx("span",{className:a.merged?"text-green-400 font-bold":"text-orange-400",children:a.count}),a.merged&&e.jsx(F,{size:16,className:"text-green-400"})]},s))})]}),t.merged&&e.jsxs("div",{className:"flex items-center justify-center gap-4 py-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-1",children:"Before"}),e.jsx("div",{className:"flex gap-1",children:t.merged.split("").map((a,s)=>e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-blue-300 font-mono",children:a},s))})]}),e.jsx(A,{className:"text-green-400",size:24}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-1",children:"After"}),e.jsx("span",{className:"px-3 py-1 bg-green-500/30 rounded text-green-300 font-mono border-2 border-green-400",children:t.merged})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-500/10 to-red-500/10 rounded-xl p-6 border border-orange-500/30",children:[e.jsx("h3",{className:"font-semibold text-orange-600 dark:text-orange-400 mb-4",children:"üìù BPE Algorithm"}),e.jsxs("div",{className:"bg-black/40 rounded-lg p-4 font-mono text-sm",children:[e.jsx("div",{className:"text-gray-800 dark:text-gray-400",children:"# Pseudocode"}),e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:"def"}),e.jsx("span",{className:"text-yellow-400",children:" train_bpe"}),e.jsx("span",{className:"text-white",children:"(corpus, vocab_size):"}),e.jsxs("div",{className:"ml-4 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{children:"vocab = set(all_characters(corpus))"}),e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:"while"}),e.jsx("span",{className:"text-white",children:" len(vocab) < vocab_size:"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{children:"pairs = count_pairs(corpus)"}),e.jsx("div",{children:"best_pair = most_frequent(pairs)"}),e.jsx("div",{children:"merge(corpus, best_pair)"}),e.jsx("div",{children:"vocab.add(best_pair)"})]}),e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:"return"}),e.jsx("span",{className:"text-white",children:" vocab"})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-500/10 rounded-lg p-4 border border-blue-500/30",children:[e.jsx("h4",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-2",children:"Deterministic"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Same text always produces same tokens. Essential for reproducibility."})]}),e.jsxs("div",{className:"bg-purple-500/10 rounded-lg p-4 border border-purple-500/30",children:[e.jsx("h4",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-2",children:"Frequency-based"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Common words become single tokens. Rare words split into pieces."})]}),e.jsxs("div",{className:"bg-green-500/10 rounded-lg p-4 border border-green-500/30",children:[e.jsx("h4",{className:"font-semibold text-green-400 mb-2",children:"Open Vocabulary"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Can encode ANY text - unknown words split into known subwords."})]})]})]})}function Q(){const[r,c]=i.useState(""),[l,n]=i.useState(!0),d=[{id:49406,token:"<|startoftext|>",type:"special",desc:"Beginning of sequence"},{id:49407,token:"<|endoftext|>",type:"special",desc:"End of sequence"},{id:0,token:"!",type:"punctuation",desc:"Exclamation mark"},{id:256,token:"the</w>",type:"word",desc:"Common word"},{id:257,token:"a</w>",type:"word",desc:"Common word"},{id:320,token:"a",type:"subword",desc:"Subword unit"},{id:2368,token:"cat</w>",type:"word",desc:"Animal"},{id:1929,token:"dog</w>",type:"word",desc:"Animal"},{id:4044,token:"beautiful</w>",type:"word",desc:"Adjective"},{id:8619,token:"photo",type:"subword",desc:"Part of photorealistic"},{id:13440,token:"real",type:"subword",desc:"Part of photorealistic"},{id:2928,token:"istic</w>",type:"subword",desc:"Suffix"},{id:7270,token:"sunset</w>",type:"word",desc:"Time/scene"},{id:5765,token:"painting</w>",type:"word",desc:"Art style"},{id:1912,token:"style</w>",type:"word",desc:"Descriptor"}].filter(t=>!l&&t.type==="special"?!1:r?t.token.toLowerCase().includes(r.toLowerCase())||t.id.toString().includes(r):!0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-2",children:"Understanding Vocabulary"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 max-w-3xl mx-auto",children:"A tokenizer's vocabulary maps tokens (strings) to unique integer IDs. CLIP uses ~49,000 tokens; T5 uses ~32,000. Let's explore what's inside."})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-500/10 rounded-xl p-4 text-center border border-blue-500/30",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:"49,408"}),e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400",children:"CLIP Vocab Size"})]}),e.jsxs("div",{className:"bg-green-500/10 rounded-xl p-4 text-center border border-green-500/30",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:"32,100"}),e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400",children:"T5 Vocab Size"})]}),e.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 text-center border border-purple-500/30",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:"2"}),e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Special Tokens"})]}),e.jsxs("div",{className:"bg-orange-500/10 rounded-xl p-4 text-center border border-orange-500/30",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:"~40K"}),e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Subword Tokens"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-800 dark:text-gray-400",size:18}),e.jsx("input",{type:"text",value:r,onChange:t=>c(t.target.value),placeholder:"Search tokens or IDs...",className:"w-full pl-10 pr-4 py-3 bg-black/30 border border-white/20 rounded-lg text-white focus:outline-none focus:border-orange-500"})]}),e.jsxs("label",{className:"flex items-center gap-2 px-4 py-2 bg-black/30 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:t=>n(t.target.checked),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-sm",children:"Show special tokens"})]})]}),e.jsx("div",{className:"bg-black/40 rounded-xl overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10 bg-black/40",children:[e.jsx("th",{className:"text-left py-3 px-4 text-gray-800 dark:text-gray-400",children:"ID"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-800 dark:text-gray-400",children:"Token"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-800 dark:text-gray-400",children:"Type"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-800 dark:text-gray-400",children:"Description"})]})}),e.jsx("tbody",{children:d.map((t,x)=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5",children:[e.jsx("td",{className:"py-3 px-4 font-mono text-yellow-400",children:t.id}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("code",{className:`px-2 py-1 rounded ${t.type==="special"?"bg-red-500/30 text-red-300":t.type==="word"?"bg-green-500/30 text-green-300":t.type==="subword"?"bg-blue-500/30 text-blue-300":"bg-gray-500/30 text-gray-700 dark:text-gray-300"}`,children:t.token})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${t.type==="special"?"bg-red-500/20 text-red-400":t.type==="word"?"bg-green-500/20 text-green-400":t.type==="subword"?"bg-blue-500/20 text-blue-600 dark:text-blue-400":"bg-gray-500/20 text-gray-800 dark:text-gray-400"}`,children:t.type})}),e.jsx("td",{className:"py-3 px-4 text-gray-800 dark:text-gray-400",children:t.desc})]},x))})]})})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 rounded-xl p-6 border border-red-500/30",children:[e.jsxs("h3",{className:"font-semibold text-red-400 mb-3 flex items-center gap-2",children:[e.jsx(V,{size:18}),"Special Tokens"]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"bg-black/30 rounded p-3",children:[e.jsx("code",{className:"text-red-400",children:"<|startoftext|>"})," (49406)",e.jsx("br",{}),"Marks the beginning of every sequence. Also called [BOS]."]}),e.jsxs("div",{className:"bg-black/30 rounded p-3",children:[e.jsx("code",{className:"text-red-400",children:"<|endoftext|>"})," (49407)",e.jsx("br",{}),"Marks the end. The pooled embedding comes from here."]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-500/10 to-blue-500/10 rounded-xl p-6 border border-green-500/30",children:[e.jsxs("h3",{className:"font-semibold text-green-400 mb-3 flex items-center gap-2",children:[e.jsx(y,{size:18}),"Word vs Subword Tokens"]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"bg-black/30 rounded p-3",children:[e.jsx("code",{className:"text-green-400",children:"cat</w>"}),e.jsx("br",{}),"The ",e.jsx("code",{children:"</w>"}),' suffix means "end of word". This is a complete word.']}),e.jsxs("div",{className:"bg-black/30 rounded p-3",children:[e.jsx("code",{className:"text-blue-600 dark:text-blue-400",children:"photo"}),e.jsx("br",{}),"No suffix = this continues into the next token. Part of a larger word."]})]})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-6 border border-yellow-500/30",children:[e.jsxs("h3",{className:"font-semibold text-yellow-400 mb-3 flex items-center gap-2",children:[e.jsx(D,{size:18}),"The </w> Mystery"]}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-300 space-y-2 text-sm",children:[e.jsxs("p",{children:["In CLIP's vocabulary, ",e.jsx("code",{className:"text-yellow-400",children:"</w>"})," marks word boundaries:"]}),e.jsxs("div",{className:"bg-black/40 rounded p-4 font-mono text-sm",children:[e.jsx("div",{className:"text-gray-800 dark:text-gray-400",children:'# "photorealistic sunset"'}),e.jsx("div",{className:"text-white",children:'["photo", "realistic</w>", "sunset</w>"]'}),e.jsx("br",{}),e.jsx("div",{className:"text-gray-800 dark:text-gray-400",children:"# Meaning:"}),e.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:'"photo" ‚Üí continues to next token'}),e.jsx("div",{className:"text-green-400",children:'"realistic</w>" ‚Üí word ends here'}),e.jsx("div",{className:"text-green-400",children:'"sunset</w>" ‚Üí standalone word'})]}),e.jsx("p",{className:"text-gray-800 dark:text-xs mt-2",children:`This allows reconstructing original spacing. Without it, we couldn't tell "notebook" from "note book".`})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"üî¨ Try These Prompts"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-black/40 rounded p-4",children:[e.jsx("div",{className:"text-orange-600 dark:text-orange-400 mb-2",children:'"a cat"'}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-300",children:["‚Üí [49406, 320, 2368, 49407]",e.jsx("br",{}),'‚Üí [BOS] + "a" + "cat" + [EOS]',e.jsx("br",{}),"= 4 tokens"]})]}),e.jsxs("div",{className:"bg-black/40 rounded p-4",children:[e.jsx("div",{className:"text-orange-600 dark:text-orange-400 mb-2",children:'"photorealistic sunset"'}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-300",children:["‚Üí [49406, 8619, 13440, 2928, 7270, 49407]",e.jsx("br",{}),'‚Üí [BOS] + "photo" + "real" + "istic" + "sunset" + [EOS]',e.jsx("br",{}),"= 6 tokens"]})]})]})]})]})}function G(){const[r,c]=i.useState("clip"),l=i.useRef(null),n="a beautiful sunset over mountains",o={clip:{name:"CLIP",vocabSize:"49,408",maxLength:"77",special:["<|startoftext|>","<|endoftext|>"],method:"Byte-Pair Encoding (BPE)",wordMarker:"</w>",tokens:["<|startoftext|>","a</w>","beautiful</w>","sunset</w>","over</w>","mountains</w>","<|endoftext|>"],ids:[49406,320,4044,7270,962,5765,49407],color:"blue",features:["Trained on web image-text pairs","Optimized for visual concepts","Fixed 77 token context","Single encoder output","Good at object/style descriptions","Lowercase processing"]},t5:{name:"T5 XXL",vocabSize:"32,100",maxLength:"77-256",special:["<pad>","</s>"],method:"SentencePiece",wordMarker:"‚ñÅ (underscore prefix)",tokens:["‚ñÅa","‚ñÅbeautiful","‚ñÅsun","set","‚ñÅover","‚ñÅmountain","s"],ids:[3,1804,1135,2244,147,8071,7],color:"green",features:["Trained on C4 text corpus","Better at complex descriptions","Variable context length","4096 tokens max (SD3)","Full NLP understanding","Case sensitive"]}},d=o[r];return i.useEffect(()=>{l.current&&u.fromTo(l.current.querySelectorAll(".token-item"),{opacity:0,y:10},{opacity:1,y:0,duration:.3,stagger:.05})},[r]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-2",children:"CLIP vs T5 Tokenization"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 max-w-3xl mx-auto",children:"SD3 uses both CLIP and T5 text encoders. Each tokenizes text differently, creating complementary text representations."})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>c("clip"),className:`px-6 py-3 rounded-xl font-semibold transition-all ${r==="clip"?"bg-blue-500 text-white":"bg-black/30 text-gray-800 dark:text-gray-400 hover:text-white"}`,children:"CLIP Tokenizer"}),e.jsx("button",{onClick:()=>c("t5"),className:`px-6 py-3 rounded-xl font-semibold transition-all ${r==="t5"?"bg-green-500 text-white":"bg-black/30 text-gray-800 dark:text-gray-400 hover:text-white"}`,children:"T5 Tokenizer"})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-gray-800 dark:text-sm mb-1",children:"Input Text"}),e.jsxs("div",{className:"text-xl text-white font-mono",children:['"',n,'"']})]}),e.jsxs("div",{ref:l,className:`bg-gradient-to-r ${r==="clip"?"from-blue-500/10 to-cyan-500/10 border-blue-500/30":"from-green-500/10 to-emerald-500/10 border-green-500/30"} rounded-xl p-6 border`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:`font-semibold ${r==="clip"?"text-blue-400":"text-green-400"}`,children:[d.name," Tokenization"]}),e.jsxs("span",{className:"text-gray-800 dark:text-sm",children:[d.tokens.length," tokens"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:d.tokens.map((t,x)=>e.jsxs("div",{className:`token-item flex flex-col items-center px-3 py-2 rounded-lg ${r==="clip"?"bg-blue-500/20":"bg-green-500/20"}`,children:[e.jsx("code",{className:`text-sm ${r==="clip"?"text-blue-300":"text-green-300"}`,children:t}),e.jsx("span",{className:"text-xs text-gray-700 dark:text-gray-500 mt-1",children:d.ids[x]})]},x))}),e.jsxs("div",{className:"text-xs text-gray-800 dark:text-gray-400 bg-black/30 rounded p-2",children:["Word boundary marker: ",e.jsx("code",{className:r==="clip"?"text-blue-400":"text-green-400",children:d.wordMarker})]})]}),e.jsx("div",{className:"bg-black/40 rounded-xl overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left py-3 px-4 text-gray-800 dark:text-gray-400",children:"Feature"}),e.jsx("th",{className:"text-left py-3 px-4 text-blue-600 dark:text-blue-400",children:"CLIP"}),e.jsx("th",{className:"text-left py-3 px-4 text-green-400",children:"T5"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"Vocab Size"}),e.jsx("td",{className:"py-3 px-4 text-blue-300 font-mono",children:"49,408"}),e.jsx("td",{className:"py-3 px-4 text-green-300 font-mono",children:"32,100"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"Max Length"}),e.jsx("td",{className:"py-3 px-4 text-blue-300 font-mono",children:"77"}),e.jsx("td",{className:"py-3 px-4 text-green-300 font-mono",children:"77-256"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"Method"}),e.jsx("td",{className:"py-3 px-4 text-blue-300",children:"BPE"}),e.jsx("td",{className:"py-3 px-4 text-green-300",children:"SentencePiece"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"Start Token"}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("code",{className:"text-blue-600 dark:text-blue-400 bg-blue-500/20 px-2 py-1 rounded",children:"<|startoftext|>"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-gray-700 dark:text-gray-500",children:"None (implicit)"})})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"End Token"}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("code",{className:"text-blue-600 dark:text-blue-400 bg-blue-500/20 px-2 py-1 rounded",children:"<|endoftext|>"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("code",{className:"text-green-400 bg-green-500/20 px-2 py-1 rounded",children:"</s>"})})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:"Case"}),e.jsx("td",{className:"py-3 px-4 text-blue-300",children:"lowercase"}),e.jsx("td",{className:"py-3 px-4 text-green-300",children:"preserved"})]})]})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-500/10 rounded-xl p-5 border border-blue-500/30",children:[e.jsxs("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-4 flex items-center gap-2",children:[e.jsx(k,{size:18})," CLIP Strengths"]}),e.jsx("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:o.clip.features.map((t,x)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400 mt-0.5",children:"‚Ä¢"}),t]},x))})]}),e.jsxs("div",{className:"bg-green-500/10 rounded-xl p-5 border border-green-500/30",children:[e.jsxs("h3",{className:"font-semibold text-green-400 mb-4 flex items-center gap-2",children:[e.jsx(k,{size:18})," T5 Strengths"]}),e.jsx("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:o.t5.features.map((t,x)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400 mt-0.5",children:"‚Ä¢"}),t]},x))})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-xl p-6 border border-purple-500/30",children:[e.jsx("h3",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-3",children:"Why Use Both?"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-medium mb-1",children:"CLIP"}),e.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:'Strong visual grounding from image-text pairs. Knows "cyberpunk" = neon, rain, tech aesthetic.'})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-green-400 font-medium mb-1",children:"T5"}),e.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:"Deep language understanding from massive text corpus. Parses complex prompts with spatial relationships."})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"text-purple-600 dark:text-purple-400 font-medium mb-1",children:"Together"}),e.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:"SD3 concatenates both embeddings. Gets visual vocabulary + linguistic sophistication."})]})]})]})]})}function H(){const[r,c]=i.useState(!1),[l,n]=i.useState(0),o=i.useRef(null);i.useRef(null);const d="a cat sitting on a couch",t=[{id:0,title:"Input Text",description:"Raw prompt enters the pipeline",visual:"text",data:d},{id:1,title:"Preprocessing",description:"Lowercase conversion and normalization",visual:"preprocess",data:d.toLowerCase()},{id:2,title:"BPE Tokenization",description:"Split into subword tokens",visual:"tokens",data:["a</w>","cat</w>","sitting</w>","on</w>","a</w>","couch</w>"]},{id:3,title:"Add Special Tokens",description:"Wrap with start and end tokens",visual:"special",data:["<|startoftext|>","a</w>","cat</w>","sitting</w>","on</w>","a</w>","couch</w>","<|endoftext|>"]},{id:4,title:"Token ‚Üí ID",description:"Look up each token in vocabulary",visual:"ids",data:[49406,320,2368,4919,529,320,3725,49407]},{id:5,title:"Padding",description:"Pad to fixed length (77 tokens)",visual:"padded",data:{ids:[49406,320,2368,4919,529,320,3725,49407],padded:69}},{id:6,title:"Ready for Encoder",description:"Token IDs ready for embedding lookup",visual:"final",data:"Shape: [1, 77] ‚Üí Embedding [1, 77, 768]"}];i.useEffect(()=>{if(r&&l<t.length-1){const a=setTimeout(()=>{n(s=>s+1)},1500);return()=>clearTimeout(a)}else l>=t.length-1&&c(!1)},[r,l]),i.useEffect(()=>{o.current&&u.fromTo(".step-content",{opacity:0,x:20},{opacity:1,x:0,duration:.4})},[l]);const x=()=>{c(!1),n(0)},h=()=>{const a=t[l];switch(a.visual){case"text":return e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-2",children:"Raw Text Input"}),e.jsxs("div",{className:"text-2xl text-white font-mono bg-black/40 px-6 py-4 rounded-lg inline-block",children:['"',a.data,'"']})]});case"preprocess":return e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-2",children:"After Preprocessing"}),e.jsxs("div",{className:"text-2xl text-orange-300 font-mono bg-black/40 px-6 py-4 rounded-lg inline-block",children:['"',a.data,'"']}),e.jsx("div",{className:"mt-2 text-xs text-gray-700 dark:text-gray-500",children:"Converted to lowercase"})]});case"tokens":return e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-4",children:"BPE Tokens"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:a.data.map((s,m)=>e.jsx("span",{className:"px-3 py-2 bg-blue-500/20 text-blue-300 rounded-lg font-mono text-sm",children:s},m))})]});case"special":return e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-4",children:"With Special Tokens"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:a.data.map((s,m)=>e.jsx("span",{className:`px-3 py-2 rounded-lg font-mono text-sm ${s.includes("|")?"bg-red-500/20 text-red-300":"bg-blue-500/20 text-blue-300"}`,children:s},m))})]});case"ids":return e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-4",children:"Token IDs"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:a.data.map((s,m)=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:`px-3 py-2 rounded-lg font-mono text-sm ${s===49406||s===49407?"bg-red-500/20 text-red-300":"bg-yellow-500/20 text-yellow-300"}`,children:s}),e.jsxs("span",{className:"text-xs text-gray-700 dark:text-gray-500 mt-1",children:["[",m,"]"]})]},m))})]});case"padded":return e.jsxs("div",{className:"text-center p-6",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-4",children:"Padded Sequence (77 tokens)"}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-1",children:[a.data.ids.map((s,m)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs font-mono ${s===49406||s===49407?"bg-red-500/30 text-red-300":"bg-yellow-500/30 text-yellow-300"}`,children:s},m)),e.jsxs("span",{className:"px-2 py-1 rounded text-xs font-mono bg-gray-500/30 text-gray-800 dark:text-gray-400",children:["+ ",a.data.padded," √ó 49407"]})]}),e.jsxs("div",{className:"mt-4 text-xs text-gray-700 dark:text-gray-500",children:[a.data.ids.length," actual tokens + ",a.data.padded," padding tokens = 77 total"]})]});case"final":return e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-4",children:"Ready for Text Encoder"}),e.jsx("div",{className:"text-xl text-green-300 font-mono bg-green-500/10 px-6 py-4 rounded-lg inline-block border border-green-500/30",children:a.data}),e.jsx("div",{className:"mt-4 text-sm text-gray-800 dark:text-gray-400",children:"Each token ID will be looked up in embedding table"})]});default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-2",children:"Tokenization Pipeline"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 max-w-3xl mx-auto",children:"Watch the complete tokenization process from raw text to encoder-ready token IDs."})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:()=>c(!r),className:"flex items-center gap-2 px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-xl transition-colors",children:[r?e.jsx(z,{size:18}):e.jsx(f,{size:18}),r?"Pause":"Play"]}),e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-6 py-3 bg-black/30 hover:bg-black/50 text-white rounded-xl transition-colors",children:[e.jsx(b,{size:18}),"Reset"]})]}),e.jsx("div",{className:"flex justify-between items-center bg-black/30 rounded-xl p-4 overflow-x-auto",children:t.map((a,s)=>e.jsxs(L.Fragment,{children:[e.jsxs("button",{onClick:()=>{n(s),c(!1)},className:`flex flex-col items-center min-w-[80px] p-2 rounded-lg transition-all ${s===l?"bg-orange-500/20":"hover:bg-white/5"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${s<l?"bg-green-500 text-white":s===l?"bg-orange-500 text-white":"bg-gray-700 text-gray-800 dark:text-gray-400"}`,children:s+1}),e.jsx("div",{className:`text-xs mt-1 text-center ${s===l?"text-orange-400":"text-gray-500"}`,children:a.title})]}),s<t.length-1&&e.jsx(S,{size:16,className:`flex-shrink-0 ${s<l?"text-green-500":"text-gray-600"}`})]},a.id))}),e.jsx("div",{ref:o,className:"bg-black/40 rounded-xl p-6",children:e.jsxs("div",{className:"step-content",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-orange-600 dark:text-orange-400",children:["Step ",l+1,": ",t[l].title]}),e.jsx("p",{className:"text-gray-800 dark:text-sm",children:t[l].description})]}),h()]})}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-6",children:[e.jsx("h3",{className:"text-gray-700 dark:text-gray-300 font-semibold mb-4",children:"Complete Pipeline Code"}),e.jsx("div",{className:"bg-black/60 rounded-lg p-4 font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"text-gray-700 dark:text-gray-300",children:`# Full CLIP tokenization pipeline
def tokenize(text: str, max_length: int = 77) -> List[int]:
    # 1. Preprocess
    text = text.lower().strip()
    
    # 2. BPE tokenization
    tokens = bpe_encode(text)
    
    # 3. Add special tokens
    tokens = [START_TOKEN] + tokens + [END_TOKEN]
    
    # 4. Convert to IDs
    token_ids = [vocab[t] for t in tokens]
    
    # 5. Pad or truncate to max_length
    if len(token_ids) > max_length:
        token_ids = token_ids[:max_length-1] + [END_TOKEN_ID]
    else:
        token_ids += [END_TOKEN_ID] * (max_length - len(token_ids))
    
    return token_ids  # Shape: [77]`})})]})]})}function Y(){const[r,c]=i.useState(0),[l,n]=i.useState(null),[o,d]=i.useState(!1),[t,x]=i.useState(0),[h,a]=i.useState(!1),s=[{question:"What is Byte-Pair Encoding (BPE)?",options:["A compression algorithm for images","A subword tokenization method that merges frequent character pairs","A way to encrypt text data","A method to count word frequencies"],correct:1,explanation:"BPE iteratively merges the most frequent adjacent pairs of characters/tokens, building a vocabulary of subword units."},{question:"Why does CLIP's vocabulary contain the '</w>' marker?",options:["To indicate errors in tokenization","To mark word boundaries (end of word)","To represent whitespace","To indicate numbers"],correct:1,explanation:"The '</w>' suffix marks the end of a word, allowing reconstruction of original spacing and distinguishing 'notebook' from 'note book'."},{question:"What is CLIP's maximum token context length?",options:["512 tokens","256 tokens","77 tokens","4096 tokens"],correct:2,explanation:"CLIP has a fixed context of 77 tokens (75 text + BOS + EOS), which limits detailed prompts but works well for image-text alignment."},{question:"How does T5's tokenization differ from CLIP's?",options:["T5 uses word-level only","T5 uses SentencePiece with underscore prefix for word starts","T5 doesn't use special tokens","T5 has a smaller vocabulary"],correct:1,explanation:"T5 uses SentencePiece which marks word boundaries with a '‚ñÅ' prefix at the START of words, unlike CLIP's '</w>' suffix at the END."},{question:"What happens when a token sequence exceeds max_length?",options:["It causes an error","Extra tokens are ignored","The sequence is truncated and EOS is added at the end","The vocabulary expands automatically"],correct:2,explanation:"Sequences are truncated to fit, with the end-of-sequence token placed at the final position to properly terminate the sequence."},{question:"Why does SD3 use both CLIP and T5 tokenizers?",options:["For redundancy in case one fails","CLIP has visual grounding, T5 has better language understanding","To double the vocabulary size","T5 is faster than CLIP"],correct:1,explanation:"CLIP provides visual concept understanding from image-text training, while T5 offers sophisticated NLP capabilities for complex prompts."},{question:"What is the purpose of the <|startoftext|> token?",options:["To mark paragraph breaks","To signal the beginning of a tokenized sequence","To indicate the prompt is a question","To separate multiple prompts"],correct:1,explanation:"The start-of-text (BOS) token marks sequence boundaries, helping the model understand where input begins."},{question:"How are unknown words handled in BPE tokenization?",options:["They are replaced with [UNK]","They cause tokenization to fail","They are broken into known subword pieces","They are removed from the text"],correct:2,explanation:"BPE can tokenize ANY word by falling back to individual characters. 'Supercalifragilistic' becomes multiple subword tokens that exist in the vocabulary."}],m=p=>{o||(n(p),d(!0),p===s[r].correct&&x(t+1))},P=()=>{n(null),d(!1),c(r+1)},C=()=>{c(0),n(null),d(!1),x(0),a(!1)},E=r>=s.length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400 mb-2",children:"Practice Lab"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Test your understanding of diffusion model tokenization"})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>a(!1),className:`px-6 py-3 rounded-xl font-semibold transition-all ${h?"bg-black/30 text-gray-800 dark:text-gray-400 hover:text-white":"bg-orange-500 text-white"}`,children:"Quiz"}),e.jsx("button",{onClick:()=>a(!0),className:`px-6 py-3 rounded-xl font-semibold transition-all ${h?"bg-orange-500 text-white":"bg-black/30 text-gray-800 dark:text-gray-400 hover:text-white"}`,children:"Code Exercises"})]}),h?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-black/40 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(j,{className:"text-orange-600 dark:text-orange-400",size:20}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Exercise 1: Simple Tokenizer"})]}),e.jsx("p",{className:"text-gray-800 dark:text-sm mb-4",children:"Implement a basic character-level tokenizer with special tokens:"}),e.jsx("div",{className:"bg-black/60 rounded-lg p-4 font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"text-gray-700 dark:text-gray-300",children:`class SimpleTokenizer:
    def __init__(self):
        # Build character vocabulary a-z, space
        self.vocab = {chr(i): i - ord('a') for i in range(ord('a'), ord('z') + 1)}
        self.vocab[' '] = 26
        self.vocab['<START>'] = 27
        self.vocab['<END>'] = 28
        self.vocab['<PAD>'] = 29
    
    def encode(self, text: str, max_length: int = 20) -> list:
        # TODO: Implement tokenization
        # 1. Convert to lowercase
        # 2. Add START token
        # 3. Convert each character to ID
        # 4. Add END token  
        # 5. Pad to max_length
        pass

# Test
tokenizer = SimpleTokenizer()
print(tokenizer.encode("hello"))
# Expected: [27, 7, 4, 11, 11, 14, 28, 29, 29, ...]`})})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(j,{className:"text-orange-600 dark:text-orange-400",size:20}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Exercise 2: BPE Merge"})]}),e.jsx("p",{className:"text-gray-800 dark:text-sm mb-4",children:"Implement one step of BPE merging:"}),e.jsx("div",{className:"bg-black/60 rounded-lg p-4 font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"text-gray-700 dark:text-gray-300",children:`def bpe_merge(tokens: list, pair: tuple) -> list:
    """
    Merge all occurrences of pair in tokens.
    
    Example:
    tokens = ['l', 'o', 'w', '</w>', 'l', 'o', 'w', 'e', 'r', '</w>']
    pair = ('l', 'o')
    result = ['lo', 'w', '</w>', 'lo', 'w', 'e', 'r', '</w>']
    """
    # TODO: Implement
    # Scan through tokens, merge adjacent pairs
    result = []
    i = 0
    while i < len(tokens):
        # Your code here
        pass
    return result

# Test
tokens = ['l', 'o', 'w', '</w>', 'l', 'o', 'w', 'e', 'r', '</w>']
print(bpe_merge(tokens, ('l', 'o')))`})})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(j,{className:"text-orange-600 dark:text-orange-400",size:20}),e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Exercise 3: Count Pairs"})]}),e.jsx("p",{className:"text-gray-800 dark:text-sm mb-4",children:"Count adjacent token pairs (needed for BPE training):"}),e.jsx("div",{className:"bg-black/60 rounded-lg p-4 font-mono text-sm overflow-x-auto",children:e.jsx("pre",{className:"text-gray-700 dark:text-gray-300",children:`from collections import Counter

def count_pairs(tokens: list) -> Counter:
    """
    Count frequency of adjacent pairs.
    
    Example:
    tokens = ['t', 'h', 'e', '</w>', 't', 'h', 'e', 'r', 'e', '</w>']
    result = Counter({('t', 'h'): 2, ('h', 'e'): 2, ('e', '</w>'): 1, ...})
    """
    # TODO: Implement
    pass

# Test
tokens = ['t', 'h', 'e', '</w>', 't', 'h', 'e', 'r', 'e', '</w>']
pairs = count_pairs(tokens)
print(pairs.most_common(3))`})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-xl p-6 border border-purple-500/30",children:[e.jsxs("h3",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-3 flex items-center gap-2",children:[e.jsx(N,{size:18}),"Solution Hints"]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Exercise 1:"})," Use list comprehension with ",e.jsx("code",{children:"self.vocab.get(c, 29)"})," for unknown chars"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Exercise 2:"})," Check if ",e.jsx("code",{children:"tokens[i:i+2] == list(pair)"}),", merge if true, else append single token"]}),e.jsxs("li",{children:["‚Ä¢ ",e.jsx("strong",{children:"Exercise 3:"})," Use ",e.jsx("code",{children:"zip(tokens, tokens[1:])"})," to get adjacent pairs"]})]})]})]}):e.jsx("div",{className:"bg-black/40 rounded-xl p-6",children:E?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(W,{size:64,className:"mx-auto text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Quiz Complete!"}),e.jsxs("p",{className:"text-4xl font-bold text-orange-600 dark:text-orange-400 mb-4",children:[t," / ",s.length]}),e.jsx("p",{className:"text-gray-800 dark:text-gray-400 mb-6",children:t===s.length?"Perfect score! You're a tokenization expert!":t>=s.length*.7?"Great job! You understand tokenization well.":"Keep learning! Review the concepts and try again."}),e.jsxs("button",{onClick:C,className:"flex items-center gap-2 px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-xl transition-colors mx-auto",children:[e.jsx(b,{size:18})," Try Again"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("span",{className:"text-gray-800 dark:text-gray-400",children:["Question ",r+1," of ",s.length]}),e.jsxs("span",{className:"text-orange-600 dark:text-orange-400 font-semibold",children:["Score: ",t,"/",s.length]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl text-white mb-6",children:s[r].question}),e.jsx("div",{className:"space-y-3",children:s[r].options.map((p,g)=>e.jsx("button",{onClick:()=>m(g),disabled:o,className:`w-full text-left p-4 rounded-lg transition-all ${o?g===s[r].correct?"bg-green-500/20 border border-green-500":g===l?"bg-red-500/20 border border-red-500":"bg-black/30 border border-transparent":"bg-black/30 hover:bg-black/50 border border-transparent hover:border-orange-500/50"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm ${o&&g===s[r].correct?"bg-green-500 text-white":o&&g===l?"bg-red-500 text-white":"bg-gray-700 text-gray-700 dark:text-gray-300"}`,children:String.fromCharCode(65+g)}),e.jsx("span",{className:"text-gray-200",children:p}),o&&g===s[r].correct&&e.jsx(R,{className:"ml-auto text-green-400",size:20}),o&&g===l&&g!==s[r].correct&&e.jsx(O,{className:"ml-auto text-red-400",size:20})]})},g))})]}),o&&e.jsx("div",{className:`p-4 rounded-lg mb-6 ${l===s[r].correct?"bg-green-500/10 border border-green-500/30":"bg-red-500/10 border border-red-500/30"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(N,{size:18,className:l===s[r].correct?"text-green-400":"text-red-400"}),e.jsx("p",{className:"text-gray-700 dark:text-sm",children:s[r].explanation})]})}),o&&e.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-xl transition-colors",children:["Next Question ",e.jsx(S,{size:18})]})]})})]})}const U=[{id:"overview",label:"Overview",icon:y},{id:"bpe",label:"BPE Algorithm",icon:T},{id:"vocabulary",label:"Vocabulary",icon:_},{id:"comparison",label:"CLIP vs T5",icon:M},{id:"pipeline",label:"Full Pipeline",icon:B},{id:"practice",label:"Practice Lab",icon:$}];function ce(){const[r,c]=i.useState("overview"),l=()=>{switch(r){case"overview":return e.jsx(w,{});case"bpe":return e.jsx(K,{});case"vocabulary":return e.jsx(Q,{});case"comparison":return e.jsx(G,{});case"pipeline":return e.jsx(H,{});case"practice":return e.jsx(Y,{});default:return e.jsx(w,{})}};return e.jsx("div",{className:"text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:U.map((n,o)=>{const d=n.icon;return e.jsxs("button",{onClick:()=>c(n.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${r===n.id?"bg-gradient-to-r from-orange-600 to-red-600 text-white shadow-lg shadow-orange-500/25":"bg-white/10 text-gray-700 dark:text-gray-300 hover:bg-white/20"}`,children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-white/20 flex items-center justify-center text-xs font-bold",children:o+1}),e.jsx(d,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:n.label})]},n.id)})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-6",children:l()})]})})}export{ce as default};
