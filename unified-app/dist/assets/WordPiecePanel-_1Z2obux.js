import{r as m,j as e,x as g,L as f}from"./index-CsxpOLHd.js";import{g as j}from"./index-C8pce-KX.js";import{R as N}from"./rotate-ccw-xVnQluc9.js";import{C as v}from"./chevron-left-qHzaZS-I.js";import{P as y}from"./pause-BMcOX1vk.js";import{P as w}from"./play-CIyTSByC.js";const k=(x,h)=>{const o=[];return x.split(/\s+/).forEach(l=>{const a=[];let s=l;const c=[];let d=!0;for(a.push({action:"start",word:l,remaining:s,tokens:[],description:`Processing word: "${l}"`});s.length>0;){let i=!1;for(let n=s.length;n>0;n--){const t=d?s.slice(0,n):"##"+s.slice(0,n),r=s.slice(0,n);if(h.includes(t)||h.includes(r)){const b=d?r:"##"+r;c.push(b),a.push({action:"match",word:l,tried:t,matched:b,remaining:s.slice(n),tokens:[...c],description:`Found "${b}" in vocabulary`}),s=s.slice(n),d=!1,i=!0;break}}i||(d?s[0]:""+s[0],c.push("[UNK]"),a.push({action:"unknown",word:l,tried:s,remaining:s.slice(1),tokens:[...c],description:`No match found, using [UNK] for "${s[0]}"`}),s=s.slice(1),d=!1)}a.push({action:"complete",word:l,tokens:c,remaining:"",description:`Complete: "${l}" → [${c.join(", ")}]`}),o.push(...a)}),o},p=["the","a","an","is","are","was","were","be","been","being","have","has","had","do","does","did","will","would","could","should","un","happy","happi","play","learn","token","ization","embed","##ing","##ed","##er","##est","##ly","##ness","##ment","##tion","##ize","##s","##es","##ful","##less","##able","##ible","##al","##ial","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","##a","##b","##c","##d","##e","##f","##g","##h","##i","##j","##k","##l","##m","##n","##o","##p","##q","##r","##s","##t","##u","##v","##w","##x","##y","##z"];function T(){var n;const[x,h]=m.useState("unhappiness playing"),[o,u]=m.useState([]),[l,a]=m.useState(0),[s,c]=m.useState(!1),d=m.useRef(null);m.useEffect(()=>{const t=k(x.toLowerCase(),p);u(t),a(0)},[x]),m.useEffect(()=>{if(!s)return;const t=setInterval(()=>{a(r=>r>=o.length-1?(c(!1),r):r+1)},1500);return()=>clearInterval(t)},[s,o.length]),m.useEffect(()=>{d.current&&j.fromTo(d.current,{opacity:0,y:10},{opacity:1,y:0,duration:.3})},[l]);const i=o[l]||{};return e.jsx("div",{className:"p-8 h-full",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-indigo-900 mb-2",children:"WordPiece Tokenization"}),e.jsx("p",{className:"text-slate-600",children:"Used by BERT - greedy longest-match-first algorithm"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Text to tokenize:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:x,onChange:t=>h(t.target.value),className:"flex-1 p-3 border-2 border-slate-200 rounded-lg focus:border-indigo-500",placeholder:"Enter text to tokenize..."}),e.jsx("div",{className:"flex gap-1",children:["unhappiness playing","tokenization is fun","embeddings learned"].map(t=>e.jsxs("button",{onClick:()=>h(t),className:"px-3 py-1 text-xs bg-slate-100 rounded-lg hover:bg-slate-200 whitespace-nowrap",children:[t.slice(0,12),"..."]},t))})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>a(0),className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200",children:e.jsx(N,{size:20})}),e.jsx("button",{onClick:()=>a(Math.max(0,l-1)),disabled:l===0,className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200 disabled:opacity-50",children:e.jsx(v,{size:20})}),e.jsx("button",{onClick:()=>c(!s),className:`px-6 py-2 rounded-lg font-bold ${s?"bg-red-500 text-white":"bg-indigo-600 text-white"}`,children:s?e.jsx(y,{size:20}):e.jsx(w,{size:20})}),e.jsx("button",{onClick:()=>a(Math.min(o.length-1,l+1)),disabled:l===o.length-1,className:"p-2 rounded-lg bg-slate-100 hover:bg-slate-200 disabled:opacity-50",children:e.jsx(g,{size:20})}),e.jsxs("span",{className:"text-sm text-slate-600",children:["Step ",l+1," / ",o.length]})]}),e.jsxs("div",{ref:d,className:"bg-slate-50 rounded-xl p-6 mb-6",children:[e.jsx("div",{className:`p-4 rounded-lg mb-4 ${i.action==="match"?"bg-green-100 border border-green-300":i.action==="unknown"?"bg-red-100 border border-red-300":i.action==="complete"?"bg-blue-100 border border-blue-300":"bg-white border border-slate-200"}`,children:e.jsx("p",{className:"font-medium",children:i.description})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"Current Word"}),e.jsx("div",{className:"text-2xl font-mono font-bold text-slate-800",children:i.word||"-"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"Remaining"}),e.jsx("div",{className:"text-2xl font-mono",children:i.remaining!==void 0?i.remaining||e.jsx("span",{className:"text-green-600",children:"✓ Done"}):"-"})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"Trying to Match"}),e.jsx("div",{className:"text-2xl font-mono text-indigo-600",children:i.tried||"-"})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-white rounded-lg border",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"Tokens Generated"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:((n=i.tokens)==null?void 0:n.length)>0?i.tokens.map((t,r)=>e.jsx("span",{className:`px-3 py-1 rounded-lg font-mono ${t.startsWith("##")?"bg-purple-100 border-2 border-purple-300":t==="[UNK]"?"bg-red-100 border-2 border-red-300":"bg-blue-100 border-2 border-blue-300"}`,children:t},r)):e.jsx("span",{className:"text-slate-400",children:"No tokens yet"})})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 mb-6",children:[e.jsx("h4",{className:"font-bold text-slate-800 mb-3",children:"Sample Vocabulary (subset)"}),e.jsxs("div",{className:"flex flex-wrap gap-1 max-h-32 overflow-y-auto",children:[p.slice(0,40).map((t,r)=>e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-mono ${t.startsWith("##")?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:t},r)),e.jsx("span",{className:"text-slate-500 text-xs",children:"...and more"})]})]}),e.jsx("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{className:"text-amber-600 flex-shrink-0 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-900 mb-2",children:"WordPiece vs BPE"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-amber-800",children:"WordPiece"}),e.jsxs("ul",{className:"text-amber-800 list-disc list-inside",children:[e.jsx("li",{children:"Uses ## prefix for continuation"}),e.jsx("li",{children:"Greedy longest-match decoding"}),e.jsx("li",{children:"Used by BERT, DistilBERT"})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-amber-800",children:"BPE"}),e.jsxs("ul",{className:"text-amber-800 list-disc list-inside",children:[e.jsx("li",{children:"Uses </w> suffix for word end"}),e.jsx("li",{children:"Pair frequency-based merging"}),e.jsx("li",{children:"Used by GPT, RoBERTa"})]})]})]})]})]})})]})})}export{T as default};
