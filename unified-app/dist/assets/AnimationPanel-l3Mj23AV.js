import{r as f,j as e}from"./index-CsxpOLHd.js";function T(){const[s,x]=f.useState(-1),[p,h]=f.useState(!1),[j,k]=f.useState(800),u=f.useRef(null),y=[[1,2,0,1,2],[0,1,3,2,1],[2,3,1,0,2],[1,0,2,3,1],[2,1,0,1,3]],b=[[1,0,-1],[1,0,-1],[1,0,-1]],m=3,N=(()=>{const t=[];for(let r=0;r<m;r++){const n=[];for(let l=0;l<m;l++){let c=0;for(let a=0;a<3;a++)for(let d=0;d<3;d++)c+=y[r+a][l+d]*b[a][d];n.push(c)}t.push(n)}return t})(),g=m*m,C=t=>{if(t<0)return{row:-1,col:-1};const r=Math.floor(t/m),n=t%m;return{row:r,col:n}},{row:o,col:i}=C(s),P=()=>s<0?null:N[o][i],S=()=>{if(s<0)return[];const t=[];for(let r=0;r<3;r++)for(let n=0;n<3;n++){const l=y[o+r][i+n],c=b[r][n];t.push({input:l,kernel:c,product:l*c})}return t};f.useEffect(()=>()=>{u.current&&clearInterval(u.current)},[]);const $=()=>{if(p)return;h(!0),x(-1);let t=-1;u.current=setInterval(()=>{t++,t>=g?(clearInterval(u.current),h(!1)):x(t)},j)},I=()=>{u.current&&clearInterval(u.current),x(-1),h(!1)},R=()=>{s<g-1&&x(s+1)},K=()=>{s>-1&&x(s-1)},v=(t,r)=>s<0?!1:t>=o&&t<o+3&&r>=i&&r<i+3,A=(t,r)=>v(t,r)?{ki:t-o,kj:r-i}:null;return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-3 text-center",children:"Animation Demo"}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-center gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-blue-700 text-center mb-2",children:"Input (5×5)"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:"repeat(5, 1fr)"},children:y.flat().map((t,r)=>{const n=Math.floor(r/5),l=r%5,c=v(n,l),a=A(n,l);let d="bg-blue-50";if(c){const w=a?b[a.ki][a.kj]:0;w>0?d="bg-green-200":w<0?d="bg-red-200":d="bg-yellow-100"}return e.jsx("div",{className:`w-10 h-10 flex items-center justify-center text-sm font-mono font-bold border-2 rounded
                        ${d}
                        ${c?"border-purple-500 ring-1 ring-purple-300":"border-blue-300"}
                      `,children:t},r)})}),s>=0&&e.jsx("div",{className:"absolute border-4 border-purple-600 rounded-lg pointer-events-none transition-all duration-300",style:{top:o*42-2,left:i*42-2,width:3*42+4,height:3*42+4}})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-400",children:"∗"}),e.jsx("span",{className:"text-xs text-gray-500",children:"convolve"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-green-700 text-center mb-2",children:"Kernel (3×3)"}),e.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:"repeat(3, 1fr)"},children:b.flat().map((t,r)=>e.jsx("div",{className:`w-10 h-10 flex items-center justify-center text-sm font-mono font-bold border-2 rounded
                    ${t>0?"bg-green-100 border-green-400":t<0?"bg-red-100 border-red-400":"bg-yellow-50 border-yellow-400"}
                    ${t<0?"text-red-700":"text-gray-800"}
                  `,children:t},r))}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:"Edge detection"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-3xl font-bold text-gray-400",children:"="})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-purple-700 text-center mb-2",children:"Output (3×3)"}),e.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:"repeat(3, 1fr)"},children:N.flat().map((t,r)=>{const n=Math.floor(r/3),l=r%3,c=n===o&&l===i,a=s>=0&&(n<o||n===o&&l<=i);return e.jsx("div",{className:`w-10 h-10 flex items-center justify-center text-sm font-mono font-bold border-2 rounded transition-all
                      ${c?"bg-purple-300 border-purple-600 ring-2 ring-purple-400 scale-110":a?"bg-purple-100 border-purple-400":"bg-gray-100 border-gray-300"}
                      ${t<0?"text-red-700":"text-gray-800"}
                    `,children:a?t:"?"},r)})})]})]}),s>=0&&e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsxs("p",{className:"text-sm font-semibold text-purple-700 mb-2",children:["Position (",o,", ",i,") — Element-wise multiply and sum:"]}),e.jsxs("div",{className:"flex flex-wrap gap-1 items-center text-sm font-mono",children:[S().map((t,r)=>e.jsxs("span",{className:"flex items-center",children:[e.jsxs("span",{className:`px-1 rounded ${t.kernel>0?"bg-green-100":t.kernel<0?"bg-red-100":"bg-yellow-50"}`,children:[t.input,"×",t.kernel]}),e.jsx("span",{className:"text-gray-400 mx-0.5",children:"="}),e.jsx("span",{className:`px-1 rounded ${t.product<0?"text-red-600":""}`,children:t.product}),r<8&&e.jsx("span",{className:"text-gray-400 mx-1",children:"+"})]},r)),e.jsx("span",{className:"text-gray-600 mx-2",children:"="}),e.jsx("span",{className:"font-bold text-purple-700 text-lg",children:P()})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap justify-center gap-2",children:[e.jsx("button",{onClick:K,disabled:s<=-1||p,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50",children:"← Prev"}),e.jsx("button",{onClick:$,disabled:p,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:p?"Playing...":"Play"}),e.jsx("button",{onClick:I,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Reset"}),e.jsx("button",{onClick:R,disabled:s>=g-1||p,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 disabled:opacity-50",children:"Next →"})]}),e.jsxs("div",{className:"mt-3 flex justify-center items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Speed:"}),e.jsx("input",{type:"range",min:"200",max:"1500",step:"100",value:1700-j,onChange:t=>k(1700-parseInt(t.target.value)),className:"w-32"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[j,"ms"]})]}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-700",children:s<0?"Ready — Click Play":`Step ${s+1} / ${g}`}),e.jsx("div",{className:"mt-2 flex justify-center gap-1 flex-wrap",children:Array.from({length:g}).map((t,r)=>e.jsx("div",{onClick:()=>!p&&x(r),className:`w-6 h-6 rounded flex items-center justify-center text-xs cursor-pointer transition-all
                ${r===s?"bg-purple-600 text-white scale-110":r<s?"bg-purple-300 text-purple-800":"bg-gray-200 text-gray-500"}
              `,children:r+1},r))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-sm text-gray-700",children:e.jsx("strong",{children:"2D Convolution Formula:"})}),e.jsx("p",{className:"text-sm font-mono text-gray-600 mt-1",children:"Output[i,j] = Σₘ Σₙ Input[i+m, j+n] × Kernel[m, n]"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"The kernel slides across the input, computing element-wise products and summing them at each position."})]})]})}export{T as default};
