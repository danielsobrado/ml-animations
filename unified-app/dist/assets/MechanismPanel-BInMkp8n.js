import{r,j as e}from"./index-BmgLEcVh.js";function S(){const[s,N]=r.useState([1,.2]),[n,f]=r.useState([1,.1]),[c,v]=r.useState([.1,1]),[o,g]=r.useState([2,.5]),[d,w]=r.useState([.5,2]),m=s[0]*n[0]+s[1]*n[1],h=s[0]*c[0]+s[1]*c[1],b=Math.exp(m),u=Math.exp(h),j=b+u,t=b/j,l=u/j,V=t*o[0]+l*d[0],y=t*o[1]+l*d[1],a=({label:K,vec:x,setVec:p,color:F})=>e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`font-bold w-8 ${F}`,children:K}),e.jsx("input",{type:"number",step:"0.1",value:x[0],onChange:i=>p([parseFloat(i.target.value),x[1]]),className:"w-16 bg-slate-900 border border-slate-700 rounded px-2 py-1 text-sm text-center"}),e.jsx("input",{type:"number",step:"0.1",value:x[1],onChange:i=>p([x[0],parseFloat(i.target.value)]),className:"w-16 bg-slate-900 border border-slate-700 rounded px-2 py-1 text-sm text-center"})]});return e.jsxs("div",{className:"p-8 h-full flex flex-col items-center overflow-y-auto",children:[e.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-purple-400 mb-4",children:"The Math Mechanism"}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg font-mono text-sm inline-block",children:[e.jsx("span",{className:"text-fuchsia-400",children:"Attention(Q, K, V)"})," = softmax(",e.jsx("span",{className:"text-blue-400",children:"Q"})," · ",e.jsx("span",{className:"text-green-400",children:"Kᵀ"})," / √d) · ",e.jsx("span",{className:"text-orange-400",children:"V"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 w-full max-w-6xl items-start",children:[e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[e.jsx("h3",{className:"font-bold text-white mb-4 border-b border-slate-700 pb-2",children:"1. Inputs"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm text-slate-400 mb-2",children:"Query (What we focus on)"}),e.jsx(a,{label:"Q1",vec:s,setVec:N,color:"text-blue-400"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm text-slate-400 mb-2",children:"Keys (What we match against)"}),e.jsx(a,{label:"K1",vec:n,setVec:f,color:"text-green-400"}),e.jsx(a,{label:"K2",vec:c,setVec:v,color:"text-green-400"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm text-slate-400 mb-2",children:"Values (Content to retrieve)"}),e.jsx(a,{label:"V1",vec:o,setVec:g,color:"text-orange-400"}),e.jsx(a,{label:"V2",vec:d,setVec:w,color:"text-orange-400"})]})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[e.jsx("h3",{className:"font-bold text-white mb-4 border-b border-slate-700 pb-2",children:"2. Calculations"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm text-slate-400 mb-2",children:"Dot Products (Scores)"}),e.jsxs("div",{className:"font-mono text-sm bg-slate-900 p-2 rounded mb-1",children:["Q1 · K1 = ",m.toFixed(2)]}),e.jsxs("div",{className:"font-mono text-sm bg-slate-900 p-2 rounded",children:["Q1 · K2 = ",h.toFixed(2)]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm text-slate-400 mb-2",children:"Softmax (Probabilities)"}),e.jsxs("div",{className:"relative h-8 bg-slate-900 rounded overflow-hidden flex",children:[e.jsxs("div",{style:{width:`${t*100}%`},className:"bg-green-500/50 flex items-center justify-center text-xs text-white",children:[(t*100).toFixed(0),"%"]}),e.jsxs("div",{style:{width:`${l*100}%`},className:"bg-slate-700 flex items-center justify-center text-xs text-white",children:[(l*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[e.jsx("span",{children:"Attn to K1"}),e.jsx("span",{children:"Attn to K2"})]})]})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-fuchsia-500/50",children:[e.jsx("h3",{className:"font-bold text-white mb-4 border-b border-slate-700 pb-2",children:"3. Output"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm text-slate-400 mb-2",children:"Weighted Sum"}),e.jsxs("div",{className:"font-mono text-xs text-slate-300 mb-2",children:[t.toFixed(2)," * V1 + ",l.toFixed(2)," * V2"]}),e.jsxs("div",{className:"bg-fuchsia-900/30 border border-fuchsia-500 p-4 rounded-xl text-center",children:[e.jsxs("div",{className:"text-3xl font-mono font-bold text-fuchsia-400",children:["[",V.toFixed(2),", ",y.toFixed(2),"]"]}),e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Context-Aware Embedding"})]})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Notice: If Q matches K1 closely, the Output looks very similar to V1.",e.jsx("br",{}),"If Q matches K2, Output looks like V2.",e.jsx("br",{}),'This is how the model "retrieves" relevant information!']})]})]})]})}export{S as default};
