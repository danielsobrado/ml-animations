import{r as i,j as e,w as l}from"./index-CsxpOLHd.js";import{P as N}from"./pause-BMcOX1vk.js";import{P as y}from"./play-CIyTSByC.js";import{R as f}from"./rotate-ccw-xVnQluc9.js";function P(){const[r,o]=i.useState(0),[a,n]=i.useState(!1),[m,j]=i.useState(2),h=["the","quick","brown","fox","jumps","over","the","lazy","dog"],d=4,c=[{title:"Input Sentence",description:"Start with a sentence from your corpus"},{title:"Select Target Word",description:"This is the word we want to predict"},{title:"Identify Context Words",description:"Words within window size are context (input)"},{title:"Average Context Vectors",description:"Combine context embeddings by averaging"},{title:"Predict Target",description:"Use averaged vector to predict center word"},{title:"Learn Embeddings",description:"Update weights based on prediction error"}];i.useEffect(()=>{if(a){const t=setInterval(()=>{o(s=>s>=c.length-1?(n(!1),s):s+1)},2500);return()=>clearInterval(t)}},[a]);const b=()=>{o(0),n(!1)},p=(()=>{const t=[];for(let s=Math.max(0,d-m);s<=Math.min(h.length-1,d+m);s++)s!==d&&t.push(s);return t})(),x=p.map(t=>h[t]);return e.jsxs("div",{className:"space-y-6 pb-20",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[e.jsx("span",{className:"text-yellow-400",children:"CBOW"}),": Predict Center from Context"]}),e.jsx("p",{className:"text-gray-400",children:"Continuous Bag of Words: given surrounding words, predict the center word"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[e.jsxs("button",{onClick:()=>n(!a),className:"flex items-center gap-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 rounded-lg transition-colors",children:[a?e.jsx(N,{size:18}):e.jsx(y,{size:18}),a?"Pause":"Play Animation"]}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:[e.jsx(f,{size:18}),"Reset"]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Window Size:"}),e.jsx("select",{value:m,onChange:t=>j(parseInt(t.target.value)),className:"bg-gray-700 rounded px-2 py-1 text-sm",children:[1,2,3,4].map(t=>e.jsx("option",{value:t,children:t},t))})]})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:c.map((t,s)=>e.jsx("button",{onClick:()=>{o(s),n(!1)},className:`px-3 py-1 rounded-full text-sm transition-all ${s===r?"bg-yellow-500 text-black scale-110":s<r?"bg-yellow-900 text-yellow-300":"bg-white/10 text-gray-500"}`,children:s+1},s))}),e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-500/30 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-bold text-yellow-400",children:["Step ",r+1,": ",c[r].title]}),e.jsx("p",{className:"text-gray-300 mt-1",children:c[r].description})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:h.map((t,s)=>{const g=s===d&&r>=1,u=p.includes(s)&&r>=2;return e.jsxs("div",{className:`px-4 py-2 rounded-lg font-mono text-lg transition-all duration-300 ${g?"bg-yellow-500 text-black scale-110 shadow-lg shadow-yellow-500/50":u?"bg-blue-500 text-white scale-105 shadow-lg shadow-blue-500/50":"bg-white/10 text-gray-400"}`,children:[t,g&&r>=1&&e.jsx("span",{className:"text-xs ml-1",children:"(?)"})]},s)})}),r>=2&&e.jsx("div",{className:"text-center mb-6 animate-fadeIn",children:e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-900/30 rounded-lg border border-blue-500/30",children:[e.jsx("span",{className:"text-gray-400",children:"Context words:"}),e.jsx("div",{className:"flex gap-1",children:x.map((t,s)=>e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-blue-300 font-mono text-sm",children:t},s))})]})}),r>=3&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h4",{className:"text-center text-gray-400",children:"Average Context Embeddings:"}),e.jsx("div",{className:"flex justify-center items-center gap-4 flex-wrap",children:x.map((t,s)=>e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-blue-900/30 rounded-lg p-3 border border-blue-500/30",children:[e.jsx("div",{className:"font-mono text-blue-400 text-sm",children:t}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["[",(Math.random()*2-1).toFixed(1),", ",(Math.random()*2-1).toFixed(1),", ...]"]})]})},s))}),e.jsx("div",{className:"text-center text-gray-500",children:"‚Üì Average ‚Üì"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"bg-purple-900/30 rounded-lg p-4 border border-purple-500/30",children:[e.jsx("div",{className:"font-mono text-purple-400",children:"h = average(context vectors)"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["[",(Math.random()*2-1).toFixed(2),", ",(Math.random()*2-1).toFixed(2),", ",(Math.random()*2-1).toFixed(2),", ...]"]})]})})]}),r>=4&&e.jsxs("div",{className:"mt-8 animate-fadeIn",children:[e.jsx("h4",{className:"text-center text-gray-400 mb-4",children:"CBOW Neural Network:"}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-24 h-24 rounded-lg bg-blue-900/50 border border-blue-500 flex flex-col items-center justify-center p-2",children:[x.slice(0,4).map((t,s)=>e.jsx("div",{className:"font-mono text-xs text-blue-400",children:t},s)),x.length>4&&e.jsx("div",{className:"text-xs text-gray-500",children:"..."})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Context",e.jsx("br",{}),"(one-hot each)"]})]}),e.jsx(l,{className:"text-gray-500"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-20 h-24 rounded-lg bg-green-900/50 border border-green-500 flex flex-col items-center justify-center px-2",children:[e.jsx("div",{className:"text-xs text-green-300 mb-1",children:"W"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Lookup &"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Average"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Projection"})]}),e.jsx(l,{className:"text-gray-500"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-20 h-24 rounded-lg bg-purple-900/50 border border-purple-500 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-xs text-purple-300",children:"h"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"D dims"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Hidden",e.jsx("br",{}),"(averaged)"]})]}),e.jsx(l,{className:"text-gray-500"}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"w-20 h-24 rounded-lg bg-yellow-900/50 border border-yellow-500 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"font-mono text-yellow-400",children:"jumps"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"P=0.85"})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Prediction",e.jsx("br",{}),"(softmax)"]})]})]})]}),r>=5&&e.jsxs("div",{className:"mt-8 bg-gradient-to-r from-yellow-900/30 to-green-900/30 rounded-xl p-6 border border-yellow-500/30 animate-fadeIn",children:[e.jsx("h4",{className:"text-yellow-400 font-bold mb-3",children:"üîÑ Weight Update"}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"If prediction is wrong, adjust embeddings so context words point more toward the correct center word."}),e.jsxs("div",{className:"font-mono text-sm bg-black/30 rounded-lg p-4",children:[e.jsx("p",{className:"text-gray-400",children:"// Gradient descent update"}),e.jsx("p",{className:"text-green-300",children:"W_new = W_old - learning_rate √ó ‚àáLoss"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"// Both input and output weights updated"})]})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-6 border border-white/10",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"üîÑ CBOW vs Skip-gram"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-yellow-900/20 rounded-lg p-4 border border-yellow-500/30",children:[e.jsx("h5",{className:"text-yellow-400 font-medium mb-2",children:"CBOW"}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Context ‚Üí Center"}),e.jsxs("div",{className:"text-xs space-y-1 text-gray-500",children:[e.jsx("p",{children:"‚Ä¢ One prediction per window position"}),e.jsx("p",{children:"‚Ä¢ Faster to train"}),e.jsx("p",{children:"‚Ä¢ Better for frequent words"}),e.jsx("p",{children:"‚Ä¢ Smooths over context"})]})]}),e.jsxs("div",{className:"bg-green-900/20 rounded-lg p-4 border border-green-500/30",children:[e.jsx("h5",{className:"text-green-400 font-medium mb-2",children:"Skip-gram"}),e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Center ‚Üí Context"}),e.jsxs("div",{className:"text-xs space-y-1 text-gray-500",children:[e.jsx("p",{children:"‚Ä¢ Multiple predictions per center word"}),e.jsx("p",{children:"‚Ä¢ Slower to train"}),e.jsx("p",{children:"‚Ä¢ Better for rare words"}),e.jsx("p",{children:"‚Ä¢ Captures more nuance"})]})]})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-6 border border-white/10",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"üìê CBOW Objective"}),e.jsxs("div",{className:"bg-black/50 rounded-lg p-4 text-center font-mono",children:[e.jsx("p",{className:"text-yellow-300",children:"maximize Œ£ log P(center | context)"}),e.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["h = (1/C) Œ£ W",e.jsx("sub",{children:"context_i"})]}),e.jsx("p",{className:"text-sm text-gray-400",children:"P(center | context) = softmax(W' ¬∑ h)"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-yellow-900/20 to-green-900/20 rounded-xl p-6 border border-white/10",children:[e.jsx("h4",{className:"font-bold text-white mb-4 text-center",children:"Direction of Prediction"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h5",{className:"text-yellow-400 mb-3",children:"CBOW"}),e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-xs",children:"quick"}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-xs",children:"brown"})]}),e.jsx(l,{className:"text-yellow-400"}),e.jsx("span",{className:"px-3 py-2 bg-yellow-500 text-black rounded font-bold",children:"?"}),e.jsx(l,{className:"text-yellow-400 rotate-180"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-xs",children:"over"}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-xs",children:"the"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Many inputs ‚Üí One output"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h5",{className:"text-green-400 mb-3",children:"Skip-gram"}),e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-xs",children:"?"}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-xs",children:"?"})]}),e.jsx(l,{className:"text-green-400 rotate-180"}),e.jsx("span",{className:"px-3 py-2 bg-green-500 text-black rounded font-bold",children:"jumps"}),e.jsx(l,{className:"text-green-400"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-xs",children:"?"}),e.jsx("span",{className:"px-2 py-1 bg-blue-500/30 rounded text-xs",children:"?"})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"One input ‚Üí Many outputs"})]})]})]})]})}export{P as default};
