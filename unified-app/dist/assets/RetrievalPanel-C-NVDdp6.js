import{r,j as e,R as N,o as y,D as w,T as R,F as S,b as T}from"./index-BmgLEcVh.js";import{S as C}from"./search-mCogr3Vg.js";function B(){const[x,m]=r.useState("What is the battery life of XR-500?"),[t,l]=r.useState(0),[n,u]=r.useState(3),[h,i]=r.useState(!1),[p,o]=r.useState(!1),c=[{id:1,text:"The XR-500 supports WiFi 6 and Bluetooth 5.2.",source:"Product Manual",relevance:.65},{id:2,text:"Battery life is 12 hours with normal usage.",source:"Product Manual",relevance:.95},{id:3,text:"Remote work is permitted 3 days per week.",source:"HR Policy",relevance:.15},{id:4,text:"Revenue increased by 15% to $4.2B.",source:"Q3 Report",relevance:.1},{id:5,text:"The XR-500 has a 5000mAh battery capacity.",source:"Product Manual",relevance:.88},{id:6,text:"Operating margin improved to 23%.",source:"Q3 Report",relevance:.08},{id:7,text:"Fast charging reaches 80% in 30 minutes.",source:"Product Manual",relevance:.82},{id:8,text:"PTO accrues at 1.5 days per month.",source:"HR Policy",relevance:.05}],d=[...c].sort((s,a)=>a.relevance-s.relevance).slice(0,n),b=()=>{i(!0),l(1),o(!1),setTimeout(()=>l(2),1e3),setTimeout(()=>l(3),2e3),setTimeout(()=>l(4),3e3),setTimeout(()=>{o(!0),i(!1)},4e3)},g=s=>s>=.8?"bg-green-100 border-green-300 text-green-800":s>=.5?"bg-yellow-100 border-yellow-300 text-yellow-800":"bg-slate-100 border-slate-200 text-slate-600",v=s=>s>=.8?"bg-green-500":s>=.5?"bg-yellow-500":"bg-slate-300";return e.jsxs("div",{className:"p-6 h-full overflow-y-auto",children:[e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-indigo-900 mb-2",children:"Retrieval in Action"}),e.jsx("p",{className:"text-slate-600",children:"See how RAG retrieves relevant context and generates responses"})]}),e.jsxs("div",{className:"bg-white rounded-xl p-4 border mb-6 shadow-sm",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"User Query:"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:x,onChange:s=>m(s.target.value),className:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Ask a question..."}),e.jsxs("select",{value:n,onChange:s=>u(Number(s.target.value)),className:"px-3 py-2 border rounded-lg bg-white",children:[e.jsx("option",{value:1,children:"Top 1"}),e.jsx("option",{value:2,children:"Top 2"}),e.jsx("option",{value:3,children:"Top 3"}),e.jsx("option",{value:5,children:"Top 5"})]}),e.jsxs("button",{onClick:b,disabled:h,className:"flex items-center gap-2 px-6 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 disabled:opacity-50",children:[e.jsx(C,{size:18}),"Search"]})]})]}),e.jsx("div",{className:"flex justify-center items-center gap-4 mb-6",children:[{step:1,label:"Embed Query",icon:"ðŸ”¢"},{step:2,label:"Vector Search",icon:"ðŸ”"},{step:3,label:"Retrieve Top-K",icon:"ðŸ“„"},{step:4,label:"Generate",icon:"ðŸ¤–"}].map((s,a)=>e.jsxs(N.Fragment,{children:[e.jsxs("div",{className:`flex flex-col items-center transition-all ${t>=s.step?"opacity-100 scale-100":"opacity-40 scale-90"}`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-xl mb-1 ${t>=s.step?"bg-indigo-500":"bg-slate-200"}`,children:s.icon}),e.jsx("span",{className:"text-xs font-medium text-slate-600",children:s.label})]}),a<3&&e.jsx(y,{className:`${t>s.step?"text-indigo-500":"text-slate-300"}`,size:20})]},s.step))}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx(w,{size:18,className:"text-purple-500"}),"Vector Database"]}),e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:c.map((s,a)=>{const j=t>=2&&d.some(f=>f.id===s.id);return e.jsxs("div",{className:`p-2 rounded-lg border transition-all duration-300 ${j?"ring-2 ring-indigo-500 "+g(s.relevance):"bg-white border-slate-200"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-slate-500",children:s.source}),t>=2&&e.jsxs("span",{className:`text-xs font-bold ${s.relevance>=.8?"text-green-600":s.relevance>=.5?"text-yellow-600":"text-slate-400"}`,children:[(s.relevance*100).toFixed(0),"%"]})]}),e.jsx("p",{className:"text-sm text-slate-700",children:s.text}),t>=2&&e.jsx("div",{className:"mt-1 h-1 bg-slate-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-500 ${v(s.relevance)}`,style:{width:`${s.relevance*100}%`}})})]},s.id)})})]}),e.jsxs("div",{className:"space-y-4",children:[t>=1&&e.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 border border-blue-200 animate-fadeIn",children:[e.jsxs("h4",{className:"font-bold text-blue-800 mb-2 flex items-center gap-2",children:[e.jsx(R,{size:16}),"Query Embedding"]}),e.jsx("div",{className:"font-mono text-xs bg-blue-100 p-2 rounded",children:"[0.23, -0.15, 0.87, 0.42, -0.31, ...]"})]}),t>=3&&e.jsxs("div",{className:"bg-green-50 rounded-xl p-4 border border-green-200 animate-fadeIn",children:[e.jsxs("h4",{className:"font-bold text-green-800 mb-2 flex items-center gap-2",children:[e.jsx(S,{size:16}),"Retrieved Context (Top ",n,")"]}),e.jsx("div",{className:"space-y-2",children:d.map((s,a)=>e.jsxs("div",{className:"bg-white p-2 rounded border border-green-200 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium text-green-700",children:["#",a+1," ",s.source]}),e.jsxs("span",{className:"text-green-600",children:[(s.relevance*100).toFixed(0),"%"]})]}),e.jsx("p",{className:"text-slate-700 text-xs mt-1",children:s.text})]},s.id))})]}),p&&e.jsxs("div",{className:"bg-purple-50 rounded-xl p-4 border border-purple-200 animate-fadeIn",children:[e.jsxs("h4",{className:"font-bold text-purple-800 mb-2 flex items-center gap-2",children:[e.jsx(T,{size:16}),"Generated Response"]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-purple-200",children:[e.jsxs("p",{className:"text-slate-800",children:["The XR-500 has a battery life of ",e.jsx("strong",{children:"12 hours"})," with normal usage. It features a 5000mAh battery capacity and supports fast charging, reaching 80% charge in just 30 minutes."]}),e.jsx("div",{className:"mt-2 text-xs text-purple-600",children:"ðŸ“š Sources: Product Manual (3 chunks)"})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-amber-50 rounded-xl p-4 border border-amber-200",children:[e.jsx("h4",{className:"font-bold text-amber-900 mb-2",children:"âš¡ How Vector Search Works"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-amber-800",children:[e.jsx("strong",{children:"Cosine Similarity:"})," Measures the angle between vectors. Closer vectors have higher similarity (closer to 1.0)."]})}),e.jsx("div",{children:e.jsxs("p",{className:"text-amber-800",children:[e.jsx("strong",{children:"Top-K Retrieval:"})," Returns the K most similar chunks. Higher K = more context but may include less relevant info."]})})]})]})]}),e.jsx("style",{jsx:!0,children:`
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(-10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fadeIn {
                    animation: fadeIn 0.4s ease-out forwards;
                }
            `})]})}export{B as default};
