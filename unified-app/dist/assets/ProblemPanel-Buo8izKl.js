import{r as d,j as e}from"./index-quAWpIA7.js";import{m as c}from"./proxy-D7LjGbFl.js";import{A as j}from"./index-5ncPk15p.js";import{R as g}from"./CategoricalChart-q5_a8qWL.js";import{A as v,a as y}from"./AreaChart-BkGaBjAw.js";import{C as N,X as w,Y as k}from"./CartesianChart-CAXOaB3h.js";import{T as A}from"./Tooltip-YDxRvdtC.js";import{L as C}from"./Legend-mgD8SwP_.js";import"./with-selector-CsIvExq7.js";import"./Sector-C4hPwxCr.js";import"./ActivePoints-Bh5iuYIL.js";import"./getRadiusAndStrokeWidthFromDot-1Us6Ea5J.js";import"./useElementOffset-e28GaSXW.js";import"./Symbols-D2UkYTzA.js";function X(){const[a,b]=d.useState(!1),[l,h]=d.useState(5),f=s=>{const t=[];let i=0,r=1;for(let o=0;o<l;o++){const p=[];for(let n=-5;n<=5;n+=.2){const u=Math.exp(-Math.pow(n-i,2)/(2*r*r))/(r*Math.sqrt(2*Math.PI));p.push({x:n,value:u,layer:o})}t.push({layer:o,data:p,mean:i.toFixed(2),std:r.toFixed(2)}),s?(i=0,r=1):(i+=.5,r*=1.3)}return t},m=d.useMemo(()=>f(a),[a,l]),x=s=>{const t=["#22d3ee","#a855f7","#f472b6","#fbbf24","#4ade80"];return t[s%t.length]};return e.jsxs("div",{className:"p-8 h-full flex flex-col items-center overflow-y-auto",children:[e.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-violet-400 mb-4",children:"The Problem"}),e.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 leading-relaxed",children:["Deep networks suffer from ",e.jsx("strong",{children:"Internal Covariate Shift"}),".",e.jsx("br",{}),"Without normalization, activations drift and gradients become unstable."]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 w-full max-w-4xl mb-8",children:[e.jsx("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg",children:"Normalization"}),e.jsx("p",{className:"text-sm text-slate-800 dark:text-slate-400",children:"Toggle to see the difference"})]}),e.jsx("button",{onClick:()=>b(!a),className:`relative w-20 h-10 rounded-full transition-colors ${a?"bg-violet-500":"bg-slate-600"}`,children:e.jsx(c.div,{className:"absolute top-1 left-1 w-8 h-8 bg-white rounded-full shadow-lg",animate:{x:a?40:0},transition:{type:"spring",stiffness:500,damping:30}})})]})}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[e.jsxs("label",{className:"flex justify-between text-sm font-bold mb-3",children:["Network Depth: ",e.jsxs("span",{className:"text-violet-400",children:[l," layers"]})]}),e.jsx("input",{type:"range",min:"3",max:"10",step:"1",value:l,onChange:s=>h(Number(s.target.value)),className:"w-full accent-violet-400"})]})]}),e.jsx(j,{mode:"wait",children:a?e.jsx(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-green-900/30 border-2 border-green-500 p-4 rounded-lg w-full max-w-4xl mb-8",children:e.jsxs("p",{className:"text-green-300 font-bold text-center",children:["✅ Solution: Activations are normalized!",e.jsx("br",{}),e.jsx("span",{className:"text-sm",children:"Mean = 0, Std = 1 at every layer. Stable training."})]})},"solution"):e.jsx(c.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-red-900/30 border-2 border-red-500 p-4 rounded-lg w-full max-w-4xl mb-8",children:e.jsxs("p",{className:"text-red-300 font-bold text-center",children:["⚠️ Problem: Activations are drifting and exploding!",e.jsx("br",{}),e.jsx("span",{className:"text-sm",children:"Gradients will vanish or explode during backprop."})]})},"problem")}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 w-full max-w-5xl",children:[e.jsx("h3",{className:"font-bold text-white mb-4 text-center",children:"Activation Distributions Across Layers"}),e.jsx(g,{width:"100%",height:400,children:e.jsxs(v,{children:[e.jsx(N,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(w,{dataKey:"x",type:"number",domain:[-5,5],stroke:"#94a3b8",tick:{fill:"#cbd5e1"},label:{value:"Activation Value",position:"insideBottom",fill:"#cbd5e1"}}),e.jsx(k,{stroke:"#94a3b8",tick:{fill:"#cbd5e1"}}),e.jsx(A,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px"},labelStyle:{color:"#e2e8f0"}}),e.jsx(C,{wrapperStyle:{color:"#e2e8f0"}}),m.map((s,t)=>e.jsx(y,{data:s.data,type:"monotone",dataKey:"value",stroke:x(t),fill:x(t),fillOpacity:.3,strokeWidth:2,name:`Layer ${t+1}`},t))]})}),e.jsx("div",{className:"grid grid-cols-5 gap-2 mt-6",children:m.map((s,t)=>e.jsxs("div",{className:"bg-slate-900 p-3 rounded-lg border border-slate-600 text-center",children:[e.jsxs("div",{className:"text-xs text-slate-800 dark:text-slate-400 mb-1",children:["Layer ",t+1]}),e.jsxs("div",{className:"text-sm font-mono",children:[e.jsxs("span",{className:"text-white",children:["μ: ",s.mean]}),e.jsx("br",{}),e.jsxs("span",{className:"text-slate-700 dark:text-slate-300",children:["σ: ",s.std]})]})]},t))})]})]})}export{X as default};
