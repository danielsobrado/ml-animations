import{r as c,j as e}from"./index-BmgLEcVh.js";function u({nodes:r,links:h}){const[n,o]=c.useState({}),[f,d]=c.useState(0),x=.85;c.useEffect(()=>{const t={};r.forEach(s=>t[s.id]=1/r.length),o(t),d(0)},[r]);const g=()=>{const t={};r.forEach(s=>t[s.id]=(1-x)/r.length),r.forEach(s=>{const a=h.filter(i=>i.source===s.id);if(a.length>0){const i=n[s.id]*x/a.length;a.forEach(l=>{t[l.target]+=i})}else{const i=n[s.id]*x/r.length;r.forEach(l=>{t[l.id]+=i})}}),o(t),d(s=>s+1)};return e.jsxs("div",{className:"p-8 h-full flex flex-col items-center",children:[e.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-indigo-900 mb-4",children:"The Power Method"}),e.jsxs("p",{className:"text-lg text-slate-700 leading-relaxed",children:['The math behind the magic. In each step, a page gives its "Rank Juice" to its neighbors.',e.jsx("br",{}),e.jsx("span",{className:"font-mono text-sm bg-slate-100 p-1 rounded",children:"PR(A) = (1-d) + d * Î£ (PR(T) / C(T))"})]})]}),e.jsxs("div",{className:"flex gap-4 mb-8",children:[e.jsx("button",{onClick:g,className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-bold text-xl hover:bg-indigo-700 shadow-lg transition-all transform hover:scale-105",children:"ðŸ”„ Run 1 Iteration"}),e.jsx("button",{onClick:()=>{const t={};r.forEach(s=>t[s.id]=1/r.length),o(t),d(0)},className:"px-6 py-3 bg-slate-200 text-slate-700 rounded-xl font-bold hover:bg-slate-300",children:"Reset"})]}),e.jsxs("div",{className:"w-full max-w-4xl h-[500px] bg-slate-50 rounded-xl border-2 border-slate-200 relative overflow-hidden",children:[e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("defs",{children:e.jsx("marker",{id:"arrowhead-iter",markerWidth:"10",markerHeight:"7",refX:"28",refY:"3.5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#94a3b8"})})}),h.map((t,s)=>{const a=r.find(l=>l.id===t.source),i=r.find(l=>l.id===t.target);return!a||!i?null:e.jsxs("g",{children:[e.jsx("line",{x1:a.x,y1:a.y,x2:i.x,y2:i.y,stroke:"#e2e8f0",strokeWidth:"4",markerEnd:"url(#arrowhead-iter)"}),e.jsx("circle",{r:"3",fill:"#6366f1",children:e.jsx("animateMotion",{dur:"1s",repeatCount:"indefinite",path:`M${a.x},${a.y} L${i.x},${i.y}`})})]},s)}),r.map(t=>{const s=n[t.id]||0,a=s*200;return e.jsxs("g",{transform:`translate(${t.x},${t.y})`,children:[e.jsx("rect",{x:"-10",y:-25-a,width:"20",height:a,fill:"#4f46e5",rx:"4",className:"transition-all duration-500"}),e.jsx("text",{x:"0",y:-30-a,textAnchor:"middle",className:"text-xs font-bold text-indigo-600",children:s.toFixed(3)}),e.jsx("circle",{r:"20",fill:"white",stroke:"#4f46e5",strokeWidth:"3"}),e.jsx("text",{dy:"5",textAnchor:"middle",className:"font-bold text-indigo-900 pointer-events-none",children:t.id})]},t.id)})]}),e.jsx("div",{className:"absolute top-4 right-4 bg-white/90 p-4 rounded-lg shadow border border-slate-200",children:e.jsxs("p",{className:"font-bold text-slate-500 text-xs uppercase mb-2",children:["Iteration: ",f]})})]})]})}export{u as default};
