import{r as l,j as e,w as I,b as _,S,Z as V,x as k,T as q,l as D,a as U,C as Q,s as J,e as X,q as Z}from"./index-CsxpOLHd.js";import{I as Y}from"./info-uzndjnU1.js";import{P as M}from"./pause-BMcOX1vk.js";import{P as C}from"./play-CIyTSByC.js";import{R as $}from"./rotate-ccw-xVnQluc9.js";import{S as ee}from"./scale-oO9klg3P.js";import{C as te}from"./check-circle-C5pajHEW.js";import{X as se}from"./x-circle-guWBBJ3U.js";import{G as re}from"./graduation-cap-R77j1NjU.js";function F(){const[t,m]=l.useState(null),s={input:{title:"Input Data (x)",description:"Original data (images, text, etc.) that we want to learn to represent and reconstruct.",color:"from-blue-500 to-cyan-500",details:["Batch of samples","e.g., 28Ã—28 images","Flattened or convolutional"]},encoder:{title:"Encoder q(z|x)",description:"Neural network that maps input to parameters of the latent distribution (Î¼ and Ïƒ).",color:"from-green-500 to-emerald-500",details:["Outputs Î¼ (mean)","Outputs Ïƒ (std dev)","Learns to compress"]},latent:{title:"Latent Space z",description:"Compressed probabilistic representation. We sample z ~ N(Î¼, ÏƒÂ²) using reparameterization.",color:"from-purple-500 to-violet-500",details:["Continuous & smooth","Reparameterization trick","z = Î¼ + ÏƒâŠ™Îµ"]},decoder:{title:"Decoder p(x|z)",description:"Neural network that reconstructs data from latent samples.",color:"from-orange-500 to-red-500",details:["Generates output","Same shape as input","Learns to expand"]},output:{title:"Reconstruction (xÌ‚)",description:"Reconstructed output that should match the original input as closely as possible.",color:"from-pink-500 to-rose-500",details:["Same dims as input","Probabilistic output","Compare with x"]}};return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["VAE Architecture: ",e.jsx("span",{className:"text-purple-400",children:"The Big Picture"})]}),e.jsx("p",{className:"text-gray-400",children:"Autoencoders that learn probabilistic latent representations for generation"})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-8 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"relative cursor-pointer transition-transform hover:scale-105",onMouseEnter:()=>m("input"),onMouseLeave:()=>m(null),children:[e.jsx("div",{className:`w-24 h-24 rounded-xl bg-gradient-to-br ${s.input.color} flex items-center justify-center`,children:e.jsx("div",{className:"grid grid-cols-4 gap-0.5",children:Array(16).fill(0).map((c,a)=>e.jsx("div",{className:`w-3 h-3 rounded-sm ${Math.random()>.5?"bg-white/80":"bg-white/30"}`},a))})}),e.jsx("p",{className:"text-center mt-2 text-sm font-medium",children:"Input x"}),e.jsx("p",{className:"text-center text-xs text-gray-500",children:"[batch, 784]"})]}),e.jsx(I,{className:"text-gray-500 flex-shrink-0"}),e.jsxs("div",{className:"relative cursor-pointer transition-transform hover:scale-105",onMouseEnter:()=>m("encoder"),onMouseLeave:()=>m(null),children:[e.jsxs("div",{className:`w-32 h-32 rounded-xl bg-gradient-to-br ${s.encoder.color} flex flex-col items-center justify-center p-2`,children:[e.jsx(_,{size:24,className:"mb-1"}),e.jsx("p",{className:"text-xs font-bold text-center",children:"Encoder"}),e.jsx("p",{className:"text-xs opacity-80",children:"q(z|x)"}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx("div",{className:"bg-white/20 rounded px-2 py-0.5 text-xs",children:"Î¼"}),e.jsx("div",{className:"bg-white/20 rounded px-2 py-0.5 text-xs",children:"Ïƒ"})]})]}),e.jsx("p",{className:"text-center mt-2 text-sm font-medium",children:"Encoder"})]}),e.jsx(I,{className:"text-gray-500 flex-shrink-0"}),e.jsxs("div",{className:"relative cursor-pointer transition-transform hover:scale-105",onMouseEnter:()=>m("latent"),onMouseLeave:()=>m(null),children:[e.jsxs("div",{className:`w-28 h-28 rounded-full bg-gradient-to-br ${s.latent.color} flex items-center justify-center relative`,children:[e.jsx("div",{className:"absolute inset-2 rounded-full gaussian-gradient latent-drift"}),e.jsxs("div",{className:"relative z-10 text-center",children:[e.jsx("p",{className:"text-lg font-bold",children:"z"}),e.jsx("p",{className:"text-xs opacity-80",children:"~ N(Î¼, ÏƒÂ²)"})]})]}),e.jsx("p",{className:"text-center mt-2 text-sm font-medium",children:"Latent Space"}),e.jsx("p",{className:"text-center text-xs text-gray-500",children:"[batch, latent_dim]"})]}),e.jsx(I,{className:"text-gray-500 flex-shrink-0"}),e.jsxs("div",{className:"relative cursor-pointer transition-transform hover:scale-105",onMouseEnter:()=>m("decoder"),onMouseLeave:()=>m(null),children:[e.jsxs("div",{className:`w-32 h-32 rounded-xl bg-gradient-to-br ${s.decoder.color} flex flex-col items-center justify-center p-2`,children:[e.jsx(S,{size:24,className:"mb-1"}),e.jsx("p",{className:"text-xs font-bold text-center",children:"Decoder"}),e.jsx("p",{className:"text-xs opacity-80",children:"p(x|z)"})]}),e.jsx("p",{className:"text-center mt-2 text-sm font-medium",children:"Decoder"})]}),e.jsx(I,{className:"text-gray-500 flex-shrink-0"}),e.jsxs("div",{className:"relative cursor-pointer transition-transform hover:scale-105",onMouseEnter:()=>m("output"),onMouseLeave:()=>m(null),children:[e.jsx("div",{className:`w-24 h-24 rounded-xl bg-gradient-to-br ${s.output.color} flex items-center justify-center`,children:e.jsx("div",{className:"grid grid-cols-4 gap-0.5",children:Array(16).fill(0).map((c,a)=>e.jsx("div",{className:`w-3 h-3 rounded-sm ${Math.random()>.4?"bg-white/70":"bg-white/30"}`},a))})}),e.jsx("p",{className:"text-center mt-2 text-sm font-medium",children:"Output xÌ‚"}),e.jsx("p",{className:"text-center text-xs text-gray-500",children:"[batch, 784]"})]})]}),t&&e.jsx("div",{className:"mt-6 p-4 bg-white/5 rounded-xl border border-white/10",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Y,{className:"text-purple-400 mt-1",size:20}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:s[t].title}),e.jsx("p",{className:"text-gray-300 mt-1",children:s[t].description}),e.jsx("div",{className:"flex gap-2 mt-3",children:s[t].details.map((c,a)=>e.jsx("span",{className:"bg-white/10 px-2 py-1 rounded text-sm",children:c},a))})]})]})})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-purple-800/20 rounded-xl p-5 border border-purple-500/30",children:[e.jsxs("h3",{className:"font-bold text-purple-300 mb-2 flex items-center gap-2",children:[e.jsx(V,{size:18}),' Why "Variational"?']}),e.jsxs("p",{className:"text-sm text-gray-300",children:["Unlike regular autoencoders, VAEs learn a ",e.jsx("strong",{children:"probability distribution"})," in latent space, not just fixed points. This allows smooth interpolation and generation of new samples."]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-900/30 to-green-800/20 rounded-xl p-5 border border-green-500/30",children:[e.jsxs("h3",{className:"font-bold text-green-300 mb-2 flex items-center gap-2",children:[e.jsx(_,{size:18})," The Reparameterization Trick"]}),e.jsxs("p",{className:"text-sm text-gray-300",children:["To backpropagate through sampling, we use: ",e.jsx("code",{className:"bg-black/30 px-1 rounded",children:"z = Î¼ + Ïƒ âŠ™ Îµ"}),"where Îµ ~ N(0,1). This moves randomness outside the gradient path."]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-900/30 to-orange-800/20 rounded-xl p-5 border border-orange-500/30",children:[e.jsxs("h3",{className:"font-bold text-orange-300 mb-2 flex items-center gap-2",children:[e.jsx(S,{size:18})," Generation Power"]}),e.jsx("p",{className:"text-sm text-gray-300",children:"Once trained, we can generate new data by sampling z ~ N(0,1) and passing it through the decoder - no encoder needed! The learned latent space captures data structure."})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"ðŸ“Š VAE vs Regular Autoencoder"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left py-2 px-4",children:"Feature"}),e.jsx("th",{className:"text-left py-2 px-4 text-blue-400",children:"Regular Autoencoder"}),e.jsx("th",{className:"text-left py-2 px-4 text-purple-400",children:"Variational AE"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-4",children:"Latent Space"}),e.jsx("td",{className:"py-2 px-4",children:"Deterministic vectors"}),e.jsx("td",{className:"py-2 px-4",children:"Probability distributions"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-4",children:"Encoder Output"}),e.jsx("td",{className:"py-2 px-4",children:"z directly"}),e.jsx("td",{className:"py-2 px-4",children:"Î¼ and Ïƒ (then sample z)"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-4",children:"Loss Function"}),e.jsx("td",{className:"py-2 px-4",children:"Reconstruction only"}),e.jsx("td",{className:"py-2 px-4",children:"Reconstruction + KL Divergence"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-4",children:"Generation"}),e.jsx("td",{className:"py-2 px-4",children:"Poor (gaps in latent space)"}),e.jsx("td",{className:"py-2 px-4",children:"Smooth (continuous latent space)"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-4",children:"Interpolation"}),e.jsx("td",{className:"py-2 px-4",children:"May produce artifacts"}),e.jsx("td",{className:"py-2 px-4",children:"Meaningful interpolations"})]})]})]})})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-900/20 to-pink-900/20 rounded-xl p-4 border border-purple-500/20",children:e.jsxs("p",{className:"text-sm text-gray-400",children:["ðŸ“„ ",e.jsx("strong",{children:"Key Paper:"}),' "Auto-Encoding Variational Bayes" (Kingma & Welling, 2013) - Introduced VAEs with the reparameterization trick, enabling practical training of deep generative models.']})})]})}function ae(){const[t,m]=l.useState(0),[s,c]=l.useState(!1),a=l.useRef(null),n=[{title:"Input Image",description:"A 28Ã—28 grayscale image (like MNIST digit) is flattened into a 784-dimensional vector.",highlight:"input"},{title:"First Hidden Layer",description:"Linear transformation + activation compresses 784 â†’ 400 dimensions, learning important features.",highlight:"hidden1"},{title:"Second Hidden Layer",description:"Further compression to 200 dimensions, extracting higher-level abstractions.",highlight:"hidden2"},{title:"Mean (Î¼) Output",description:"A linear layer outputs the mean vector Î¼ of the latent distribution. Each dimension is a center point.",highlight:"mu"},{title:"Log-Variance (log ÏƒÂ²) Output",description:"A separate linear layer outputs log ÏƒÂ² (log-variance for numerical stability). Ïƒ = exp(0.5 Ã— log ÏƒÂ²).",highlight:"logvar"},{title:"Reparameterization",description:"Sample Îµ ~ N(0,1), then compute z = Î¼ + Ïƒ âŠ™ Îµ. This allows gradients to flow through sampling!",highlight:"reparam"}];l.useEffect(()=>(s&&(a.current=setInterval(()=>{m(b=>b>=n.length-1?(c(!1),b):b+1)},2500)),()=>clearInterval(a.current)),[s]);const d=()=>{m(0),c(!1)},x=({count:b,width:p,color:N,label:r,active:i,sublabel:h})=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`relative transition-all duration-500 ${i?"scale-110":"scale-100"}`,style:{width:`${p}px`},children:e.jsxs("div",{className:`h-32 rounded-lg ${N} ${i?"ring-2 ring-white ring-offset-2 ring-offset-transparent":""} flex flex-col items-center justify-center transition-all`,children:[e.jsx("p",{className:"text-2xl font-bold",children:b}),e.jsx("p",{className:"text-xs opacity-80",children:"neurons"})]})}),e.jsx("p",{className:`mt-2 text-sm font-medium transition-colors ${i?"text-white":"text-gray-400"}`,children:r}),h&&e.jsx("p",{className:"text-xs text-gray-500",children:h})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Encoder: ",e.jsx("span",{className:"text-green-400",children:"From Data to Distribution"})]}),e.jsx("p",{className:"text-gray-400",children:"The encoder learns to map input data to latent distribution parameters Î¼ and Ïƒ"})]}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsxs("button",{onClick:()=>c(!s),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition-colors",children:[s?e.jsx(M,{size:18}):e.jsx(C,{size:18}),s?"Pause":"Play Animation"]}),e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:[e.jsx($,{size:18}),"Reset"]})]}),e.jsx("div",{className:"flex justify-center gap-2",children:n.map((b,p)=>e.jsx("button",{onClick:()=>{m(p),c(!1)},className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all ${p===t?"bg-green-500 text-white scale-110":p<t?"bg-green-900 text-green-300":"bg-white/10 text-gray-500"}`,children:p+1},p))}),e.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-bold text-green-400",children:["Step ",t+1,": ",n[t].title]}),e.jsx("p",{className:"text-gray-300 mt-1",children:n[t].description})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-8 border border-white/10",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(x,{count:784,width:80,color:"bg-gradient-to-b from-blue-600 to-blue-800",label:"Input",sublabel:"28Ã—28 = 784",active:n[t].highlight==="input"}),e.jsx(k,{className:"text-gray-600"}),e.jsx(x,{count:400,width:60,color:"bg-gradient-to-b from-green-600 to-green-800",label:"Hidden 1",sublabel:"ReLU",active:n[t].highlight==="hidden1"}),e.jsx(k,{className:"text-gray-600"}),e.jsx(x,{count:200,width:50,color:"bg-gradient-to-b from-green-600 to-green-800",label:"Hidden 2",sublabel:"ReLU",active:n[t].highlight==="hidden2"}),e.jsx(k,{className:"text-gray-600"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:`transition-all duration-500 ${n[t].highlight==="mu"?"scale-110":""}`,children:[e.jsxs("div",{className:`w-16 h-14 rounded-lg bg-gradient-to-br from-purple-500 to-purple-700 flex flex-col items-center justify-center ${n[t].highlight==="mu"?"ring-2 ring-white":""}`,children:[e.jsx("p",{className:"text-lg font-bold",children:"20"}),e.jsx("p",{className:"text-xs",children:"Î¼"})]}),e.jsx("p",{className:`text-center text-xs mt-1 ${n[t].highlight==="mu"?"text-purple-300":"text-gray-500"}`,children:"Mean"})]}),e.jsxs("div",{className:`transition-all duration-500 ${n[t].highlight==="logvar"?"scale-110":""}`,children:[e.jsxs("div",{className:`w-16 h-14 rounded-lg bg-gradient-to-br from-pink-500 to-pink-700 flex flex-col items-center justify-center ${n[t].highlight==="logvar"?"ring-2 ring-white":""}`,children:[e.jsx("p",{className:"text-lg font-bold",children:"20"}),e.jsx("p",{className:"text-xs",children:"log ÏƒÂ²"})]}),e.jsx("p",{className:`text-center text-xs mt-1 ${n[t].highlight==="logvar"?"text-pink-300":"text-gray-500"}`,children:"Log-Var"})]})]}),e.jsx(k,{className:"text-gray-600"}),e.jsxs("div",{className:`transition-all duration-500 ${n[t].highlight==="reparam"?"scale-110":""}`,children:[e.jsxs("div",{className:`w-20 h-20 rounded-full bg-gradient-to-br from-violet-500 to-purple-700 flex flex-col items-center justify-center ${n[t].highlight==="reparam"?"ring-2 ring-white sample-bounce":""}`,children:[e.jsx("p",{className:"text-lg font-bold",children:"z"}),e.jsx("p",{className:"text-xs opacity-80",children:"latent"})]}),e.jsx("p",{className:`text-center text-xs mt-1 ${n[t].highlight==="reparam"?"text-purple-300":"text-gray-500"}`,children:"Sample"})]})]}),n[t].highlight==="reparam"&&e.jsxs("div",{className:"mt-6 p-4 bg-purple-900/30 rounded-xl border border-purple-500/30",children:[e.jsxs("p",{className:"text-center font-mono text-lg",children:[e.jsx("span",{className:"text-purple-400",children:"z"})," =",e.jsx("span",{className:"text-purple-300",children:" Î¼"})," +",e.jsx("span",{className:"text-pink-300",children:" Ïƒ"})," âŠ™",e.jsx("span",{className:"text-yellow-300",children:" Îµ"}),e.jsx("span",{className:"text-gray-400 text-sm ml-2",children:"(where Îµ ~ N(0, I))"})]}),e.jsx("p",{className:"text-center text-sm text-gray-400 mt-2",children:"Ïƒ = exp(0.5 Ã— log ÏƒÂ²) â€” computing Ïƒ from log-variance for numerical stability"})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"PyTorch Encoder Implementation:"}),e.jsx("pre",{className:"text-sm overflow-x-auto",children:e.jsx("code",{className:"text-green-300",children:`class Encoder(nn.Module):
    def __init__(self, input_dim=784, hidden_dim=400, latent_dim=20):
        super().__init__()
        self.fc1 = nn.Linear(input_dim, hidden_dim)
        self.fc2 = nn.Linear(hidden_dim, hidden_dim // 2)
        self.fc_mu = nn.Linear(hidden_dim // 2, latent_dim)      # Mean
        self.fc_logvar = nn.Linear(hidden_dim // 2, latent_dim)  # Log-variance
    
    def forward(self, x):
        h = F.relu(self.fc1(x))
        h = F.relu(self.fc2(h))
        mu = self.fc_mu(h)
        logvar = self.fc_logvar(h)
        return mu, logvar
    
    def reparameterize(self, mu, logvar):
        std = torch.exp(0.5 * logvar)  # Ïƒ = exp(0.5 Ã— log ÏƒÂ²)
        eps = torch.randn_like(std)     # Îµ ~ N(0, I)
        return mu + std * eps           # z = Î¼ + Ïƒ âŠ™ Îµ`})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-purple-900/20 rounded-xl p-4 border border-purple-500/30",children:[e.jsx("h4",{className:"font-bold text-purple-300 mb-2",children:"Why Two Outputs?"}),e.jsxs("p",{className:"text-sm text-gray-300",children:["The encoder outputs both Î¼ and log ÏƒÂ² because we're learning a ",e.jsx("strong",{children:"distribution"}),", not a single point. Each latent dimension has its own mean and variance."]})]}),e.jsxs("div",{className:"bg-green-900/20 rounded-xl p-4 border border-green-500/30",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-2",children:"Why Log-Variance?"}),e.jsx("p",{className:"text-sm text-gray-300",children:"We output log ÏƒÂ² instead of Ïƒ because: (1) variance must be positive, but log can be any real number, (2) it's more numerically stable during training."})]})]})]})}function ne(){const[t,m]=l.useState("gaussian"),[s,c]=l.useState([]),[a,n]=l.useState(0),[d,x]=l.useState(!1);l.useRef(null);const b=()=>{const r=[];for(let i=0;i<50;i++){const h=Math.random(),g=Math.random(),y=Math.sqrt(-2*Math.log(h))*Math.cos(2*Math.PI*g),v=Math.sqrt(-2*Math.log(h))*Math.sin(2*Math.PI*g);r.push({x:y*.8,y:v*.8,label:Math.floor(i/5)})}c(r)};l.useEffect(()=>{b()},[]),l.useEffect(()=>{if(d&&t==="interpolation"){const r=setInterval(()=>{n(i=>i>=1?0:i+.02)},50);return()=>clearInterval(r)}},[d,t]);const p=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#3b82f6","#8b5cf6","#ec4899","#f43f5e","#14b8a6"],N=(r,i=60)=>{const h={0:[[0,1,1,0],[1,0,0,1],[1,0,0,1],[1,0,0,1],[0,1,1,0]],1:[[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,1,0,0],[1,1,1,0]],2:[[1,1,1,0],[0,0,1,0],[0,1,0,0],[1,0,0,0],[1,1,1,1]],3:[[1,1,1,0],[0,0,1,0],[0,1,1,0],[0,0,1,0],[1,1,1,0]],4:[[1,0,1,0],[1,0,1,0],[1,1,1,1],[0,0,1,0],[0,0,1,0]],5:[[1,1,1,1],[1,0,0,0],[1,1,1,0],[0,0,1,0],[1,1,1,0]],6:[[0,1,1,0],[1,0,0,0],[1,1,1,0],[1,0,0,1],[0,1,1,0]],7:[[1,1,1,1],[0,0,1,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],8:[[0,1,1,0],[1,0,0,1],[0,1,1,0],[1,0,0,1],[0,1,1,0]],9:[[0,1,1,0],[1,0,0,1],[0,1,1,1],[0,0,1,0],[0,1,0,0]]},g=h[r]||h[0],y=i/5;return e.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(4, ${y}px)`,gap:"1px"},children:g.flat().map((v,w)=>e.jsx("div",{className:`${v?"bg-white":"bg-white/10"} rounded-sm`,style:{width:y,height:y}},w))})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Latent Space: ",e.jsx("span",{className:"text-purple-400",children:"The Hidden World"})]}),e.jsx("p",{className:"text-gray-400",children:"A continuous, structured space where similar inputs are close together"})]}),e.jsx("div",{className:"flex justify-center gap-2",children:[{id:"gaussian",label:"Gaussian Distribution",icon:q},{id:"clusters",label:"Class Clusters",icon:S},{id:"interpolation",label:"Interpolation",icon:C}].map(r=>e.jsxs("button",{onClick:()=>{m(r.id),x(!1)},className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${t===r.id?"bg-purple-600 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[e.jsx(r.icon,{size:18}),r.label]},r.id))}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[t==="gaussian"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-center text-lg font-bold text-purple-300",children:"KL Divergence Forces Latent Space â†’ N(0, I)"}),e.jsxs("div",{className:"relative h-80 bg-black/30 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[e.jsx("div",{className:"w-64 h-64 rounded-full gaussian-gradient opacity-50"}),e.jsx("div",{className:"absolute w-48 h-48 rounded-full gaussian-gradient opacity-40"}),e.jsx("div",{className:"absolute w-32 h-32 rounded-full gaussian-gradient opacity-30"})]}),e.jsx("div",{className:"absolute top-1/2 left-4 -translate-y-1/2 text-gray-500 text-sm",children:"zâ‚"}),e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-gray-500 text-sm",children:"zâ‚‚"}),s.map((r,i)=>e.jsx("div",{className:"absolute w-3 h-3 rounded-full transition-all duration-500 latent-drift",style:{left:`calc(50% + ${r.x*100}px)`,top:`calc(50% + ${r.y*100}px)`,backgroundColor:p[r.label%10],animationDelay:`${i*50}ms`}},i)),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-4 h-0.5 bg-gray-500 -translate-x-1/2"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-0.5 h-4 bg-gray-500 -translate-y-1/2"})]}),e.jsxs("button",{onClick:b,className:"mx-auto flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg",children:[e.jsx(S,{size:18}),"Resample"]}),e.jsx("p",{className:"text-center text-sm text-gray-400",children:"The KL divergence loss encourages the learned distribution q(z|x) to be close to N(0, I), creating a smooth, continuous latent space."})]}),t==="clusters"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-center text-lg font-bold text-purple-300",children:"Similar Inputs â†’ Nearby Latent Points"}),e.jsxs("div",{className:"relative h-80 bg-black/30 rounded-xl overflow-hidden",children:[[0,1,2,3,4,5,6,7,8,9].map(r=>{const i=r/10*2*Math.PI,h=80;return e.jsxs("div",{className:"absolute flex flex-col items-center",style:{left:`calc(50% + ${Math.cos(i)*h}px - 20px)`,top:`calc(50% + ${Math.sin(i)*h}px - 20px)`},children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center opacity-80 border-2",style:{backgroundColor:p[r]+"40",borderColor:p[r]},children:e.jsx("span",{className:"font-bold",children:r})}),[0,1,2].map(g=>e.jsx("div",{className:"absolute w-2 h-2 rounded-full",style:{backgroundColor:p[r],left:`${20+(Math.random()-.5)*30}px`,top:`${20+(Math.random()-.5)*30}px`}},g))]},r)}),e.jsx("div",{className:"absolute top-4 left-4 text-xs text-gray-500",children:"2D projection of latent space (t-SNE style)"})]}),e.jsx("p",{className:"text-center text-sm text-gray-400",children:"Different digit classes form distinct clusters in latent space. VAE learns meaningful features that separate similar from dissimilar inputs."})]}),t==="interpolation"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-center text-lg font-bold text-purple-300",children:"Smooth Interpolation in Latent Space"}),e.jsxs("div",{className:"flex items-center justify-center gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-900/30 p-4 rounded-xl border border-blue-500/30",children:N(3,50)}),e.jsx("p",{className:"text-sm text-blue-400 mt-2",children:"z_start (digit 3)"})]}),e.jsx("div",{className:"flex-1 max-w-md",children:e.jsxs("div",{className:"relative h-16 bg-gradient-to-r from-blue-600/30 via-purple-600/30 to-orange-600/30 rounded-full",children:[e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-6 h-6 bg-white rounded-full shadow-lg transition-all duration-100",style:{left:`calc(${a*100}% - 12px)`}}),e.jsxs("div",{className:"absolute -bottom-8 left-0 right-0 text-center text-xs text-gray-400 font-mono",children:["z_interp = (1-t) Ã— z_start + t Ã— z_end, t = ",a.toFixed(2)]})]})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-orange-900/30 p-4 rounded-xl border border-orange-500/30",children:N(8,50)}),e.jsx("p",{className:"text-sm text-orange-400 mt-2",children:"z_end (digit 8)"})]})]}),e.jsxs("div",{className:"mt-12 pt-4",children:[e.jsx("p",{className:"text-center text-sm text-gray-400 mb-4",children:"Generated outputs along the interpolation path:"}),e.jsx("div",{className:"flex justify-center gap-2",children:[0,.125,.25,.375,.5,.625,.75,.875,1].map((r,i)=>e.jsxs("div",{className:`p-2 rounded-lg transition-all ${Math.abs(r-a)<.1?"bg-purple-600/50 scale-110":"bg-white/5"}`,children:[N(Math.round(3+5*r)%10,35),e.jsx("p",{className:"text-center text-xs text-gray-500 mt-1",children:r.toFixed(2)})]},i))})]}),e.jsxs("div",{className:"flex justify-center gap-3 mt-4",children:[e.jsxs("button",{onClick:()=>x(!d),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg",children:[d?e.jsx(M,{size:18}):e.jsx(C,{size:18}),d?"Pause":"Animate"]}),e.jsxs("button",{onClick:()=>n(0),className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg",children:[e.jsx($,{size:18}),"Reset"]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-900/20 rounded-xl p-4 border border-blue-500/30",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-2",children:"ðŸŽ¯ Continuity"}),e.jsx("p",{className:"text-sm text-gray-300",children:'Small changes in z produce small changes in output. No "dead zones" in latent space thanks to KL regularization.'})]}),e.jsxs("div",{className:"bg-purple-900/20 rounded-xl p-4 border border-purple-500/30",children:[e.jsx("h4",{className:"font-bold text-purple-300 mb-2",children:"âœ¨ Generation"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Sample z ~ N(0, I) and decode to generate new data. The decoder has learned to map any point in this space."})]}),e.jsxs("div",{className:"bg-pink-900/20 rounded-xl p-4 border border-pink-500/30",children:[e.jsx("h4",{className:"font-bold text-pink-300 mb-2",children:"ðŸ”€ Interpolation"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Linear interpolation between two latent codes produces meaningful transitions between their decoded outputs."})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-white/10",children:[e.jsx("h4",{className:"font-bold mb-3",children:"ðŸ“ Latent Dimension Choices"}),e.jsx("div",{className:"grid grid-cols-4 gap-4 text-center",children:[{dim:2,use:"Visualization",notes:"Can plot, but limited capacity"},{dim:20,use:"MNIST digits",notes:"Good balance for simple images"},{dim:128,use:"Face images",notes:"More capacity for complex data"},{dim:512,use:"High-res images",notes:"Even more expressive power"}].map((r,i)=>e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-400",children:r.dim}),e.jsx("p",{className:"text-sm font-medium",children:r.use}),e.jsx("p",{className:"text-xs text-gray-500",children:r.notes})]},i))})]})]})}function le(){const[t,m]=l.useState(0),[s,c]=l.useState(!1),[a,n]=l.useState(!1),d=l.useRef(null),x=[{title:"Latent Vector z",description:"The sampled latent vector z (or a generated sample from N(0,I)) enters the decoder.",highlight:"latent"},{title:"First Hidden Layer",description:"Linear transformation expands z from 20 dimensions to 200, beginning the reconstruction process.",highlight:"hidden1"},{title:"Second Hidden Layer",description:"Further expansion to 400 dimensions with ReLU activation, adding capacity for complex features.",highlight:"hidden2"},{title:"Output Layer",description:"Final linear layer maps to 784 dimensions (28Ã—28 image). Sigmoid squashes values to [0,1] for pixel intensities.",highlight:"output"},{title:"Reconstructed Image",description:"The 784-dimensional output is reshaped to 28Ã—28 to form the reconstructed (or generated) image.",highlight:"image"}];l.useEffect(()=>(s&&(d.current=setInterval(()=>{m(h=>h>=x.length-1?(c(!1),h):h+1)},2e3)),()=>clearInterval(d.current)),[s]);const b=()=>{m(0),c(!1)},p=({count:h,width:g,color:y,label:v,active:w,sublabel:j})=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`relative transition-all duration-500 ${w?"scale-110":"scale-100"}`,style:{width:`${g}px`},children:e.jsxs("div",{className:`h-32 rounded-lg ${y} ${w?"ring-2 ring-white ring-offset-2 ring-offset-transparent":""} flex flex-col items-center justify-center transition-all`,children:[e.jsx("p",{className:"text-2xl font-bold",children:h}),e.jsx("p",{className:"text-xs opacity-80",children:"neurons"})]})}),e.jsx("p",{className:`mt-2 text-sm font-medium transition-colors ${w?"text-white":"text-gray-400"}`,children:v}),j&&e.jsx("p",{className:"text-xs text-gray-500",children:j})]}),N=()=>Array(16).fill(0).map(()=>Math.random()>.4?1:0),[r,i]=l.useState(N());return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["Decoder: ",e.jsx("span",{className:"text-orange-400",children:"From Latent to Data"})]}),e.jsx("p",{className:"text-gray-400",children:"The decoder learns to reconstruct data from latent representations"})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:()=>n(!1),className:`px-4 py-2 rounded-lg font-medium transition-all ${a?"bg-white/10 text-gray-400":"bg-orange-600 text-white"}`,children:"Reconstruction Mode"}),e.jsxs("button",{onClick:()=>{n(!0),i(N())},className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${a?"bg-purple-600 text-white":"bg-white/10 text-gray-400"}`,children:[e.jsx(D,{size:18}),"Generation Mode"]})]}),e.jsx("div",{className:`rounded-xl p-4 border ${a?"bg-purple-900/20 border-purple-500/30":"bg-orange-900/20 border-orange-500/30"}`,children:a?e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{className:"text-purple-400",children:"Generation Mode:"})," Sample z ~ N(0, I) directly (no encoder needed!) and pass through decoder to generate new data that looks like the training distribution."]}):e.jsxs("p",{className:"text-gray-300",children:[e.jsx("strong",{className:"text-orange-400",children:"Reconstruction Mode:"})," The encoder produces z from input x, then the decoder reconstructs xÌ‚ â‰ˆ x. Loss = how different is xÌ‚ from x?"]})}),e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsxs("button",{onClick:()=>c(!s),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors",children:[s?e.jsx(M,{size:18}):e.jsx(C,{size:18}),s?"Pause":"Play Animation"]}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:[e.jsx($,{size:18}),"Reset"]}),a&&e.jsxs("button",{onClick:()=>i(N()),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg transition-colors",children:[e.jsx(D,{size:18}),"New Sample"]})]}),e.jsx("div",{className:"flex justify-center gap-2",children:x.map((h,g)=>e.jsx("button",{onClick:()=>{m(g),c(!1)},className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all ${g===t?"bg-orange-500 text-white scale-110":g<t?"bg-orange-900 text-orange-300":"bg-white/10 text-gray-500"}`,children:g+1},g))}),e.jsxs("div",{className:"bg-orange-900/20 border border-orange-500/30 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-bold text-orange-400",children:["Step ",t+1,": ",x[t].title]}),e.jsx("p",{className:"text-gray-300 mt-1",children:x[t].description})]}),e.jsx("div",{className:"bg-black/30 rounded-2xl p-8 border border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:`transition-all duration-500 ${x[t].highlight==="latent"?"scale-110":""}`,children:[e.jsxs("div",{className:`w-20 h-20 rounded-full flex flex-col items-center justify-center ${a?"bg-gradient-to-br from-purple-500 to-violet-700":"bg-gradient-to-br from-violet-500 to-purple-700"} ${x[t].highlight==="latent"?"ring-2 ring-white sample-bounce":""}`,children:[e.jsx("p",{className:"text-lg font-bold",children:"z"}),e.jsx("p",{className:"text-xs opacity-80",children:a?"~N(0,I)":"encoded"})]}),e.jsx("p",{className:`text-center text-sm mt-2 ${x[t].highlight==="latent"?"text-purple-300":"text-gray-500"}`,children:a?"Sampled":"Latent"}),e.jsx("p",{className:"text-center text-xs text-gray-500",children:"[batch, 20]"})]}),e.jsx(k,{className:"text-gray-600"}),e.jsx(p,{count:200,width:50,color:"bg-gradient-to-b from-orange-600 to-orange-800",label:"Hidden 1",sublabel:"ReLU",active:x[t].highlight==="hidden1"}),e.jsx(k,{className:"text-gray-600"}),e.jsx(p,{count:400,width:60,color:"bg-gradient-to-b from-orange-600 to-orange-800",label:"Hidden 2",sublabel:"ReLU",active:x[t].highlight==="hidden2"}),e.jsx(k,{className:"text-gray-600"}),e.jsx(p,{count:784,width:80,color:"bg-gradient-to-b from-red-600 to-red-800",label:"Output",sublabel:"Sigmoid",active:x[t].highlight==="output"}),e.jsx(k,{className:"text-gray-600"}),e.jsxs("div",{className:`transition-all duration-500 ${x[t].highlight==="image"?"scale-110":""}`,children:[e.jsx("div",{className:`w-24 h-24 rounded-xl bg-gradient-to-br from-pink-500 to-rose-600 flex items-center justify-center ${x[t].highlight==="image"?"ring-2 ring-white":""}`,children:e.jsx("div",{className:"grid grid-cols-4 gap-0.5",children:r.map((h,g)=>e.jsx("div",{className:`w-3 h-3 rounded-sm transition-all ${h?"bg-white/90":"bg-white/20"}`},g))})}),e.jsx("p",{className:`text-center text-sm mt-2 ${x[t].highlight==="image"?"text-pink-300":"text-gray-500"}`,children:a?"Generated":"Reconstructed"}),e.jsx("p",{className:"text-center text-xs text-gray-500",children:"28Ã—28"})]})]})}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-4 border border-white/10",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"PyTorch Decoder Implementation:"}),e.jsx("pre",{className:"text-sm overflow-x-auto",children:e.jsx("code",{className:"text-orange-300",children:`class Decoder(nn.Module):
    def __init__(self, latent_dim=20, hidden_dim=400, output_dim=784):
        super().__init__()
        self.fc1 = nn.Linear(latent_dim, hidden_dim // 2)
        self.fc2 = nn.Linear(hidden_dim // 2, hidden_dim)
        self.fc_out = nn.Linear(hidden_dim, output_dim)
    
    def forward(self, z):
        h = F.relu(self.fc1(z))
        h = F.relu(self.fc2(h))
        # Sigmoid for pixel values in [0, 1]
        return torch.sigmoid(self.fc_out(h))

# Generation: sample from prior and decode
def generate(decoder, num_samples=10, latent_dim=20):
    z = torch.randn(num_samples, latent_dim)  # Sample z ~ N(0, I)
    with torch.no_grad():
        generated = decoder(z)
    return generated.view(-1, 1, 28, 28)  # Reshape to images`})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-orange-900/20 rounded-xl p-4 border border-orange-500/30",children:[e.jsx("h4",{className:"font-bold text-orange-300 mb-2",children:"Why Sigmoid Output?"}),e.jsx("p",{className:"text-sm text-gray-300",children:"For images normalized to [0,1], sigmoid constrains outputs to valid pixel values. This also works well with Binary Cross-Entropy loss for reconstruction."})]}),e.jsxs("div",{className:"bg-purple-900/20 rounded-xl p-4 border border-purple-500/30",children:[e.jsx("h4",{className:"font-bold text-purple-300 mb-2",children:"Decoder as Generator"}),e.jsx("p",{className:"text-sm text-gray-300",children:"After training, the decoder alone is a generative model! Sample z randomly, decode it, and you get novel samples from the learned data distribution."})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-4 border border-white/10",children:[e.jsx("h4",{className:"font-bold mb-3",children:"ðŸ—ï¸ Decoder Architecture Variants"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsx("h5",{className:"font-medium text-orange-400",children:"MLP Decoder"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Fully connected layers. Simple but works for small images like MNIST."})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsx("h5",{className:"font-medium text-orange-400",children:"Transposed Conv (Deconv)"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ConvTranspose2d layers for upsampling. Better for larger images."})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsx("h5",{className:"font-medium text-orange-400",children:"Upsample + Conv"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Nearest/bilinear upsample followed by conv. Avoids checkerboard artifacts."})]})]})]})]})}function ie(){const[t,m]=l.useState(1),[s,c]=l.useState(150),[a,n]=l.useState(25),[d,x]=l.useState(!1);l.useEffect(()=>{if(d){const p=setInterval(()=>{c(N=>Math.max(20,N-Math.random()*5)),n(N=>{const r=10+Math.random()*5;return N+(r-N)*.1})},200);return()=>clearInterval(p)}},[d]);const b=s+t*a;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:["VAE Loss: ",e.jsx("span",{className:"text-pink-400",children:"The ELBO"})]}),e.jsx("p",{className:"text-gray-400",children:"Evidence Lower Bound = Reconstruction Loss + KL Divergence"})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-center text-lg font-bold mb-4",children:"The VAE Loss Function"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap text-lg font-mono",children:[e.jsx("span",{className:"text-gray-400",children:"â„’"}),e.jsx("span",{className:"text-gray-500",children:"="}),e.jsx("div",{className:"bg-blue-900/30 border border-blue-500/30 rounded-lg px-4 py-2",children:e.jsxs("span",{className:"text-blue-400",children:["ð”¼",e.jsx("sub",{children:"q(z|x)"}),"[log p(x|z)]"]})}),e.jsx("span",{className:"text-gray-500",children:"âˆ’"}),e.jsx("div",{className:"bg-purple-900/30 border border-purple-500/30 rounded-lg px-4 py-2",children:e.jsx("span",{className:"text-purple-400",children:"Î² Â· KL(q(z|x) || p(z))"})})]}),e.jsxs("div",{className:"mt-4 grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-900/20 rounded-xl p-4 border border-blue-500/30",children:[e.jsxs("h4",{className:"font-bold text-blue-400 flex items-center gap-2",children:[e.jsx(U,{size:18}),"Reconstruction Loss"]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"How well can we reconstruct the input from z? Usually Binary Cross-Entropy (for [0,1] pixels) or MSE. Encourages decoder to output xÌ‚ â‰ˆ x."}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 font-mono",children:"BCE = -Î£[xÂ·log(xÌ‚) + (1-x)Â·log(1-xÌ‚)]"})]}),e.jsxs("div",{className:"bg-purple-900/20 rounded-xl p-4 border border-purple-500/30",children:[e.jsxs("h4",{className:"font-bold text-purple-400 flex items-center gap-2",children:[e.jsx(ee,{size:18}),"KL Divergence Loss"]}),e.jsx("p",{className:"text-sm text-gray-300 mt-2",children:"Forces q(z|x) to be close to the prior p(z) = N(0, I). Regularizes the latent space to be smooth and continuous."}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 font-mono",children:"KL = -Â½ Î£[1 + log(ÏƒÂ²) - Î¼Â² - ÏƒÂ²]"})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(V,{size:20,className:"text-yellow-400"}),"Interactive Loss Balance"]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Î² (KL Weight):"}),e.jsx("span",{className:"text-purple-400 font-mono",children:t.toFixed(1)})]}),e.jsx("input",{type:"range",min:"0",max:"4",step:"0.1",value:t,onChange:p=>m(parseFloat(p.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"0 (No KL)"}),e.jsx("span",{children:"1 (Standard VAE)"}),e.jsx("span",{children:"4 (Strong regularization)"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-blue-400",children:"Reconstruction Loss"}),e.jsx("span",{className:"font-mono",children:s.toFixed(1)})]}),e.jsx("div",{className:"h-6 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300",style:{width:`${Math.min(100,s/2)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-purple-400",children:"KL Loss Ã— Î²"}),e.jsx("span",{className:"font-mono",children:(t*a).toFixed(1)})]}),e.jsx("div",{className:"h-6 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-purple-500 to-purple-600 transition-all duration-300",style:{width:`${Math.min(100,t*a/2)}%`}})})]}),e.jsxs("div",{className:"pt-2 border-t border-white/10",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-pink-400 font-bold",children:"Total Loss (ELBO)"}),e.jsx("span",{className:"font-mono font-bold",children:b.toFixed(1)})]}),e.jsx("div",{className:"h-8 bg-gray-800 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-rose-600 transition-all duration-300",style:{width:`${Math.min(100,b/4)}%`}})})]})]}),e.jsx("button",{onClick:()=>x(!d),className:"mt-4 px-4 py-2 bg-pink-600 hover:bg-pink-700 rounded-lg transition-colors",children:d?"Stop Training Simulation":"Simulate Training"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 rounded-2xl p-6 border border-purple-500/30",children:[e.jsx("h3",{className:"text-lg font-bold mb-3 text-purple-300",children:"ðŸ”¬ Î²-VAE: Disentanglement"}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["By increasing Î² ",">","1, we get ",e.jsx("strong",{children:"Î²-VAE"})," which encourages more disentangled latent representations. Each latent dimension learns to capture a single factor of variation."]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-black/20 rounded-lg p-3",children:[e.jsx("p",{className:"font-bold text-center",children:"Î² = 0"}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-1",children:"Regular autoencoder. No KL constraint, no generation ability."})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-3 ring-2 ring-purple-500/50",children:[e.jsx("p",{className:"font-bold text-center text-purple-400",children:"Î² = 1"}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-1",children:"Standard VAE. Balance of reconstruction and regularization."})]}),e.jsxs("div",{className:"bg-black/20 rounded-lg p-3",children:[e.jsxs("p",{className:"font-bold text-center",children:["Î² ",">"," 1"]}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-1",children:"Î²-VAE. Stronger regularization â†’ more disentanglement, blurrier reconstructions."})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"ðŸ“ KL Divergence Closed Form"}),e.jsx("p",{className:"text-gray-300 mb-4",children:"For Gaussian distributions, KL divergence has a closed-form solution (no sampling needed!):"}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-4 font-mono text-sm overflow-x-auto",children:[e.jsxs("p",{className:"text-purple-300",children:["KL(q(z|x) || p(z)) = -Â½ Î£",e.jsx("sub",{children:"j=1"}),e.jsx("sup",{children:"J"})," (1 + log(Ïƒ",e.jsx("sub",{children:"j"}),"Â²) - Î¼",e.jsx("sub",{children:"j"}),"Â² - Ïƒ",e.jsx("sub",{children:"j"}),"Â²)"]}),e.jsx("p",{className:"text-gray-500 mt-2",children:"where J = latent_dim, and Î¼, Ïƒ are outputs from encoder"})]}),e.jsxs("div",{className:"mt-4 bg-green-900/20 rounded-xl p-4 border border-green-500/30",children:[e.jsx("h4",{className:"font-bold text-green-300 mb-2",children:"PyTorch Implementation:"}),e.jsx("pre",{className:"text-sm overflow-x-auto",children:e.jsx("code",{className:"text-green-300",children:`def kl_divergence(mu, logvar):
    # KL(q(z|x) || N(0, I))
    # = -0.5 * sum(1 + log(sigma^2) - mu^2 - sigma^2)
    return -0.5 * torch.sum(1 + logvar - mu.pow(2) - logvar.exp())

def vae_loss(x, x_recon, mu, logvar, beta=1.0):
    # Reconstruction loss (BCE for binary images)
    recon_loss = F.binary_cross_entropy(x_recon, x, reduction='sum')
    
    # KL divergence
    kl_loss = kl_divergence(mu, logvar)
    
    return recon_loss + beta * kl_loss`})})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-900/20 rounded-xl p-4 border border-blue-500/30",children:[e.jsx("h4",{className:"font-bold text-blue-300 mb-2",children:"â¬†ï¸ High Reconstruction, Low KL"}),e.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[e.jsx("li",{children:"â€¢ Sharp, accurate reconstructions"}),e.jsx("li",{children:'â€¢ Latent space may have "holes"'}),e.jsx("li",{children:"â€¢ Poor generation quality"}),e.jsx("li",{children:"â€¢ Overfitting to training data"})]})]}),e.jsxs("div",{className:"bg-purple-900/20 rounded-xl p-4 border border-purple-500/30",children:[e.jsx("h4",{className:"font-bold text-purple-300 mb-2",children:"â¬†ï¸ Low Reconstruction, High KL"}),e.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[e.jsx("li",{children:"â€¢ Blurry reconstructions"}),e.jsx("li",{children:"â€¢ Smooth, continuous latent space"}),e.jsx("li",{children:"â€¢ Better generation/interpolation"}),e.jsx("li",{children:"â€¢ Information bottleneck"})]})]})]})]})}function oe(){const[t,m]=l.useState("quiz"),[s,c]=l.useState(0),[a,n]=l.useState(null),[d,x]=l.useState(!1),[b,p]=l.useState(0),[N,r]=l.useState(0),[i,h]=l.useState(784),[g,y]=l.useState([400,200]),[v,w]=l.useState(20),j=[{question:"What does the encoder output in a VAE?",options:["A single latent vector z","Mean (Î¼) and variance (ÏƒÂ²) parameters","The reconstructed image directly","Classification probabilities"],correct:1,explanation:"The encoder outputs Î¼ and log ÏƒÂ² (or ÏƒÂ²), which parameterize the latent distribution q(z|x). We then sample z from this distribution."},{question:"What is the reparameterization trick used for?",options:["To speed up training","To reduce memory usage","To enable backpropagation through the sampling step","To normalize the inputs"],correct:2,explanation:"The reparameterization trick (z = Î¼ + ÏƒâŠ™Îµ where Îµ~N(0,I)) moves the randomness outside the computational graph, allowing gradients to flow through."},{question:"What does the KL divergence term in the VAE loss encourage?",options:["Better image quality","Faster training convergence","The latent distribution to be close to N(0, I)","Larger latent dimensions"],correct:2,explanation:"KL(q(z|x) || p(z)) measures how different the learned distribution is from the prior N(0,I). Minimizing it regularizes the latent space."},{question:"How can you generate new samples with a trained VAE?",options:["Run the encoder on random noise","Sample z from N(0,I) and pass through decoder","Average all training samples","Use the KL divergence directly"],correct:1,explanation:"After training, sample z ~ N(0,I) and decode it. The decoder has learned to map points in the standard normal to realistic outputs."},{question:"Why do we output log ÏƒÂ² instead of Ïƒ directly?",options:["It's faster to compute","Variance must be positive; log can be any real number","It reduces the number of parameters","It improves image quality"],correct:1,explanation:"ÏƒÂ² must be positive, but neural network outputs can be any real number. Using log ÏƒÂ² removes this constraint. We recover Ïƒ = exp(0.5 Ã— log ÏƒÂ²)."},{question:"What happens if Î² > 1 in a Î²-VAE?",options:["Training becomes faster","Reconstruction quality improves","Latent representations become more disentangled","The model overfits more"],correct:2,explanation:"Higher Î² puts more weight on the KL term, forcing the latent space to be more Gaussian. This encourages disentanglement but may blur reconstructions."},{question:"What is the 'posterior collapse' problem in VAEs?",options:["The decoder produces all zeros","The encoder ignores the input and outputs the prior","The loss becomes negative","Training takes too long"],correct:1,explanation:"Posterior collapse occurs when the encoder outputs Î¼â‰ˆ0, Ïƒâ‰ˆ1 regardless of input, meaning q(z|x) â‰ˆ p(z). The latent code carries no information about x."},{question:"For MNIST images (28Ã—28), what is a typical latent dimension?",options:["784 (same as input)","2 (for visualization only)","10-50","1000+"],correct:2,explanation:"For MNIST, 10-50 dimensions work well. 2D is for visualization but limited capacity. Too high dimensions are unnecessary for simple digits."},{question:"What is the ELBO in VAE terminology?",options:["A type of activation function","Evidence Lower Bound - the VAE loss function","A regularization technique","A decoder architecture"],correct:1,explanation:"ELBO (Evidence Lower Bound) is the objective we maximize. It equals reconstruction log-likelihood minus KL divergence. Maximizing ELBO â‰ˆ minimizing the VAE loss."},{question:"Why are VAE-generated images often blurry compared to GANs?",options:["VAEs use smaller networks","VAEs optimize pixel-wise reconstruction, averaging over uncertainty","VAEs train slower","VAEs can only generate grayscale images"],correct:1,explanation:"VAEs optimize log-likelihood which averages over all possible outputs. When uncertain, this leads to averaging (blurring). GANs optimize adversarial loss which prefers sharp outputs."}],B=u=>{d||(n(u),x(!0),r(o=>o+1),u===j[s].correct&&p(o=>o+1))},K=()=>{s<j.length-1&&(c(u=>u+1),n(null),x(!1))},G=()=>{c(0),n(null),x(!1),p(0),r(0)},O=()=>{let u=0,o=[],f=i;g.forEach((z,A)=>{const L=f*z+z;o.push({name:`Encoder FC${A+1}`,params:L,dims:`${f} â†’ ${z}`}),u+=L,f=z});const T=f*v+v,R=f*v+v;o.push({name:"FC Î¼",params:T,dims:`${f} â†’ ${v}`}),o.push({name:"FC log ÏƒÂ²",params:R,dims:`${f} â†’ ${v}`}),u+=T+R,f=v,[...g].reverse().forEach((z,A)=>{const L=f*z+z;o.push({name:`Decoder FC${A+1}`,params:L,dims:`${f} â†’ ${z}`}),u+=L,f=z});const P=f*i+i;return o.push({name:"FC Output",params:P,dims:`${f} â†’ ${i}`}),u+=P,{total:u,breakdown:o}},{total:W,breakdown:H}=O();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsxs("button",{onClick:()=>m("quiz"),className:`flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all ${t==="quiz"?"bg-purple-600 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[e.jsx(_,{size:20}),"Quiz (10 Questions)"]}),e.jsxs("button",{onClick:()=>m("calculator"),className:`flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all ${t==="calculator"?"bg-purple-600 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[e.jsx(Q,{size:20}),"Parameter Calculator"]})]}),t==="quiz"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-center gap-1",children:j.map((u,o)=>e.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${o===s?"bg-purple-500 scale-125":o<s?"bg-purple-800":"bg-gray-700"}`},o))}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-400",children:["Score: ",e.jsx("span",{className:"text-purple-400 font-bold",children:b})," / ",N]})}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Question ",s+1," of ",j.length]}),e.jsx("h3",{className:"text-xl font-bold mb-6",children:j[s].question}),e.jsx("div",{className:"space-y-3",children:j[s].options.map((u,o)=>{let f="bg-white/5 hover:bg-white/10 border-white/10";return d&&(o===j[s].correct?f="bg-green-900/50 border-green-500":o===a&&o!==j[s].correct&&(f="bg-red-900/50 border-red-500")),e.jsx("button",{onClick:()=>B(o),disabled:d,className:`w-full text-left p-4 rounded-xl border transition-all ${f}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[d&&o===j[s].correct&&e.jsx(te,{className:"text-green-400",size:20}),d&&o===a&&o!==j[s].correct&&e.jsx(se,{className:"text-red-400",size:20}),e.jsx("span",{children:u})]})},o)})}),d&&e.jsx("div",{className:"mt-4 p-4 bg-purple-900/30 rounded-xl border border-purple-500/30",children:e.jsxs("p",{className:"text-sm text-gray-300",children:[e.jsx("strong",{className:"text-purple-400",children:"Explanation:"})," ",j[s].explanation]})}),e.jsxs("div",{className:"flex justify-between mt-6",children:[e.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg",children:[e.jsx($,{size:18}),"Reset"]}),d&&s<j.length-1&&e.jsx("button",{onClick:K,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg",children:"Next Question â†’"}),d&&s===j.length-1&&e.jsxs("div",{className:"text-purple-400 font-bold",children:["Final Score: ",b," / ",j.length]})]})]})]}),t==="calculator"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"VAE Parameter Calculator"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Input Dimension"}),e.jsx("input",{type:"number",value:i,onChange:u=>h(parseInt(u.target.value)||784),className:"w-full mt-1 px-3 py-2 bg-black/30 border border-white/20 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Hidden Dims (comma-sep)"}),e.jsx("input",{type:"text",value:g.join(", "),onChange:u=>y(u.target.value.split(",").map(o=>parseInt(o.trim())).filter(o=>!isNaN(o))),className:"w-full mt-1 px-3 py-2 bg-black/30 border border-white/20 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Latent Dimension"}),e.jsx("input",{type:"number",value:v,onChange:u=>w(parseInt(u.target.value)||20),className:"w-full mt-1 px-3 py-2 bg-black/30 border border-white/20 rounded-lg"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Quick Presets:"}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>{h(784),y([400,200]),w(20)},className:"px-3 py-1 bg-purple-900/50 hover:bg-purple-800/50 rounded-lg text-sm border border-purple-500/30",children:"MNIST Simple"}),e.jsx("button",{onClick:()=>{h(784),y([512,256]),w(64)},className:"px-3 py-1 bg-purple-900/50 hover:bg-purple-800/50 rounded-lg text-sm border border-purple-500/30",children:"MNIST Deep"}),e.jsx("button",{onClick:()=>{h(3072),y([1024,512,256]),w(128)},className:"px-3 py-1 bg-purple-900/50 hover:bg-purple-800/50 rounded-lg text-sm border border-purple-500/30",children:"CIFAR-10"}),e.jsx("button",{onClick:()=>{h(12288),y([2048,1024,512]),w(256)},className:"px-3 py-1 bg-purple-900/50 hover:bg-purple-800/50 rounded-lg text-sm border border-purple-500/30",children:"64Ã—64 RGB"})]})]}),e.jsxs("div",{className:"bg-black/20 rounded-xl p-4",children:[e.jsx("h4",{className:"font-bold mb-3",children:"Parameter Breakdown"}),e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-500 border-b border-white/10",children:[e.jsx("th",{className:"text-left py-2",children:"Layer"}),e.jsx("th",{className:"text-left py-2",children:"Dimensions"}),e.jsx("th",{className:"text-right py-2",children:"Parameters"})]})}),e.jsx("tbody",{children:H.map((u,o)=>e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2",children:u.name}),e.jsx("td",{className:"py-2 text-gray-400 font-mono text-xs",children:u.dims}),e.jsx("td",{className:"py-2 text-right text-purple-400",children:u.params.toLocaleString()})]},o))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"font-bold",children:[e.jsx("td",{className:"py-3",colSpan:2,children:"Total Parameters"}),e.jsx("td",{className:"py-3 text-right text-pink-400 text-lg",children:W.toLocaleString()})]})})]})]})]})}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-900/30 to-pink-900/30 rounded-2xl p-6 border border-purple-500/30",children:[e.jsx("h3",{className:"text-lg font-bold mb-4 text-purple-300",children:"ðŸŽ“ Key Takeaways"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"âœ“"}),e.jsx("span",{children:"Encoder outputs Î¼ and Ïƒ, not z directly"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"âœ“"}),e.jsx("span",{children:"Reparameterization: z = Î¼ + ÏƒâŠ™Îµ"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"âœ“"}),e.jsx("span",{children:"Loss = Reconstruction + Î² Ã— KL Divergence"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"âœ“"}),e.jsx("span",{children:"Generation: sample z ~ N(0,I), decode"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"âœ“"}),e.jsx("span",{children:"Smooth latent space enables interpolation"})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-400",children:"âœ“"}),e.jsxs("span",{children:["Î² ",">"," 1 â†’ Î²-VAE (more disentanglement)"]})]})]})]})]})}const E=[{id:"overview",label:"1. Architecture",icon:J},{id:"encoder",label:"2. Encoder",icon:X},{id:"latent",label:"3. Latent Space",icon:q},{id:"decoder",label:"4. Decoder",icon:S},{id:"loss",label:"5. Loss Function",icon:Z},{id:"practice",label:"6. Practice Lab",icon:re}];function je(){const[t,m]=l.useState("overview"),s=()=>{switch(t){case"overview":return e.jsx(F,{});case"encoder":return e.jsx(ae,{});case"latent":return e.jsx(ne,{});case"decoder":return e.jsx(le,{});case"loss":return e.jsx(ie,{});case"practice":return e.jsx(oe,{});default:return e.jsx(F,{})}};return e.jsxs("div",{className:"min-h-screen text-white",children:[e.jsx("header",{className:"bg-black/30 backdrop-blur-sm border-b border-white/10 px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-xl",children:"ðŸŽ²"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Variational Autoencoder (VAE)"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Learning to Generate: Probabilistic Latent Representations"})]})]})}),e.jsx("nav",{className:"bg-black/20 px-6 py-2 flex gap-2 overflow-x-auto",children:E.map((c,a)=>{const n=c.icon,d=t===c.id,x=E.findIndex(p=>p.id===t),b=a<x;return e.jsxs("button",{onClick:()=>m(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all whitespace-nowrap ${d?"bg-purple-600 text-white":b?"bg-purple-900/50 text-purple-300 hover:bg-purple-800/50":"bg-white/5 text-gray-400 hover:bg-white/10 hover:text-white"}`,children:[e.jsx(n,{size:18}),c.label]},c.id)})}),e.jsx("div",{className:"h-1 bg-black/20 flex",children:E.map((c,a)=>{const n=E.findIndex(d=>d.id===t);return e.jsx("div",{className:`flex-1 transition-all duration-300 ${a<=n?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-transparent"}`},c.id)})}),e.jsx("main",{className:"p-6 max-w-7xl mx-auto",children:s()}),e.jsx("footer",{className:"text-center py-4 text-gray-500 text-sm",children:"ðŸ’¡ Tip: Progress through each tab in order for the best learning experience"})]})}export{je as default};
