import{r as N,j as e}from"./index-BmgLEcVh.js";function g(){const[n,h]=N.useState(32),x=(t=>Array.from({length:t},(r,s)=>({sample:s,features:Array.from({length:4},()=>Math.random()*2-1)})))(n),u=()=>{const r=[];for(let s=0;s<4;s++){const a=x.map(c=>c.features[s]),l=a.reduce((c,i)=>c+i,0)/a.length,o=a.reduce((c,i)=>c+Math.pow(i-l,2),0)/a.length,m=Math.sqrt(o+1e-5);r.push({feature:s,mean:l.toFixed(3),std:m.toFixed(3),normalized:a.map(c=>((c-l)/m).toFixed(3))})}return r},b=()=>x.map(t=>{const r=t.features.reduce((l,o)=>l+o,0)/t.features.length,s=t.features.reduce((l,o)=>l+Math.pow(o-r,2),0)/t.features.length,a=Math.sqrt(s+1e-5);return{sample:t.sample,mean:r.toFixed(3),std:a.toFixed(3),normalized:t.features.map(l=>((l-r)/a).toFixed(3))}}),f=u(),d=b();return e.jsxs("div",{className:"p-8 h-full flex flex-col items-center overflow-y-auto",children:[e.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-violet-400 mb-4",children:"Layer Norm vs Batch Norm"}),e.jsxs("p",{className:"text-lg text-slate-300 leading-relaxed mb-4",children:["The key difference: ",e.jsx("strong",{children:"which axis to normalize"}),"."]}),e.jsxs("div",{className:"bg-slate-800 p-4 rounded-lg font-mono text-sm text-left",children:[e.jsx("p",{className:"text-cyan-300",children:"y = γ * (x - μ) / σ + β"}),e.jsxs("p",{className:"text-slate-400 mt-2",children:["• Batch Norm: μ, σ computed across ",e.jsx("strong",{children:"batch"})," (per feature)",e.jsx("br",{}),"• Layer Norm: μ, σ computed across ",e.jsx("strong",{children:"features"})," (per sample)"]})]})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 w-full max-w-4xl mb-8",children:[e.jsxs("label",{className:"flex justify-between text-sm font-bold mb-3",children:["Batch Size: ",e.jsx("span",{className:"text-violet-400",children:n})]}),e.jsx("input",{type:"range",min:"1",max:"64",step:"1",value:n,onChange:t=>h(Number(t.target.value)),className:"w-full accent-violet-400"}),e.jsxs("p",{className:"text-xs text-slate-400 mt-2 text-center",children:[n===1&&"⚠️ Batch Norm fails with batch size = 1 (no variance!)",n<8&&n>1&&"⚠️ Batch Norm unstable with small batches",n>=8&&"✅ Batch Norm works well with larger batches"]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 w-full max-w-6xl",children:[e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border-2 border-cyan-500/50",children:[e.jsx("h3",{className:"font-bold text-cyan-400 mb-4 text-center text-xl",children:"Batch Normalization"}),e.jsxs("p",{className:"text-sm text-slate-400 mb-4 text-center",children:["Normalize across ",e.jsx("strong",{children:"batch dimension"})," (↓)"]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:f.map((t,r)=>e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-600",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-bold text-white",children:["Feature ",r]}),e.jsxs("div",{className:"text-xs font-mono text-slate-400",children:["μ: ",t.mean,", σ: ",t.std]})]}),e.jsxs("div",{className:"flex gap-1",children:[t.normalized.slice(0,8).map((s,a)=>e.jsx("div",{className:"flex-1 h-8 rounded flex items-center justify-center text-xs font-mono",style:{backgroundColor:`hsl(${180+parseFloat(s)*30}, 70%, 50%)`,color:"white"},title:`Sample ${a}: ${s}`,children:s},a)),t.normalized.length>8&&e.jsxs("div",{className:"flex items-center text-xs text-slate-500",children:["+",t.normalized.length-8]})]})]},r))}),e.jsx("div",{className:"mt-4 p-3 bg-cyan-900/30 rounded-lg border border-cyan-700",children:e.jsxs("p",{className:"text-xs text-cyan-300",children:["⚠️ ",e.jsx("strong",{children:"Problem"}),": Depends on batch size. Fails with batch=1 or small batches."]})})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border-2 border-violet-500/50",children:[e.jsx("h3",{className:"font-bold text-violet-400 mb-4 text-center text-xl",children:"Layer Normalization"}),e.jsxs("p",{className:"text-sm text-slate-400 mb-4 text-center",children:["Normalize across ",e.jsx("strong",{children:"feature dimension"})," (→)"]}),e.jsxs("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:[d.slice(0,8).map((t,r)=>e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg border border-slate-600",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-bold text-white",children:["Sample ",r]}),e.jsxs("div",{className:"text-xs font-mono text-slate-400",children:["μ: ",t.mean,", σ: ",t.std]})]}),e.jsx("div",{className:"flex gap-1",children:t.normalized.map((s,a)=>e.jsx("div",{className:"flex-1 h-8 rounded flex items-center justify-center text-xs font-mono",style:{backgroundColor:`hsl(${270+parseFloat(s)*30}, 70%, 50%)`,color:"white"},title:`Feature ${a}: ${s}`,children:s},a))})]},r)),d.length>8&&e.jsxs("div",{className:"text-center text-xs text-slate-500",children:["+",d.length-8," more samples"]})]}),e.jsx("div",{className:"mt-4 p-3 bg-violet-900/30 rounded-lg border border-violet-700",children:e.jsxs("p",{className:"text-xs text-violet-300",children:["✅ ",e.jsx("strong",{children:"Advantage"}),": Works with ANY batch size. Perfect for sequences (Transformers)."]})})]})]})]})}export{g as default};
