import{c as k,r as i,j as e,H as S,D as b,R as C,F as P}from"./index-CsxpOLHd.js";import{P as I}from"./play-CIyTSByC.js";import{R}from"./rotate-ccw-xVnQluc9.js";import{S as g}from"./split-CLOmGbw5.js";import{C as f}from"./check-circle-2-CPXvCiDq.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=k("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function H(){const[a,d]=i.useState(0),[n,l]=i.useState(!1),[c,E]=i.useState([{id:1,title:"Q3 Report",content:"Revenue increased by 15% to $4.2B. Operating margin improved to 23%.",color:"bg-blue-100"},{id:2,title:"Product Manual",content:"The XR-500 supports WiFi 6 and Bluetooth 5.2. Battery life is 12 hours.",color:"bg-green-100"},{id:3,title:"HR Policy",content:"Remote work is permitted 3 days per week. PTO accrues at 1.5 days/month.",color:"bg-purple-100"}]),[o,m]=i.useState([]),[j,x]=i.useState([]),[p,h]=i.useState(!1);i.useRef(null);const r=[{id:0,title:"1. Document Collection",icon:$,description:"Gather documents from various sources: PDFs, databases, APIs, web pages, etc."},{id:1,title:"2. Chunking",icon:g,description:"Split documents into smaller chunks (typically 256-512 tokens) with optional overlap."},{id:2,title:"3. Embedding",icon:S,description:"Convert each chunk into a dense vector using an embedding model (e.g., text-embedding-3-small)."},{id:3,title:"4. Indexing",icon:b,description:"Store embeddings in a vector database (Pinecone, Chroma, FAISS) for fast similarity search."}],v=()=>{const s=[];c.forEach(t=>{t.content.split(". ").forEach((u,w)=>{s.push({id:`${t.id}-${w}`,docId:t.id,title:t.title,text:u+(u.endsWith(".")?"":"."),color:t.color})})}),m(s)},N=()=>{const s=o.map(t=>({...t,vector:Array.from({length:5},()=>(Math.random()*2-1).toFixed(2))}));x(s)};i.useEffect(()=>{if(n&&a<4){const s=setTimeout(()=>{a===1&&v(),a===2&&N(),a===3&&h(!0),a<3?d(t=>t+1):l(!1)},2e3);return()=>clearTimeout(s)}},[n,a]);const y=()=>{d(0),l(!1),m([]),x([]),h(!1)};return e.jsxs("div",{className:"p-6 h-full overflow-y-auto",children:[e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-indigo-900 mb-2",children:"RAG Indexing Pipeline"}),e.jsx("p",{className:"text-slate-600",children:"Watch how documents are prepared for retrieval"})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>l(!0),disabled:n||a===4,className:"flex items-center gap-2 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 disabled:opacity-50",children:[e.jsx(I,{size:18}),a===0?"Start Pipeline":"Continue"]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-slate-200 text-slate-700 rounded-lg hover:bg-slate-300",children:[e.jsx(R,{size:18}),"Reset"]})]}),e.jsx("div",{className:"flex justify-between items-center mb-8 px-4",children:r.map((s,t)=>e.jsxs(C.Fragment,{children:[e.jsxs("div",{className:`flex flex-col items-center ${t<=a?"text-indigo-600":"text-slate-300"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mb-2 transition-all ${t<a?"bg-green-500 text-white":t===a?"bg-indigo-500 text-white animate-pulse":"bg-slate-200"}`,children:t<a?e.jsx(f,{size:20}):e.jsx(s.icon,{size:20})}),e.jsx("span",{className:"text-xs font-medium text-center max-w-20",children:s.title})]}),t<r.length-1&&e.jsx("div",{className:`flex-1 h-1 mx-2 rounded ${t<a?"bg-green-500":"bg-slate-200"}`})]},s.id))}),e.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 mb-6 text-center border border-indigo-200",children:e.jsx("p",{className:"text-indigo-800",children:r[Math.min(a,3)].description})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 min-h-96",children:[e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx(P,{size:18,className:"text-blue-500"}),"Documents"]}),e.jsx("div",{className:"space-y-2",children:c.map(s=>e.jsxs("div",{className:`${s.color} p-3 rounded-lg border transition-all ${a>=0?"opacity-100":"opacity-50"}`,children:[e.jsx("div",{className:"font-bold text-sm text-slate-800",children:s.title}),e.jsx("div",{className:"text-xs text-slate-600 mt-1",children:s.content})]},s.id))})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx(g,{size:18,className:"text-green-500"}),"Chunks"]}),e.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[a>=1&&o.map((s,t)=>e.jsxs("div",{className:`${s.color} p-2 rounded-lg border text-xs transition-all animate-fadeIn`,style:{animationDelay:`${t*100}ms`},children:[e.jsxs("div",{className:"font-semibold text-slate-700",children:[s.title," - Chunk ",t+1]}),e.jsx("div",{className:"text-slate-600 mt-1",children:s.text})]},s.id)),a<1&&e.jsx("div",{className:"text-slate-400 text-sm italic p-4 text-center",children:"Documents will be split into chunks..."})]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border",children:[e.jsxs("h3",{className:"font-bold text-slate-800 mb-3 flex items-center gap-2",children:[e.jsx(b,{size:18,className:"text-purple-500"}),"Vector Index"]}),e.jsxs("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:[a>=2&&j.map((s,t)=>e.jsxs("div",{className:`bg-purple-50 p-2 rounded-lg border transition-all ${p?"border-purple-300":"border-slate-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("span",{className:"text-xs font-semibold text-purple-700",children:[s.title," #",t+1]}),p&&e.jsx(f,{size:14,className:"text-green-500"})]}),e.jsxs("div",{className:"font-mono text-xs text-purple-600 bg-purple-100 p-1 rounded",children:["[",s.vector.join(", "),"]"]})]},s.id)),a<2&&e.jsx("div",{className:"text-slate-400 text-sm italic p-4 text-center",children:"Embeddings will appear here..."})]})]})]}),e.jsxs("div",{className:"mt-6 bg-amber-50 rounded-xl p-4 border border-amber-200",children:[e.jsx("h4",{className:"font-bold text-amber-900 mb-2",children:"ðŸ’¡ Chunking Strategies"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-amber-800",children:"Fixed Size:"}),e.jsx("p",{className:"text-amber-700 text-xs",children:"Split every N tokens (simple but may break sentences)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-amber-800",children:"Sentence-Based:"}),e.jsx("p",{className:"text-amber-700 text-xs",children:"Split at sentence boundaries (preserves meaning)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-amber-800",children:"Semantic:"}),e.jsx("p",{className:"text-amber-700 text-xs",children:"Use embeddings to find natural breakpoints"})]})]})]})]}),e.jsx("style",{jsx:!0,children:`
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(-10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fadeIn {
                    animation: fadeIn 0.3s ease-out forwards;
                }
            `})]})}export{H as default};
