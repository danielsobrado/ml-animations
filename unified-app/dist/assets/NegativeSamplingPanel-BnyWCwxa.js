import{c as g,r as o,j as e,t as N}from"./index-CsxpOLHd.js";import{P as u}from"./pause-BMcOX1vk.js";import{P as f}from"./play-CIyTSByC.js";import{R as v}from"./rotate-ccw-xVnQluc9.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=g("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22h0a3.13 3.13 0 0 1-3-3.88Z",key:"s6e0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=g("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z",key:"y3tblf"}]]);function I(){const[a,m]=o.useState(0),[d,i]=o.useState(!1),[l,j]=o.useState(5),h=["the","quick","brown","fox","jumps","over","lazy","dog","cat","bird","tree","sky"],r="fox",n="jumps",x=[{title:"The Softmax Problem",description:"Standard softmax over full vocabulary is expensive"},{title:"Positive Pair",description:"We have a real (center, context) pair from training data"},{title:"Sample Negatives",description:"Randomly select words that are NOT in the context"},{title:"Binary Classification",description:"Train: real pair ‚Üí 1, fake pairs ‚Üí 0"},{title:"Update Embeddings",description:"Only update selected word vectors (much faster!)"}];o.useEffect(()=>{if(d){const s=setInterval(()=>{m(t=>t>=x.length-1?(i(!1),t):t+1)},3e3);return()=>clearInterval(s)}},[d]);const b=()=>{m(0),i(!1)},c=h.filter(t=>t!==r&&t!==n).slice(0,l);return e.jsxs("div",{className:"space-y-6 pb-20",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-3xl font-bold mb-2",children:[e.jsx("span",{className:"text-orange-400",children:"Negative Sampling"}),": Efficient Training"]}),e.jsx("p",{className:"text-gray-400",children:"Turn expensive softmax into simple binary classification"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[e.jsxs("button",{onClick:()=>i(!d),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 rounded-lg transition-colors",children:[d?e.jsx(u,{size:18}):e.jsx(f,{size:18}),d?"Pause":"Play Animation"]}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:[e.jsx(v,{size:18}),"Reset"]}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"# Negatives:"}),e.jsx("select",{value:l,onChange:s=>j(parseInt(s.target.value)),className:"bg-gray-700 rounded px-2 py-1 text-sm",children:[2,5,10,15,20].map(s=>e.jsx("option",{value:s,children:s},s))})]})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:x.map((s,t)=>e.jsx("button",{onClick:()=>{m(t),i(!1)},className:`px-3 py-1 rounded-full text-sm transition-all ${t===a?"bg-orange-500 text-black scale-110":t<a?"bg-orange-900 text-orange-300":"bg-white/10 text-gray-500"}`,children:t+1},t))}),e.jsxs("div",{className:"bg-orange-900/20 border border-orange-500/30 rounded-xl p-4",children:[e.jsxs("h3",{className:"font-bold text-orange-400",children:["Step ",a+1,": ",x[a].title]}),e.jsx("p",{className:"text-gray-300 mt-1",children:x[a].description})]}),e.jsxs("div",{className:"bg-black/30 rounded-2xl p-6 border border-white/10",children:[a===0&&e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsx("h4",{className:"text-center text-gray-400 mb-4",children:"The Softmax Problem"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-red-900/20 rounded-xl p-4 border border-red-500/30",children:[e.jsx("h5",{className:"text-red-400 font-bold mb-3",children:"‚ùå Standard Softmax"}),e.jsxs("div",{className:"font-mono text-sm bg-black/30 p-3 rounded",children:[e.jsx("p",{className:"text-gray-400",children:"P(w|center) = "}),e.jsxs("p",{className:"text-red-300 ml-4",children:["exp(v",e.jsx("sub",{children:"w"})," ¬∑ v",e.jsx("sub",{children:"c"}),") /"]}),e.jsxs("p",{className:"text-red-400 ml-4",children:["Œ£ exp(v",e.jsx("sub",{children:"i"})," ¬∑ v",e.jsx("sub",{children:"c"}),")"]})]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-3",children:["Must compute for ALL ",h.length,"+ words!"]}),e.jsx("p",{className:"text-xs text-red-400 mt-2",children:"Real vocabulary: 10K - 1M words üò±"})]}),e.jsxs("div",{className:"bg-green-900/20 rounded-xl p-4 border border-green-500/30",children:[e.jsx("h5",{className:"text-green-400 font-bold mb-3",children:"‚úÖ Negative Sampling"}),e.jsxs("div",{className:"font-mono text-sm bg-black/30 p-3 rounded",children:[e.jsx("p",{className:"text-gray-400",children:"Binary classification:"}),e.jsx("p",{className:"text-green-300 ml-4",children:"1 positive pair"}),e.jsx("p",{className:"text-orange-300 ml-4",children:"+ k negative pairs"})]}),e.jsxs("p",{className:"text-sm text-gray-400 mt-3",children:["Only update ",l+1," word vectors!"]}),e.jsx("p",{className:"text-xs text-green-400 mt-2",children:"Speedup: O(V) ‚Üí O(k) where k ‚âà 5-20 üöÄ"})]})]})]}),a===1&&e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsx("h4",{className:"text-center text-gray-400 mb-4",children:"Real Training Pair"}),e.jsxs("div",{className:"flex justify-center items-center gap-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-xl bg-green-900/50 border-2 border-green-500 flex items-center justify-center",children:e.jsx("span",{className:"font-mono text-xl text-green-400",children:r})}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Center Word"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(p,{className:"text-green-400 mb-2",size:32}),e.jsx("span",{className:"text-green-400 font-bold",children:"REAL PAIR"}),e.jsx("span",{className:"text-green-300 text-sm",children:"Label = 1"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-xl bg-blue-900/50 border-2 border-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"font-mono text-xl text-blue-400",children:n})}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Context Word"})]})]}),e.jsxs("div",{className:"text-center text-gray-500 text-sm mt-4",children:['This pair came from the sentence: "...the quick brown ',e.jsx("span",{className:"text-green-400",children:"fox"})," ",e.jsx("span",{className:"text-blue-400",children:"jumps"}),' over..."']})]}),a===2&&e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsx("h4",{className:"text-center text-gray-400 mb-4",children:"Sample Negative Words"}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-20 h-16 rounded-lg bg-green-900/50 border border-green-500 flex items-center justify-center",children:e.jsx("span",{className:"font-mono text-green-400",children:r})}),e.jsx("span",{className:"text-gray-500",children:"+"}),e.jsx("div",{className:"w-20 h-16 rounded-lg bg-blue-900/50 border border-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"font-mono text-blue-400",children:n})}),e.jsx(p,{className:"text-green-400"})]}),e.jsxs("div",{className:"bg-red-900/20 rounded-xl p-4 border border-red-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(y,{className:"text-red-400"}),e.jsx("span",{className:"text-red-400 font-bold",children:"Negative Samples (Random)"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:c.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-black/30 rounded-lg animate-fadeIn",style:{animationDelay:`${t*100}ms`},children:[e.jsx("span",{className:"font-mono text-green-400",children:r}),e.jsx("span",{className:"text-gray-500",children:"+"}),e.jsx("span",{className:"font-mono text-red-400",children:s})]},t))}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3 text-center",children:['These words were NOT actually in the context of "',r,'"']})]}),e.jsxs("div",{className:"bg-black/40 rounded-lg p-4",children:[e.jsx("h5",{className:"text-gray-400 text-sm mb-2",children:"Sampling Distribution:"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["P(w) ‚àù freq(w)",e.jsx("sup",{children:"0.75"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"The 0.75 power helps balance between very common and rare words"})]})]}),a===3&&e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsx("h4",{className:"text-center text-gray-400 mb-4",children:"Binary Classification"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2 text-gray-400",children:"Center"}),e.jsx("th",{className:"text-left p-2 text-gray-400",children:"Word"}),e.jsx("th",{className:"text-left p-2 text-gray-400",children:"Label"}),e.jsx("th",{className:"text-left p-2 text-gray-400",children:"Type"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-t border-white/10 bg-green-900/20",children:[e.jsx("td",{className:"p-2 font-mono text-green-400",children:r}),e.jsx("td",{className:"p-2 font-mono text-blue-400",children:n}),e.jsx("td",{className:"p-2 text-green-400 font-bold",children:"1"}),e.jsx("td",{className:"p-2 text-green-400",children:"Positive ‚úì"})]}),c.map((s,t)=>e.jsxs("tr",{className:"border-t border-white/10 bg-red-900/10",children:[e.jsx("td",{className:"p-2 font-mono text-green-400",children:r}),e.jsx("td",{className:"p-2 font-mono text-red-400",children:s}),e.jsx("td",{className:"p-2 text-red-400 font-bold",children:"0"}),e.jsx("td",{className:"p-2 text-red-400",children:"Negative ‚úó"})]},t))]})]})}),e.jsxs("div",{className:"bg-black/40 rounded-lg p-4",children:[e.jsx("h5",{className:"text-orange-400 font-bold mb-2",children:"Loss Function:"}),e.jsxs("div",{className:"font-mono text-sm",children:[e.jsxs("p",{className:"text-gray-300",children:["L = -log œÉ(v",e.jsx("sub",{children:"context"})," ¬∑ v",e.jsx("sub",{children:"center"}),")"]}),e.jsxs("p",{className:"text-gray-500",children:["- Œ£ log œÉ(-v",e.jsx("sub",{children:"negative"})," ¬∑ v",e.jsx("sub",{children:"center"}),")"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["œÉ = sigmoid function: œÉ(x) = 1 / (1 + e",e.jsx("sup",{children:"-x"}),")"]})]})]}),a===4&&e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsx("h4",{className:"text-center text-gray-400 mb-4",children:"Efficient Weight Updates"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-green-900/20 rounded-xl p-4 border border-green-500/30",children:[e.jsx("h5",{className:"text-green-400 font-bold mb-3",children:"‚úÖ Updated Vectors"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-black/30 rounded",children:[e.jsx("span",{className:"font-mono text-green-400",children:r}),e.jsx("span",{className:"text-xs text-gray-500",children:"‚Üê center"})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-black/30 rounded",children:[e.jsx("span",{className:"font-mono text-blue-400",children:n}),e.jsx("span",{className:"text-xs text-gray-500",children:"‚Üê positive"})]}),c.slice(0,3).map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-black/30 rounded",children:[e.jsx("span",{className:"font-mono text-red-400",children:s}),e.jsx("span",{className:"text-xs text-gray-500",children:"‚Üê negative"})]},t)),c.length>3&&e.jsxs("div",{className:"text-gray-500 text-sm",children:["+ ",c.length-3," more..."]})]}),e.jsxs("p",{className:"text-xs text-green-400 mt-2",children:["Total: ",2+l," vectors updated"]})]}),e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-600/30",children:[e.jsx("h5",{className:"text-gray-400 font-bold mb-3",children:"‚è∏Ô∏è Not Updated"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.filter(s=>s!==r&&s!==n&&!c.includes(s)).map((s,t)=>e.jsx("span",{className:"px-2 py-1 bg-black/30 rounded text-xs text-gray-500",children:s},t)),e.jsx("span",{className:"text-gray-600",children:"+ thousands more..."})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"In real vocab: ~99.99% untouched per step"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-orange-900/30 to-green-900/30 rounded-xl p-6 border border-orange-500/30",children:[e.jsxs("h5",{className:"text-orange-400 font-bold mb-4 flex items-center gap-2",children:[e.jsx(N,{})," Speed Improvement"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-3",children:[e.jsx("p",{className:"text-red-400 text-sm",children:"Full Softmax"}),e.jsx("p",{className:"text-2xl font-bold text-red-300",children:"O(V)"}),e.jsx("p",{className:"text-xs text-gray-500",children:"V = vocabulary size (100K+)"})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-3",children:[e.jsx("p",{className:"text-green-400 text-sm",children:"Negative Sampling"}),e.jsx("p",{className:"text-2xl font-bold text-green-300",children:"O(k)"}),e.jsxs("p",{className:"text-xs text-gray-500",children:["k = ",l," (typically 5-20)"]})]})]}),e.jsxs("p",{className:"text-center text-gray-400 text-sm mt-4",children:["Speedup: ~",Math.round(1e5/l).toLocaleString(),"x faster per training step!"]})]})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-6 border border-white/10",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"üí° Key Insights"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[e.jsx("h5",{className:"text-orange-400 font-medium mb-2",children:"Why It Works"}),e.jsx("p",{className:"text-sm text-gray-400",children:"We don't need perfect probabilities‚Äîwe just need vectors where real pairs have higher scores than random pairs."})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[e.jsx("h5",{className:"text-orange-400 font-medium mb-2",children:"How Many Negatives?"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["‚Ä¢ Small datasets: 5-20 negatives",e.jsx("br",{}),"‚Ä¢ Large datasets: 2-5 negatives",e.jsx("br",{}),"More data = fewer negatives needed"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-900/20 to-blue-900/20 rounded-xl p-6 border border-purple-500/30",children:[e.jsx("h4",{className:"font-bold text-purple-400 mb-4",children:"üìê Negative Sampling Objective"}),e.jsx("div",{className:"bg-black/50 rounded-lg p-4 font-mono text-center",children:e.jsxs("p",{className:"text-purple-300",children:["log œÉ(v'",e.jsx("sub",{children:"context"})," ¬∑ v",e.jsx("sub",{children:"center"}),") + Œ£",e.jsx("sub",{children:"k"})," ùîº",e.jsx("sub",{children:"w~P(w)"}),"[log œÉ(-v'",e.jsx("sub",{children:"w"})," ¬∑ v",e.jsx("sub",{children:"center"}),")]"]})}),e.jsxs("p",{className:"text-sm text-gray-400 mt-4 text-center",children:["Maximize: dot product with positive context",e.jsx("br",{}),"Minimize: dot product with k negative samples"]})]})]})}export{I as default};
