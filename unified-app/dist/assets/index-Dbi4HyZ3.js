import{c as S,r as o,j as e,m as j,I as E,y as O,H as B,X as v,Z as z,B as W,L as P,b as D,G as R}from"./index-quAWpIA7.js";import{g as i}from"./index-C8pce-KX.js";import{P as M}from"./pause-Ch50eX2B.js";import{P as w}from"./play-DgR7o5cW.js";import{T as L}from"./type-Bjj95k7o.js";import{C as y}from"./check-BCWxNOQQ.js";import{G as A}from"./git-compare-B0IhWami.js";import{C as q}from"./code-BC671jUr.js";import{C as F}from"./check-circle-CZEU1TAG.js";import{X as _}from"./x-circle-D3t0USxl.js";import{F as G}from"./flask-conical-DTo1qTL7.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=S("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=S("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=S("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);function I(){const[d,p]=o.useState(!1),[x,n]=o.useState(0),a=o.useRef(null),t=o.useRef(null),m=[{title:"Text Input",description:"Text prompt enters CLIP"},{title:"Tokenization",description:"BPE tokenizer splits text into tokens"},{title:"Embedding",description:"Tokens converted to vectors"},{title:"Transformer",description:"12 transformer layers process tokens"},{title:"Pooled Output",description:"Final [EOS] token becomes pooled embedding"}];o.useEffect(()=>{if(!a.current)return;const s=i.context(()=>{t.current=i.timeline({paused:!0}),t.current.fromTo(".text-input-box",{opacity:0,scale:.8},{opacity:1,scale:1,duration:.5}),t.current.to(".token-flow",{opacity:1,duration:.3},"+=0.3"),t.current.fromTo(".token-box",{opacity:0,y:-20},{opacity:1,y:0,stagger:.1,duration:.3}),t.current.to(".embedding-layer",{opacity:1,duration:.3},"+=0.3"),t.current.fromTo(".embed-arrow",{scaleY:0},{scaleY:1,duration:.3}),t.current.to(".transformer-stack",{opacity:1,duration:.3},"+=0.2"),t.current.fromTo(".transformer-layer",{opacity:.3,x:-10},{opacity:1,x:0,stagger:.08,duration:.2}),t.current.to(".pooled-output",{opacity:1,duration:.3},"+=0.2"),t.current.fromTo(".pooled-vector",{scale:0},{scale:1,duration:.4,ease:"back.out(1.7)"}),t.current.eventCallback("onUpdate",()=>{const l=t.current.progress(),r=Math.min(Math.floor(l*m.length),m.length-1);n(r)})},a);return()=>s.revert()},[]);const g=()=>{t.current&&(d?t.current.pause():t.current.progress()===1?t.current.restart():t.current.play(),p(!d))},c=()=>{t.current&&(t.current.restart().pause(),p(!1),n(0))};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"What is CLIP?"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 max-w-3xl mx-auto",children:[e.jsx("strong",{children:"CLIP (Contrastive Language-Image Pre-training)"})," was trained by OpenAI to understand the relationship between text and images. SD3 uses CLIP's text encoder (specifically CLIP-L/14 and CLIP-G/14) to convert your text prompt into embeddings the diffusion model can understand."]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl p-6 border border-blue-500/30",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-600 dark:text-blue-400 mb-3 flex items-center gap-2",children:[e.jsx(T,{size:20}),"Why Does SD3 Use Two CLIP Models?"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-2",children:"CLIP-L/14 (Large)"}),e.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ 77 max tokens"}),e.jsx("li",{children:"‚Ä¢ 768-dim embeddings"}),e.jsx("li",{children:"‚Ä¢ 12 transformer layers"}),e.jsx("li",{children:"‚Ä¢ Faster, more general understanding"})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("div",{className:"font-semibold text-pink-600 dark:text-pink-400 mb-2",children:"CLIP-G/14 (Giant)"}),e.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ 77 max tokens"}),e.jsx("li",{children:"‚Ä¢ 1280-dim embeddings"}),e.jsx("li",{children:"‚Ä¢ 32 transformer layers"}),e.jsx("li",{children:"‚Ä¢ More detailed, nuanced understanding"})]})]})]}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400 mt-3",children:"By combining both, SD3 gets complementary representations for better prompt understanding."})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:[d?e.jsx(M,{size:18}):e.jsx(w,{size:18}),d?"Pause":"Play Animation"]}),e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(j,{size:18}),"Reset"]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm text-gray-800 dark:text-gray-400",children:["Step ",x+1," of ",m.length]}),e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:m[x].title})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:m[x].description})]}),e.jsx("div",{ref:a,className:"bg-black/40 rounded-xl p-6 min-h-[400px] relative overflow-hidden",children:e.jsxs("svg",{viewBox:"0 0 800 350",className:"w-full h-auto",children:[e.jsxs("g",{className:"text-input-box",children:[e.jsx("rect",{x:"50",y:"140",width:"120",height:"60",rx:"8",fill:"#3b82f6",fillOpacity:"0.2",stroke:"#3b82f6",strokeWidth:"2"}),e.jsx("text",{x:"110",y:"165",textAnchor:"middle",fill:"#60a5fa",fontSize:"10",children:"Text Prompt"}),e.jsx("text",{x:"110",y:"185",textAnchor:"middle",fill:"white",fontSize:"11",fontWeight:"bold",children:'"A cat on a mat"'})]}),e.jsx("g",{className:"token-flow",style:{opacity:0},children:e.jsx("path",{d:"M 175 170 L 210 170",stroke:"#60a5fa",strokeWidth:"2",markerEnd:"url(#arrowhead)"})}),e.jsx("g",{className:"tokens",children:["[BOS]","A","cat","on","a","mat","[EOS]"].map((s,l)=>e.jsxs("g",{className:"token-box",style:{opacity:0},children:[e.jsx("rect",{x:220+l*50,y:"150",width:"45",height:"40",rx:"4",fill:"#8b5cf6",fillOpacity:"0.3",stroke:"#8b5cf6",strokeWidth:"1"}),e.jsx("text",{x:242+l*50,y:"175",textAnchor:"middle",fill:"white",fontSize:"10",children:s})]},l))}),e.jsxs("g",{className:"embedding-layer",style:{opacity:0},children:[e.jsx("rect",{x:"220",y:"210",width:"350",height:"30",rx:"4",fill:"#10b981",fillOpacity:"0.2",stroke:"#10b981",strokeWidth:"2"}),e.jsx("text",{x:"395",y:"230",textAnchor:"middle",fill:"#34d399",fontSize:"11",children:"Token + Position Embeddings"})]}),[0,1,2,3,4,5,6].map(s=>e.jsx("line",{className:"embed-arrow",x1:242+s*50,y1:"195",x2:242+s*50,y2:"210",stroke:"#10b981",strokeWidth:"2",style:{transformOrigin:`${242+s*50}px 195px`}},s)),e.jsxs("g",{className:"transformer-stack",style:{opacity:0},children:[e.jsx("text",{x:"650",y:"120",textAnchor:"middle",fill:"#f472b6",fontSize:"12",fontWeight:"bold",children:"Transformer Layers"}),[...Array(12)].map((s,l)=>e.jsxs("g",{className:"transformer-layer",children:[e.jsx("rect",{x:"600",y:130+l*17,width:"100",height:"15",rx:"2",fill:"#ec4899",fillOpacity:.3+l*.05,stroke:"#ec4899",strokeWidth:"1"}),e.jsxs("text",{x:"650",y:142+l*17,textAnchor:"middle",fill:"white",fontSize:"8",children:["Layer ",l+1]})]},l))]}),e.jsx("path",{d:"M 570 225 L 590 225 L 590 200 L 600 200",stroke:"#60a5fa",strokeWidth:"2",fill:"none",strokeDasharray:"4,4"}),e.jsxs("g",{className:"pooled-output",style:{opacity:0},children:[e.jsx("text",{x:"650",y:"340",textAnchor:"middle",fill:"#fbbf24",fontSize:"10",children:"Pooled Embedding"}),e.jsxs("g",{className:"pooled-vector",children:[e.jsx("circle",{cx:"650",cy:"320",r:"15",fill:"#f59e0b",fillOpacity:"0.3",stroke:"#f59e0b",strokeWidth:"2"}),e.jsx("text",{x:"650",y:"325",textAnchor:"middle",fill:"white",fontSize:"10",fontWeight:"bold",children:"768d"})]}),e.jsx("line",{x1:"650",y1:"335",x2:"650",y2:"335",stroke:"#f59e0b",strokeWidth:"2"})]}),e.jsx("defs",{children:e.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#60a5fa"})})})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-500/10 rounded-lg p-4 border border-blue-500/30",children:[e.jsx(L,{className:"text-blue-600 dark:text-blue-400 mb-2",size:24}),e.jsx("h4",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-1",children:"Text Only"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"CLIP's text encoder is separate from the vision encoder. SD3 only uses the text side."})]}),e.jsxs("div",{className:"bg-purple-500/10 rounded-lg p-4 border border-purple-500/30",children:[e.jsx(E,{className:"text-purple-600 dark:text-purple-400 mb-2",size:24}),e.jsx("h4",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-1",children:"Contrastive Training"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Trained on 400M image-text pairs to align text and image representations."})]}),e.jsxs("div",{className:"bg-pink-500/10 rounded-lg p-4 border border-pink-500/30",children:[e.jsx(T,{className:"text-pink-600 dark:text-pink-400 mb-2",size:24}),e.jsx("h4",{className:"font-semibold text-pink-600 dark:text-pink-400 mb-1",children:"Pooled + Sequence"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Outputs both token sequence (for joint attention) and pooled embedding (for conditioning)."})]})]})]})}function $(){const[d,p]=o.useState("A cute cat sitting on a mat"),[x,n]=o.useState(!1),a=o.useRef(null),t=o.useRef(null),g=(r=>{const h={text:"[BOS]",id:49406,type:"special"},C={text:"[EOS]",id:49407,type:"special"},u=r.toLowerCase().split(/\s+/).filter(f=>f).map((f,N)=>({text:f,id:1e3+N*100+Math.floor(Math.random()*100),type:"word"})),k=Array(77-u.length-2).fill({text:"[PAD]",id:0,type:"padding"});return[h,...u,C,...k.slice(0,Math.max(0,77-u.length-2))]})(d),c=g.slice(0,15);o.useEffect(()=>{if(!a.current)return;const r=i.context(()=>{i.set(".token-item",{opacity:0,y:20}),i.set(".id-item",{opacity:0,scale:.5})},a);return()=>r.revert()},[d]);const s=()=>{a.current&&(i.context(()=>{t.current=i.timeline(),t.current.to(".token-item",{opacity:1,y:0,stagger:.1,duration:.3,ease:"back.out(1.7)"}),t.current.to(".id-item",{opacity:1,scale:1,stagger:.1,duration:.2},"-=0.5"),t.current.eventCallback("onComplete",()=>n(!1))},a),n(!0))},l=()=>{t.current&&t.current.kill(),i.context(()=>{i.set(".token-item",{opacity:0,y:20}),i.set(".id-item",{opacity:0,scale:.5})},a),n(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"CLIP Tokenization (BPE)"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 max-w-3xl mx-auto",children:["CLIP uses ",e.jsx("strong",{children:"Byte Pair Encoding (BPE)"})," with a vocabulary of ~49,000 tokens. Text is split into subword units, converted to token IDs, and padded to 77 tokens."]})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-6",children:[e.jsx("label",{className:"block text-sm text-gray-800 dark:text-gray-400 mb-2",children:"Enter a prompt to tokenize:"}),e.jsx("input",{type:"text",value:d,onChange:r=>p(r.target.value),className:"w-full px-4 py-3 bg-black/50 border border-blue-500/30 rounded-lg text-white focus:outline-none focus:border-blue-500",placeholder:"Type your prompt here..."})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:s,disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 rounded-lg transition-colors",children:[e.jsx(w,{size:18}),"Animate Tokenization"]}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(j,{size:18}),"Reset"]})]}),e.jsxs("div",{ref:a,className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-xl p-6 border border-blue-500/30",children:[e.jsxs("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-4 flex items-center gap-2",children:[e.jsx(L,{size:20}),"Step 1: BPE Tokenization"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"bg-black/40 rounded-lg px-4 py-3 flex-1",children:[e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Input:"}),e.jsxs("div",{className:"text-white font-mono mt-1",children:['"',d,'"']})]}),e.jsx(O,{className:"text-blue-600 dark:text-blue-400 shrink-0",size:24}),e.jsxs("div",{className:"bg-black/40 rounded-lg px-4 py-3",children:[e.jsx("span",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Tokens:"}),e.jsx("div",{className:"text-blue-600 dark:text-blue-400 font-mono mt-1",children:g.filter(r=>r.type!=="padding").length})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.map((r,h)=>e.jsx("div",{className:`token-item px-3 py-2 rounded-lg text-sm font-mono ${r.type==="special"?"bg-purple-500/30 text-purple-300 border border-purple-500/50":r.type==="padding"?"bg-gray-500/30 text-gray-700 dark:text-gray-500 border border-gray-500/30":"bg-blue-500/30 text-blue-300 border border-blue-500/50"}`,children:r.text},h)),g.length>15&&e.jsxs("div",{className:"px-3 py-2 text-gray-700 dark:text-gray-500",children:["...+",g.length-15," more"]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-xl p-6 border border-purple-500/30",children:[e.jsxs("h3",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-4 flex items-center gap-2",children:[e.jsx(B,{size:20}),"Step 2: Token IDs"]}),e.jsx("p",{className:"text-gray-700 dark:text-sm mb-4",children:"Each token maps to a unique integer ID in CLIP's vocabulary (0-49407):"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.map((r,h)=>e.jsxs("div",{className:"id-item flex flex-col items-center gap-1",children:[e.jsx("div",{className:`px-3 py-1 rounded text-xs font-mono ${r.type==="special"?"bg-purple-500/30 text-purple-300":r.type==="padding"?"bg-gray-500/30 text-gray-700 dark:text-gray-500":"bg-blue-500/30 text-blue-300"}`,children:r.text}),e.jsx("div",{className:"text-xs text-gray-800 dark:text-gray-400",children:"‚Üì"}),e.jsx("div",{className:"px-2 py-1 bg-black/40 rounded text-xs font-mono text-yellow-400",children:r.id})]},h))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-pink-500/10 to-orange-500/10 rounded-xl p-6 border border-pink-500/30",children:[e.jsx("h3",{className:"font-semibold text-pink-600 dark:text-pink-400 mb-4",children:"Step 3: Fixed Shape Output"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-black/40 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-2",children:"Input Shape"}),e.jsx("div",{className:"font-mono text-white",children:e.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:"[batch_size, 77]"})}),e.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-500 mt-2",children:"77 token IDs (padded)"})]}),e.jsxs("div",{className:"bg-black/40 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-2",children:"After Embedding"}),e.jsx("div",{className:"font-mono text-white",children:e.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"[batch_size, 77, 768]"})}),e.jsx("div",{className:"text-xs text-gray-700 dark:text-gray-500 mt-2",children:"CLIP-L: 768-dim vectors"})]})]})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-6 border border-yellow-500/30",children:[e.jsx("h3",{className:"font-semibold text-yellow-400 mb-3",children:"üìö How BPE Works"}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-300 space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Byte Pair Encoding"})," builds a vocabulary by iteratively merging the most frequent character pairs:"]}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[e.jsxs("li",{children:["Start with individual characters: ",e.jsx("code",{className:"text-blue-600 dark:text-blue-400",children:"c a t"})]}),e.jsxs("li",{children:["Find frequent pairs: ",e.jsx("code",{className:"text-blue-600 dark:text-blue-400",children:'"at"'})," appears often ‚Üí merge"]}),e.jsxs("li",{children:["Continue merging: ",e.jsx("code",{className:"text-blue-600 dark:text-blue-400",children:'"cat"'})," ‚Üí single token"]}),e.jsxs("li",{children:["Rare words split into subwords: ",e.jsx("code",{className:"text-purple-600 dark:text-purple-400",children:'"unhappiness"'})," ‚Üí ",e.jsx("code",{className:"text-purple-600 dark:text-purple-400",children:"un + happiness"})]})]}),e.jsx("p",{className:"mt-2",children:"This balances vocabulary size (~49K) with coverage of rare words."})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-purple-500/10 rounded-lg p-4 border border-purple-500/30",children:[e.jsx("div",{className:"font-mono text-purple-600 dark:text-lg mb-2",children:"[BOS]"}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Beginning of Sequence"})," - ID 49406. Marks the start of the text."]})]}),e.jsxs("div",{className:"bg-purple-500/10 rounded-lg p-4 border border-purple-500/30",children:[e.jsx("div",{className:"font-mono text-purple-600 dark:text-lg mb-2",children:"[EOS]"}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"End of Sequence"})," - ID 49407. Its hidden state becomes the pooled embedding."]})]}),e.jsxs("div",{className:"bg-gray-500/10 rounded-lg p-4 border border-gray-500/30",children:[e.jsx("div",{className:"font-mono text-gray-800 dark:text-lg mb-2",children:"[PAD]"}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("strong",{children:"Padding"})," - ID 0. Fills remaining positions to reach 77 tokens."]})]})]})]})}function U(){const[d,p]=o.useState(0),[x,n]=o.useState(!1),a=o.useRef(null),t=o.useRef(null),m=[{name:"Self-Attention",color:"#3b82f6",description:"Tokens attend to each other"},{name:"Layer Norm",color:"#10b981",description:"Normalize activations"},{name:"MLP",color:"#8b5cf6",description:"Feed-forward processing"},{name:"Layer Norm",color:"#10b981",description:"Final normalization"}];o.useEffect(()=>{if(!a.current)return;const s=i.context(()=>{i.set(".attention-line",{scaleX:0,transformOrigin:"left"}),i.set(".mlp-node",{scale:0})},a);return()=>s.revert()},[]);const g=()=>{a.current&&(n(!0),i.context(()=>{t.current=i.timeline({onComplete:()=>n(!1)}),t.current.to(".attention-line",{scaleX:1,stagger:.05,duration:.3,ease:"power2.out"}),t.current.to(".mlp-node",{scale:1,stagger:.1,duration:.2,ease:"back.out(1.7)"},"+=0.2"),t.current.to(".output-token",{scale:1.1,duration:.3,ease:"power2.out"},"+=0.2"),t.current.to(".output-token",{scale:1,duration:.2})},a))},c=()=>{t.current&&t.current.kill(),i.context(()=>{i.set(".attention-line",{scaleX:0}),i.set(".mlp-node",{scale:0}),i.set(".output-token",{scale:1})},a),n(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"CLIP Transformer Architecture"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 max-w-3xl mx-auto",children:["CLIP's text encoder uses a standard Transformer architecture with ",e.jsx("strong",{children:"causal self-attention"}),"(each token can only attend to previous tokens). CLIP-L has 12 layers, CLIP-G has 32 layers."]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-500/10 rounded-xl p-4 border border-blue-500/30",children:[e.jsx("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-3",children:"CLIP-L/14 Architecture"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-black/30 rounded px-3 py-2",children:[e.jsx("span",{className:"text-gray-800 dark:text-gray-400",children:"Layers:"}),e.jsx("span",{className:"text-white ml-2",children:"12"})]}),e.jsxs("div",{className:"bg-black/30 rounded px-3 py-2",children:[e.jsx("span",{className:"text-gray-800 dark:text-gray-400",children:"Hidden:"}),e.jsx("span",{className:"text-white ml-2",children:"768"})]}),e.jsxs("div",{className:"bg-black/30 rounded px-3 py-2",children:[e.jsx("span",{className:"text-gray-800 dark:text-gray-400",children:"Heads:"}),e.jsx("span",{className:"text-white ml-2",children:"12"})]}),e.jsxs("div",{className:"bg-black/30 rounded px-3 py-2",children:[e.jsx("span",{className:"text-gray-800 dark:text-gray-400",children:"MLP:"}),e.jsx("span",{className:"text-white ml-2",children:"3072"})]})]})]}),e.jsxs("div",{className:"bg-purple-500/10 rounded-xl p-4 border border-purple-500/30",children:[e.jsx("h3",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-3",children:"CLIP-G/14 Architecture"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{className:"bg-black/30 rounded px-3 py-2",children:[e.jsx("span",{className:"text-gray-800 dark:text-gray-400",children:"Layers:"}),e.jsx("span",{className:"text-white ml-2",children:"32"})]}),e.jsxs("div",{className:"bg-black/30 rounded px-3 py-2",children:[e.jsx("span",{className:"text-gray-800 dark:text-gray-400",children:"Hidden:"}),e.jsx("span",{className:"text-white ml-2",children:"1280"})]}),e.jsxs("div",{className:"bg-black/30 rounded px-3 py-2",children:[e.jsx("span",{className:"text-gray-800 dark:text-gray-400",children:"Heads:"}),e.jsx("span",{className:"text-white ml-2",children:"20"})]}),e.jsxs("div",{className:"bg-black/30 rounded px-3 py-2",children:[e.jsx("span",{className:"text-gray-800 dark:text-gray-400",children:"MLP:"}),e.jsx("span",{className:"text-white ml-2",children:"5120"})]})]})]})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:g,disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 rounded-lg transition-colors",children:[e.jsx(w,{size:18}),"Play Attention Flow"]}),e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(j,{size:18}),"Reset"]})]}),e.jsxs("div",{ref:a,className:"bg-black/40 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-center text-gray-700 dark:text-gray-300 mb-4",children:"Single Transformer Layer"}),e.jsxs("svg",{viewBox:"0 0 800 300",className:"w-full h-auto",children:[e.jsx("text",{x:"80",y:"30",textAnchor:"middle",fill:"#94a3b8",fontSize:"12",children:"Input Tokens"}),["[BOS]","A","cat","on","mat","[EOS]"].map((s,l)=>e.jsxs("g",{children:[e.jsx("rect",{x:30+l*90,y:"40",width:"70",height:"35",rx:"4",fill:"#1e40af",fillOpacity:"0.5",stroke:"#3b82f6",strokeWidth:"1"}),e.jsx("text",{x:65+l*90,y:"62",textAnchor:"middle",fill:"white",fontSize:"11",children:s})]},l)),e.jsx("rect",{x:"30",y:"95",width:"520",height:"60",rx:"8",fill:"#3b82f6",fillOpacity:"0.2",stroke:"#3b82f6",strokeWidth:"2"}),e.jsx("text",{x:"290",y:"115",textAnchor:"middle",fill:"#60a5fa",fontSize:"12",fontWeight:"bold",children:"Causal Self-Attention"}),[0,1,2,3,4,5].map(s=>e.jsx("g",{children:[...Array(s+1)].map((l,r)=>e.jsx("line",{className:"attention-line",x1:65+r*90,y1:"75",x2:65+s*90,y2:"95",stroke:`rgba(59, 130, 246, ${.3+(r===s?.5:0)})`,strokeWidth:r===s?2:1},r))},s)),e.jsx("rect",{x:"570",y:"95",width:"80",height:"30",rx:"4",fill:"#10b981",fillOpacity:"0.3",stroke:"#10b981",strokeWidth:"1"}),e.jsx("text",{x:"610",y:"115",textAnchor:"middle",fill:"#34d399",fontSize:"10",children:"LayerNorm"}),e.jsx("path",{d:"M 550 125 L 560 125",stroke:"#60a5fa",strokeWidth:"2",markerEnd:"url(#arrow)"}),e.jsx("rect",{x:"30",y:"170",width:"520",height:"50",rx:"8",fill:"#8b5cf6",fillOpacity:"0.2",stroke:"#8b5cf6",strokeWidth:"2"}),e.jsx("text",{x:"290",y:"190",textAnchor:"middle",fill:"#a78bfa",fontSize:"12",fontWeight:"bold",children:"Feed-Forward MLP"}),[0,1,2,3,4,5].map(s=>e.jsx("circle",{className:"mlp-node",cx:65+s*90,cy:"205",r:"8",fill:"#8b5cf6"},s)),e.jsx("rect",{x:"570",y:"175",width:"80",height:"30",rx:"4",fill:"#10b981",fillOpacity:"0.3",stroke:"#10b981",strokeWidth:"1"}),e.jsx("text",{x:"610",y:"195",textAnchor:"middle",fill:"#34d399",fontSize:"10",children:"LayerNorm"}),e.jsx("text",{x:"80",y:"250",textAnchor:"middle",fill:"#94a3b8",fontSize:"12",children:"Output Tokens"}),["[BOS]","A","cat","on","mat","[EOS]"].map((s,l)=>e.jsxs("g",{className:"output-token",children:[e.jsx("rect",{x:30+l*90,y:"260",width:"70",height:"35",rx:"4",fill:"#7c3aed",fillOpacity:"0.5",stroke:"#8b5cf6",strokeWidth:"1"}),e.jsx("text",{x:65+l*90,y:"282",textAnchor:"middle",fill:"white",fontSize:"11",children:s})]},l)),e.jsx("line",{x1:"290",y1:"155",x2:"290",y2:"170",stroke:"#60a5fa",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("line",{x1:"290",y1:"220",x2:"290",y2:"260",stroke:"#a78bfa",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("defs",{children:e.jsx("marker",{id:"arrow",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:e.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#60a5fa"})})})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-6 border border-yellow-500/30",children:[e.jsx("h3",{className:"font-semibold text-yellow-400 mb-3",children:"üéØ Why Causal (Unidirectional) Attention?"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"Causal mask:"}),' Each token can only "see" tokens that came before it.']}),e.jsxs("div",{className:"bg-black/40 rounded p-3 font-mono text-xs",children:[e.jsx("div",{children:"Token 0: sees [0]"}),e.jsx("div",{children:"Token 1: sees [0, 1]"}),e.jsx("div",{children:"Token 2: sees [0, 1, 2]"}),e.jsx("div",{children:"..."})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"This is how CLIP was trained"})," - as a text model that could also be used for generation."]}),e.jsxs("p",{children:["The [EOS] token at the end sees ALL previous tokens, making it a good summary of the whole text. This becomes the ",e.jsx("span",{className:"text-yellow-400",children:"pooled embedding"}),"."]})]})]})]}),e.jsx("div",{className:"grid md:grid-cols-4 gap-4",children:m.map((s,l)=>e.jsxs("div",{className:"bg-black/30 rounded-lg p-4 border border-white/10 cursor-pointer hover:border-white/30 transition-colors",onMouseEnter:()=>p(l),children:[e.jsx("div",{className:"w-full h-2 rounded mb-3",style:{backgroundColor:s.color}}),e.jsx("div",{className:"font-semibold text-white text-sm mb-1",children:s.name}),e.jsx("div",{className:"text-xs text-gray-800 dark:text-gray-400",children:s.description})]},l))})]})}function V(){const[d,p]=o.useState(!1),[x,n]=o.useState(!1),a=o.useRef(null),t=o.useRef(null);o.useEffect(()=>()=>{t.current&&t.current.kill()},[]);const m=()=>{a.current&&(n(!0),i.context(()=>{t.current=i.timeline({onComplete:()=>{n(!1),p(!0)}}),t.current.fromTo(".token-embed",{opacity:0,y:-20},{opacity:1,y:0,stagger:.1,duration:.3}),t.current.fromTo(".pos-embed",{opacity:0,scale:0},{opacity:1,scale:1,stagger:.1,duration:.2}),t.current.to(".combined-embed",{opacity:1,duration:.5}),t.current.fromTo(".transformer-flow",{scaleY:0,transformOrigin:"top"},{scaleY:1,duration:.8,ease:"power2.inOut"}),t.current.fromTo(".final-embed",{opacity:0,x:20},{opacity:1,x:0,stagger:.1,duration:.3}),t.current.to(".pooled-highlight",{opacity:1,scale:1.1,duration:.4,ease:"back.out(1.7)"})},a))},g=()=>{t.current&&t.current.kill(),i.context(()=>{i.set(".token-embed",{opacity:0,y:-20}),i.set(".pos-embed",{opacity:0,scale:0}),i.set(".combined-embed",{opacity:0}),i.set(".transformer-flow",{scaleY:0}),i.set(".final-embed",{opacity:0,x:20}),i.set(".pooled-highlight",{opacity:0,scale:1})},a),n(!1),p(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"CLIP Embeddings & Outputs"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 max-w-3xl mx-auto",children:["CLIP produces ",e.jsx("strong",{children:"two types of outputs"}),": sequence embeddings (one per token) and a pooled embedding (single vector from [EOS] token). SD3 uses both!"]})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs("button",{onClick:m,disabled:x,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 rounded-lg transition-colors",children:[e.jsx(w,{size:18}),"Show Embedding Flow"]}),e.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition-colors",children:[e.jsx(j,{size:18}),"Reset"]})]}),e.jsx("div",{ref:a,className:"bg-black/40 rounded-xl p-6",children:e.jsxs("svg",{viewBox:"0 0 900 400",className:"w-full h-auto",children:[e.jsx("text",{x:"100",y:"30",textAnchor:"middle",fill:"#94a3b8",fontSize:"12",children:"Token IDs"}),[49406,320,2368,525,4044,49407].map((c,s)=>e.jsxs("g",{children:[e.jsx("rect",{x:30+s*70,y:"40",width:"60",height:"30",rx:"4",fill:"#1e3a5f",stroke:"#3b82f6",strokeWidth:"1"}),e.jsx("text",{x:60+s*70,y:"60",textAnchor:"middle",fill:"#60a5fa",fontSize:"10",children:c})]},s)),e.jsx("text",{x:"100",y:"100",textAnchor:"middle",fill:"#94a3b8",fontSize:"12",children:"Token Embeds"}),[0,1,2,3,4,5].map(c=>e.jsxs("g",{className:"token-embed",style:{opacity:0},children:[e.jsx("rect",{x:30+c*70,y:"110",width:"60",height:"30",rx:"4",fill:"#3b82f6",fillOpacity:"0.3",stroke:"#3b82f6",strokeWidth:"1"}),e.jsx("text",{x:60+c*70,y:"130",textAnchor:"middle",fill:"white",fontSize:"9",children:"768-d"})]},c)),[0,1,2,3,4,5].map(c=>e.jsx("text",{x:60+c*70,y:"155",textAnchor:"middle",fill:"#60a5fa",fontSize:"16",children:"+"},c)),e.jsx("text",{x:"100",y:"175",textAnchor:"middle",fill:"#94a3b8",fontSize:"12",children:"Position Embeds"}),[0,1,2,3,4,5].map(c=>e.jsxs("g",{className:"pos-embed",style:{opacity:0},children:[e.jsx("rect",{x:30+c*70,y:"185",width:"60",height:"30",rx:"4",fill:"#10b981",fillOpacity:"0.3",stroke:"#10b981",strokeWidth:"1"}),e.jsxs("text",{x:60+c*70,y:"205",textAnchor:"middle",fill:"white",fontSize:"9",children:["pos_",c]})]},c)),e.jsxs("g",{className:"combined-embed",style:{opacity:0},children:[e.jsx("text",{x:"100",y:"250",textAnchor:"middle",fill:"#94a3b8",fontSize:"12",children:"Combined"}),e.jsx("rect",{x:"30",y:"260",width:"420",height:"30",rx:"4",fill:"#8b5cf6",fillOpacity:"0.2",stroke:"#8b5cf6",strokeWidth:"2"}),e.jsx("text",{x:"240",y:"280",textAnchor:"middle",fill:"#a78bfa",fontSize:"11",children:"[batch, 77, 768] - Ready for Transformer"})]}),e.jsxs("g",{className:"transformer-flow",style:{opacity:1},children:[e.jsx("rect",{x:"500",y:"40",width:"150",height:"260",rx:"8",fill:"#ec4899",fillOpacity:"0.1",stroke:"#ec4899",strokeWidth:"2"}),e.jsx("text",{x:"575",y:"65",textAnchor:"middle",fill:"#f472b6",fontSize:"12",fontWeight:"bold",children:"Transformer"}),e.jsx("text",{x:"575",y:"85",textAnchor:"middle",fill:"#f472b6",fontSize:"10",children:"12 Layers"}),[...Array(6)].map((c,s)=>e.jsx("rect",{x:"520",y:100+s*30,width:"110",height:"22",rx:"2",fill:"#ec4899",fillOpacity:.2+s*.1},s))]}),e.jsx("path",{d:"M 450 275 L 490 275 L 490 170 L 500 170",stroke:"#60a5fa",strokeWidth:"2",fill:"none",strokeDasharray:"4,2"}),e.jsx("text",{x:"750",y:"100",textAnchor:"middle",fill:"#94a3b8",fontSize:"12",children:"Outputs"}),e.jsxs("g",{className:"final-embed",style:{opacity:0},children:[e.jsx("rect",{x:"680",y:"120",width:"140",height:"50",rx:"8",fill:"#3b82f6",fillOpacity:"0.2",stroke:"#3b82f6",strokeWidth:"2"}),e.jsx("text",{x:"750",y:"145",textAnchor:"middle",fill:"#60a5fa",fontSize:"11",fontWeight:"bold",children:"Sequence"}),e.jsx("text",{x:"750",y:"162",textAnchor:"middle",fill:"white",fontSize:"10",children:"[1, 77, 768]"})]}),e.jsxs("g",{className:"final-embed pooled-highlight",style:{opacity:0},children:[e.jsx("rect",{x:"680",y:"190",width:"140",height:"50",rx:"8",fill:"#f59e0b",fillOpacity:"0.2",stroke:"#f59e0b",strokeWidth:"2"}),e.jsx("text",{x:"750",y:"215",textAnchor:"middle",fill:"#fbbf24",fontSize:"11",fontWeight:"bold",children:"Pooled"}),e.jsx("text",{x:"750",y:"232",textAnchor:"middle",fill:"white",fontSize:"10",children:"[1, 768]"})]}),e.jsx("path",{d:"M 650 170 L 680 145",stroke:"#3b82f6",strokeWidth:"2"}),e.jsx("path",{d:"M 650 170 L 680 215",stroke:"#f59e0b",strokeWidth:"2"}),e.jsxs("g",{transform:"translate(680, 280)",children:[e.jsx("text",{x:"0",y:"0",fill:"#94a3b8",fontSize:"10",children:"Used in SD3:"}),e.jsx("rect",{x:"0",y:"10",width:"12",height:"12",fill:"#3b82f6",rx:"2"}),e.jsx("text",{x:"18",y:"20",fill:"#60a5fa",fontSize:"9",children:"‚Üí Joint Attention"}),e.jsx("rect",{x:"0",y:"30",width:"12",height:"12",fill:"#f59e0b",rx:"2"}),e.jsx("text",{x:"18",y:"40",fill:"#fbbf24",fontSize:"9",children:"‚Üí DiT Conditioning"})]})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-blue-500/10 rounded-xl p-6 border border-blue-500/30",children:[e.jsxs("h3",{className:"font-semibold text-blue-600 dark:text-blue-400 mb-3 flex items-center gap-2",children:[e.jsx(H,{size:18}),"Sequence Embeddings"]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shape:"})," ",e.jsx("code",{className:"text-blue-600 dark:text-blue-400",children:"[batch, 77, 768]"})]}),e.jsx("p",{children:"One 768-dimensional vector for each of the 77 token positions. These capture the meaning of each token in context."}),e.jsxs("div",{className:"bg-black/40 rounded p-3 mt-2",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Used for:"})," Joint attention with image tokens. The text sequence gets concatenated with image patch tokens."]})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-6 border border-yellow-500/30",children:[e.jsxs("h3",{className:"font-semibold text-yellow-400 mb-3 flex items-center gap-2",children:[e.jsx(X,{size:18}),"Pooled Embedding"]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Shape:"})," ",e.jsx("code",{className:"text-yellow-400",children:"[batch, 768]"})]}),e.jsx("p",{children:"The hidden state at the [EOS] token position. This single vector summarizes the entire text prompt."}),e.jsxs("div",{className:"bg-black/40 rounded p-3 mt-2",children:[e.jsx("span",{className:"text-yellow-400 font-semibold",children:"Used for:"})," AdaLN conditioning in DiT blocks. Combined with timestep embedding to modulate transformer layers."]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-xl p-6 border border-purple-500/30",children:[e.jsx("h3",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-4",children:"How SD3 Combines Both CLIPs"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-600 dark:text-blue-400 font-semibold mb-2",children:"Sequence Embeddings (for Joint Attention)"}),e.jsxs("div",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:["CLIP-L: [1, 77, 768]",e.jsx("br",{}),"CLIP-G: [1, 77, 1280]",e.jsx("br",{}),e.jsx("span",{className:"text-purple-600 dark:text-purple-400",children:"Concatenated ‚Üí [1, 77, 2048]"})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:"Pooled Embeddings (for Conditioning)"}),e.jsxs("div",{className:"font-mono text-sm text-gray-700 dark:text-gray-300",children:["CLIP-L pooled: [1, 768]",e.jsx("br",{}),"CLIP-G pooled: [1, 1280]",e.jsx("br",{}),e.jsx("span",{className:"text-yellow-400",children:"Concatenated ‚Üí [1, 2048]"}),e.jsx("br",{}),e.jsx("span",{className:"text-gray-700 dark:text-gray-500",children:"Then projected to match DiT hidden size"})]})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"üìä Dimension Summary"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10",children:[e.jsx("th",{className:"text-left py-2 px-3 text-gray-800 dark:text-gray-400",children:"Stage"}),e.jsx("th",{className:"text-left py-2 px-3 text-gray-800 dark:text-gray-400",children:"Shape"}),e.jsx("th",{className:"text-left py-2 px-3 text-gray-800 dark:text-gray-400",children:"Description"})]})}),e.jsxs("tbody",{className:"text-gray-700 dark:text-gray-300",children:[e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3",children:"Token IDs"}),e.jsx("td",{className:"py-2 px-3 font-mono text-blue-600 dark:text-blue-400",children:"[B, 77]"}),e.jsx("td",{className:"py-2 px-3",children:"Integer token IDs (0-49407)"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3",children:"Token + Pos Embed"}),e.jsx("td",{className:"py-2 px-3 font-mono text-purple-600 dark:text-purple-400",children:"[B, 77, 768]"}),e.jsx("td",{className:"py-2 px-3",children:"Combined embeddings"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3",children:"After Transformer"}),e.jsx("td",{className:"py-2 px-3 font-mono text-pink-600 dark:text-pink-400",children:"[B, 77, 768]"}),e.jsx("td",{className:"py-2 px-3",children:"Contextualized embeddings"})]}),e.jsxs("tr",{className:"border-b border-white/5",children:[e.jsx("td",{className:"py-2 px-3",children:"Pooled"}),e.jsx("td",{className:"py-2 px-3 font-mono text-yellow-400",children:"[B, 768]"}),e.jsx("td",{className:"py-2 px-3",children:"EOS token hidden state"})]})]})]})})]})]})}function Y(){const[d,p]=o.useState(null),x=[{feature:"Max Tokens",clip:"77",t5:"256+",winner:"t5",detail:"T5 can handle much longer prompts, crucial for detailed descriptions."},{feature:"Architecture",clip:"Decoder-style (causal)",t5:"Encoder-only (bidirectional)",winner:"t5",detail:"T5 uses bidirectional attention - each token sees all others, better for understanding."},{feature:"Training Data",clip:"400M image-text pairs",t5:"C4 text corpus (750GB)",winner:"both",detail:"CLIP learned visual concepts; T5 learned deep language understanding. Complementary!"},{feature:"Hidden Dimension",clip:"768 (L) / 1280 (G)",t5:"4096 (XXL)",winner:"t5",detail:"T5-XXL has much larger representations, capturing more nuance."},{feature:"Parameters",clip:"~400M (L+G combined)",t5:"~4.7B (XXL)",winner:"clip",detail:"CLIP is much smaller/faster. T5-XXL is huge but optional in SD3."},{feature:"Speed",clip:"Fast",t5:"Slow",winner:"clip",detail:"CLIP encodes in ~10ms; T5-XXL can take 100ms+ depending on prompt length."},{feature:"Visual Alignment",clip:"Excellent",t5:"None (pure text)",winner:"clip",detail:"CLIP was trained to align text with images - T5 has no visual grounding."}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"CLIP vs T5: Why Both?"}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300 max-w-3xl mx-auto",children:["SD3 uses ",e.jsx("strong",{children:"both CLIP and T5"})," text encoders. Each has different strengths - together they provide rich, complementary text understanding."]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-xl p-6 border border-blue-500/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"C"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-600 dark:text-xl",children:"CLIP"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Contrastive Language-Image Pre-training"})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"text-green-400",size:16}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Visual-aligned embeddings"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"text-green-400",size:16}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Fast inference"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"text-green-400",size:16}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Good compositional understanding"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Limited to 77 tokens"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Causal attention only"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-black/30 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-800 dark:text-gray-400 mb-1",children:"Best for:"}),e.jsx("div",{className:"text-blue-300",children:"Visual concepts, objects, styles, artistic references"})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-teal-500/20 rounded-xl p-6 border border-green-500/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"T5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl",children:"T5-XXL"}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Text-to-Text Transfer Transformer"})]})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"text-green-400",size:16}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Deep language understanding"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"text-green-400",size:16}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Bidirectional attention"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"text-green-400",size:16}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Long context (256+ tokens)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"No visual training"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"text-red-400",size:16}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Very slow (4.7B params)"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-black/30 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-800 dark:text-gray-400 mb-1",children:"Best for:"}),e.jsx("div",{className:"text-green-300",children:"Complex descriptions, spatial relations, abstract concepts"})]})]})]}),e.jsxs("div",{className:"bg-black/30 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("h3",{className:"font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2",children:[e.jsx(A,{size:20}),"Feature Comparison"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-white/10 bg-black/20",children:[e.jsx("th",{className:"text-left py-3 px-4 text-gray-800 dark:text-gray-400",children:"Feature"}),e.jsx("th",{className:"text-left py-3 px-4 text-blue-600 dark:text-blue-400",children:"CLIP"}),e.jsx("th",{className:"text-left py-3 px-4 text-green-400",children:"T5"}),e.jsx("th",{className:"text-left py-3 px-4 text-gray-800 dark:text-gray-400",children:"Better"})]})}),e.jsx("tbody",{children:x.map((n,a)=>e.jsxs("tr",{className:`border-b border-white/5 cursor-pointer transition-colors ${d===a?"bg-white/10":"hover:bg-white/5"}`,onClick:()=>p(d===a?null:a),children:[e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300 font-medium",children:n.feature}),e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:n.clip}),e.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:n.t5}),e.jsxs("td",{className:"py-3 px-4",children:[n.winner==="clip"&&e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"CLIP"}),n.winner==="t5"&&e.jsx("span",{className:"text-green-400 font-semibold",children:"T5"}),n.winner==="both"&&e.jsx("span",{className:"text-purple-600 dark:text-purple-400 font-semibold",children:"Both!"})]})]},a))})]})}),d!==null&&e.jsx("div",{className:"p-4 bg-yellow-500/10 border-t border-yellow-500/30",children:e.jsxs("div",{className:"text-sm",children:["üí° ",x[d].detail]})})]}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-green-500/10 rounded-xl p-6 border border-purple-500/30",children:[e.jsx("h3",{className:"font-semibold text-purple-600 dark:text-purple-400 mb-4",children:"üîç Key Architecture Difference: Attention"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-blue-600 dark:text-blue-400 font-semibold mb-3",children:"CLIP: Causal Attention"}),e.jsxs("div",{className:"font-mono text-xs bg-black/40 rounded p-3 mb-3",children:["Token sees: [itself, previous tokens]",e.jsx("br",{}),e.jsx("span",{className:"text-gray-700 dark:text-gray-500",children:"‚îú‚îÄ cat: sees [BOS, a, cat]"}),e.jsx("br",{}),e.jsx("span",{className:"text-gray-700 dark:text-gray-500",children:"‚îú‚îÄ on: sees [BOS, a, cat, on]"}),e.jsx("br",{}),e.jsx("span",{className:"text-gray-700 dark:text-gray-500",children:"‚îî‚îÄ EOS: sees [ALL tokens]"})]}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Like GPT - designed for generation. [EOS] aggregates all info."})]}),e.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[e.jsx("h4",{className:"text-green-400 font-semibold mb-3",children:"T5: Bidirectional Attention"}),e.jsxs("div",{className:"font-mono text-xs bg-black/40 rounded p-3 mb-3",children:["Token sees: [ALL other tokens]",e.jsx("br",{}),e.jsx("span",{className:"text-gray-700 dark:text-gray-500",children:"‚îú‚îÄ cat: sees [a, cat, on, mat]"}),e.jsx("br",{}),e.jsx("span",{className:"text-gray-700 dark:text-gray-500",children:"‚îú‚îÄ on: sees [a, cat, on, mat]"}),e.jsx("br",{}),e.jsx("span",{className:"text-gray-700 dark:text-gray-500",children:"‚îî‚îÄ mat: sees [a, cat, on, mat]"})]}),e.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-400",children:"Like BERT - better for understanding context and relationships."})]})]})]}),e.jsxs("div",{className:"bg-black/40 rounded-xl p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-4",children:"üéØ Why SD3 Uses Both Encoders"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-blue-500/10 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-white font-bold",children:"1"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"Visual Grounding (CLIP)"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:'CLIP was trained on images - it knows what "sunset", "cyberpunk", "oil painting" look like. T5 only knows these as words.'})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-green-500/10 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-600 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-white font-bold",children:"2"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-green-400 font-semibold",children:"Language Understanding (T5)"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:'"A cat to the left of a dog" - T5 better understands spatial relations, counting, negations ("no people"), and complex descriptions.'})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-purple-500/10 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-white font-bold",children:"3"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-purple-600 dark:text-purple-400 font-semibold",children:"Complementary Strengths"}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Different training ‚Üí different representations. The model can leverage both CLIP's visual knowledge and T5's linguistic depth."})]})]})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-4 border border-yellow-500/30",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 font-semibold mb-2",children:[e.jsx(z,{size:18}),"T5 is Optional!"]}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"SD3 can run with just CLIP encoders for faster inference. T5-XXL adds ~8GB VRAM and significant latency. For quick generations, many users skip it. For complex prompts requiring precise understanding, T5 significantly improves results."})]})]})}function J(){const[d,p]=o.useState({}),[x,n]=o.useState(!1),[a,t]=o.useState(0),m=[{id:1,question:"What tokenizer does CLIP use?",options:["WordPiece","SentencePiece","Byte Pair Encoding (BPE)","Character-level"],correct:2,explanation:"CLIP uses BPE (Byte Pair Encoding) with a vocabulary of ~49,000 tokens."},{id:2,question:"What is the maximum token length for CLIP's text encoder?",options:["64 tokens","77 tokens","128 tokens","256 tokens"],correct:1,explanation:"CLIP is limited to 77 tokens including [BOS] and [EOS] special tokens."},{id:3,question:"What type of attention does CLIP's text encoder use?",options:["Bidirectional","Cross-attention","Causal (unidirectional)","Sparse attention"],correct:2,explanation:"CLIP uses causal attention - each token can only attend to itself and previous tokens."},{id:4,question:"What is the hidden dimension of CLIP-L/14?",options:["512","768","1024","1280"],correct:1,explanation:"CLIP-L (Large) has a hidden dimension of 768. CLIP-G (Giant) has 1280."},{id:5,question:"How is the 'pooled' embedding extracted from CLIP?",options:["Average of all token embeddings","First token [BOS] hidden state","Last token [EOS] hidden state","Max pooling across all tokens"],correct:2,explanation:"The pooled embedding is the hidden state at the [EOS] position, which sees all previous tokens due to causal attention."},{id:6,question:"Why does SD3 use TWO CLIP models (CLIP-L and CLIP-G)?",options:["Faster inference","Redundancy for error correction","Complementary representations at different scales","One for text, one for images"],correct:2,explanation:"CLIP-L and CLIP-G provide complementary representations - different model sizes capture different aspects of the text."},{id:7,question:"What is the main advantage of T5 over CLIP for text encoding?",options:["Faster inference speed","Visual alignment","Bidirectional attention and longer context","Smaller model size"],correct:2,explanation:"T5 uses bidirectional attention (better understanding) and supports much longer sequences (256+ tokens vs 77)."},{id:8,question:"Where are CLIP's sequence embeddings used in SD3?",options:["Only for VAE encoding","Joint attention with image tokens","Only for final image decoding","Not used in SD3"],correct:1,explanation:"CLIP's sequence embeddings are concatenated with image tokens for joint attention in the DiT transformer."}],g=[{title:"Exercise 1: Calculate Token Embedding Shape",description:"Given a batch of 4 text prompts encoded with CLIP-L, what is the shape of the output embeddings?",task:`Prompt batch size: 4
Max tokens: 77
CLIP-L hidden dimension: 768

Calculate:
1. Token embedding shape (before transformer)
2. Sequence output shape (after transformer)
3. Pooled embedding shape`,solution:`1. Token embedding shape: [4, 77, 768]
   - 4 prompts √ó 77 tokens √ó 768 dimensions

2. Sequence output shape: [4, 77, 768]
   - Same shape, but now contextualized

3. Pooled embedding shape: [4, 768]
   - One 768-d vector per prompt (from [EOS])`},{title:"Exercise 2: Combined CLIP Embeddings",description:"SD3 uses both CLIP-L (768-d) and CLIP-G (1280-d). Calculate the combined dimensions.",task:`For joint attention in SD3:
- CLIP-L sequence: [B, 77, 768]
- CLIP-G sequence: [B, 77, 1280]

For DiT conditioning:
- CLIP-L pooled: [B, 768]
- CLIP-G pooled: [B, 1280]

How are these combined?`,solution:`For joint attention:
- Concatenate on feature dimension
- Combined: [B, 77, 768 + 1280] = [B, 77, 2048]

For DiT conditioning:
- Concatenate pooled embeddings
- Combined: [B, 768 + 1280] = [B, 2048]
- Then projected to match DiT hidden size`},{title:"Exercise 3: Implement CLIP Tokenization",description:"Write pseudocode for CLIP's text preprocessing pipeline.",task:`Implement a function that:
1. Takes raw text input
2. Tokenizes using BPE
3. Adds special tokens
4. Pads to 77 tokens
5. Returns token IDs`,solution:`def clip_tokenize(text, max_length=77):
    # Step 1: Clean and lowercase
    text = text.lower().strip()
    
    # Step 2: BPE tokenization
    tokens = bpe_tokenizer.encode(text)
    
    # Step 3: Add special tokens
    bos_token = 49406  # [BOS]
    eos_token = 49407  # [EOS]
    pad_token = 0      # [PAD]
    
    # Step 4: Truncate if needed
    max_text_tokens = max_length - 2  # Reserve for BOS/EOS
    tokens = tokens[:max_text_tokens]
    
    # Step 5: Construct sequence
    token_ids = [bos_token] + tokens + [eos_token]
    
    # Step 6: Pad to max_length
    padding_length = max_length - len(token_ids)
    token_ids = token_ids + [pad_token] * padding_length
    
    return token_ids  # Shape: [77]`},{title:"Exercise 4: Causal vs Bidirectional Attention",description:"Explain the attention mask difference between CLIP and T5.",task:`For the sequence: [BOS, A, cat, sat, EOS]

Draw the attention mask for:
1. CLIP (causal attention)
2. T5 (bidirectional attention)

Mark with 1 where attention is allowed, 0 where blocked.`,solution:`CLIP Causal Attention Mask:
       BOS  A  cat sat EOS
BOS  [  1   0   0   0   0  ]
A    [  1   1   0   0   0  ]
cat  [  1   1   1   0   0  ]
sat  [  1   1   1   1   0  ]
EOS  [  1   1   1   1   1  ]

T5 Bidirectional Attention Mask:
       BOS  A  cat sat EOS
BOS  [  1   1   1   1   1  ]
A    [  1   1   1   1   1  ]
cat  [  1   1   1   1   1  ]
sat  [  1   1   1   1   1  ]
EOS  [  1   1   1   1   1  ]

Key insight: In CLIP, only EOS sees all tokens!`}],c=(r,h)=>{p({...d,[r]:h})},s=()=>{let r=0;return m.forEach(h=>{d[h.id]===h.correct&&r++}),r},l=()=>{p({}),n(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mb-2",children:"Practice Lab"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Test your understanding of CLIP text encoders with quizzes and exercises."})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[e.jsxs("button",{onClick:()=>t(-1),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${a===-1?"bg-blue-600 text-white":"bg-white/10 text-gray-700 dark:text-gray-300 hover:bg-white/20"}`,children:[e.jsx(W,{size:18}),"Quiz"]}),e.jsxs("button",{onClick:()=>t(0),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 ${a>=0?"bg-purple-600 text-white":"bg-white/10 text-gray-700 dark:text-gray-300 hover:bg-white/20"}`,children:[e.jsx(q,{size:18}),"Exercises"]})]}),a===-1?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"CLIP Text Encoder Quiz"}),e.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-1 bg-gray-600 hover:bg-gray-700 rounded-lg text-sm transition-colors",children:[e.jsx(j,{size:16}),"Reset"]})]}),m.map((r,h)=>e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-white/10",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:"w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold shrink-0",children:h+1}),e.jsx("p",{className:"text-gray-200 font-medium",children:r.question})]}),e.jsx("div",{className:"space-y-2 ml-11",children:r.options.map((C,b)=>{const u=d[r.id]===b,k=b===r.correct,f=x&&k,N=x&&u&&!k;return e.jsxs("button",{onClick:()=>!x&&c(r.id,b),disabled:x,className:`w-full text-left px-4 py-3 rounded-lg transition-colors flex items-center gap-3 ${f?"bg-green-500/20 border-green-500":N?"bg-red-500/20 border-red-500":u?"bg-blue-500/30 border-blue-500":"bg-white/5 border-transparent hover:bg-white/10"} border`,children:[e.jsx("span",{className:`w-6 h-6 rounded-full border flex items-center justify-center text-sm ${u?"border-blue-400 text-blue-600 dark:text-blue-400":"border-gray-500 text-gray-700 dark:text-gray-500"}`,children:String.fromCharCode(65+b)}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:C}),f&&e.jsx(F,{className:"ml-auto text-green-400",size:20}),N&&e.jsx(_,{className:"ml-auto text-red-400",size:20})]},b)})}),x&&e.jsx("div",{className:`mt-4 ml-11 p-3 rounded-lg ${d[r.id]===r.correct?"bg-green-500/10":"bg-yellow-500/10"}`,children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(P,{size:16,className:"text-yellow-400"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r.explanation})]})})]},r.id)),e.jsx("div",{className:"text-center",children:x?e.jsxs("div",{className:"bg-gradient-to-r from-blue-500/20 to-purple-500/20 rounded-xl p-6 border border-purple-500/30",children:[e.jsxs("div",{className:"text-3xl font-bold text-white mb-2",children:[s()," / ",m.length]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:s()===m.length?"üéâ Perfect! You've mastered CLIP text encoders!":s()>=m.length*.7?"üëç Great job! Review the explanations for any missed questions.":"üìö Keep learning! Review the previous panels and try again."})]}):e.jsx("button",{onClick:()=>n(!0),disabled:Object.keys(d).length<m.length,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 rounded-lg font-semibold transition-colors",children:"Submit Answers"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:g.map((r,h)=>e.jsxs("button",{onClick:()=>t(h),className:`px-3 py-2 rounded-lg text-sm transition-colors ${a===h?"bg-purple-600 text-white":"bg-white/10 text-gray-700 dark:text-gray-300 hover:bg-white/20"}`,children:["Exercise ",h+1]},h))}),e.jsxs("div",{className:"bg-black/30 rounded-xl p-6 border border-purple-500/30",children:[e.jsx("h3",{className:"text-xl font-semibold text-purple-600 dark:text-purple-400 mb-2",children:g[a].title}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:g[a].description}),e.jsxs("div",{className:"bg-black/40 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"text-sm text-gray-800 dark:text-gray-400 mb-2",children:"Task:"}),e.jsx("pre",{className:"text-gray-200 whitespace-pre-wrap font-mono text-sm",children:g[a].task})]}),e.jsxs("details",{className:"group",children:[e.jsx("summary",{className:"cursor-pointer px-4 py-2 bg-purple-600/30 hover:bg-purple-600/40 rounded-lg text-purple-300 transition-colors",children:"Show Solution"}),e.jsx("div",{className:"mt-4 bg-green-500/10 rounded-lg p-4 border border-green-500/30",children:e.jsx("pre",{className:"text-green-300 whitespace-pre-wrap font-mono text-sm",children:g[a].solution})})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 rounded-xl p-4 border border-yellow-500/30",children:[e.jsxs("h4",{className:"text-yellow-400 font-semibold mb-2 flex items-center gap-2",children:[e.jsx(P,{size:18}),"Tips for Success"]}),e.jsxs("ul",{className:"text-sm text-gray-700 dark:text-gray-300 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Remember: CLIP-L = 768-d, CLIP-G = 1280-d"}),e.jsx("li",{children:"‚Ä¢ Max tokens is always 77 (including BOS and EOS)"}),e.jsx("li",{children:"‚Ä¢ Causal attention = lower triangular mask"}),e.jsx("li",{children:"‚Ä¢ Pooled embedding comes from [EOS] token position"})]})]})]})]})}const K=[{id:"overview",label:"CLIP Overview",icon:D},{id:"tokenization",label:"Tokenization",icon:L},{id:"transformer",label:"Transformer",icon:R},{id:"embedding",label:"Embeddings",icon:z},{id:"comparison",label:"CLIP vs T5",icon:A},{id:"practice",label:"Practice Lab",icon:G}];function oe(){const[d,p]=o.useState("overview"),x=()=>{switch(d){case"overview":return e.jsx(I,{});case"tokenization":return e.jsx($,{});case"transformer":return e.jsx(U,{});case"embedding":return e.jsx(V,{});case"comparison":return e.jsx(Y,{});case"practice":return e.jsx(J,{});default:return e.jsx(I,{})}};return e.jsx("div",{className:"text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:K.map((n,a)=>{const t=n.icon;return e.jsxs("button",{onClick:()=>p(n.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${d===n.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg shadow-purple-500/25":"bg-white/10 text-gray-700 dark:text-gray-300 hover:bg-white/20"}`,children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-white/20 flex items-center justify-center text-xs font-bold",children:a+1}),e.jsx(t,{size:18}),e.jsx("span",{className:"hidden sm:inline",children:n.label})]},n.id)})}),e.jsx("div",{className:"bg-white/5 backdrop-blur-lg rounded-2xl border border-white/10 p-6",children:x()})]})})}export{oe as default};
