import{c as u,r as i,j as e}from"./index-CsxpOLHd.js";import{P as f}from"./plus-Ct7xA5ZS.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=u("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=u("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function j(){const[t,x]=i.useState(10),[a,r]=i.useState(.8),[n,m]=i.useState([]);i.useEffect(()=>{const s=[1];for(let l=0;l<t;l++)s.push(s[s.length-1]*a);m(s)},[t,a]);const h=n[n.length-1],d=Math.abs(h)<.001,o=Math.abs(h)>1e3;return e.jsxs("div",{className:"p-8 h-full flex flex-col items-center overflow-y-auto",children:[e.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-red-400 mb-4",children:"The Chain Rule"}),e.jsxs("p",{className:"text-lg text-slate-300 leading-relaxed",children:["Gradients are calculated by ",e.jsx("strong",{children:"multiplying"})," many small numbers together.",e.jsx("br",{}),"If weights are even slightly off 1.0, the signal dies or explodes exponentially."]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 w-full max-w-6xl items-start",children:[e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[e.jsx("h3",{className:"font-bold text-white mb-6",children:"Network Parameters"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Network Depth (Layers)"}),e.jsx("span",{className:"font-mono font-bold text-red-400",children:t})]}),e.jsx("input",{type:"range",min:"2",max:"50",step:"1",value:t,onChange:s=>x(parseInt(s.target.value)),className:"w-full accent-red-400"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Average Weight Magnitude"}),e.jsx("span",{className:"font-mono font-bold text-red-400",children:a.toFixed(2)})]}),e.jsx("input",{type:"range",min:"0.5",max:"1.5",step:"0.01",value:a,onChange:s=>r(parseFloat(s.target.value)),className:"w-full accent-red-400"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[e.jsx("span",{children:"Vanishing (<1.0)"}),e.jsx("span",{children:"Stable (1.0)"}),e.jsx("span",{children:"Exploding (>1.0)"})]})]})]}),e.jsxs("div",{className:"mt-8 p-4 bg-slate-900 rounded-lg border border-slate-600",children:[e.jsx("h4",{className:"text-sm font-bold text-slate-400 mb-2",children:"Gradient at First Layer:"}),e.jsx("div",{className:`text-3xl font-mono font-bold truncate ${d?"text-slate-600":o?"text-red-500":"text-green-400"}`,children:h.toExponential(4)}),e.jsxs("div",{className:"mt-2 text-sm",children:[d&&e.jsx("span",{className:"text-slate-500",children:"⚠️ Signal Vanished! The network stops learning."}),o&&e.jsx("span",{className:"text-red-400",children:"⚠️ Signal Exploded! Weights become NaN."}),!d&&!o&&e.jsx("span",{className:"text-green-500",children:"✅ Signal is Healthy."})]})]})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 min-h-[400px] flex flex-col",children:[e.jsx("h3",{className:"font-bold text-white mb-6",children:"Backpropagation Flow"}),e.jsx("div",{className:"flex-1 flex flex-col-reverse gap-1 overflow-y-auto max-h-[500px] pr-2 custom-scrollbar",children:n.map((s,l)=>{const c=Math.abs(s)>10?"bg-red-500":Math.abs(s)<.1?"bg-slate-700":"bg-green-500";return e.jsxs("div",{className:"flex items-center gap-4 group",children:[e.jsxs("span",{className:"text-xs font-mono text-slate-500 w-16 text-right",children:["Layer ",t-l]}),e.jsxs("div",{className:"flex-1 h-8 bg-slate-900 rounded relative overflow-hidden",children:[e.jsx("div",{className:`h-full transition-all duration-300 ${c}`,style:{width:`${Math.min(100,Math.abs(s)*50)}%`}}),e.jsx("span",{className:"absolute inset-0 flex items-center pl-2 text-xs font-mono text-white mix-blend-difference",children:s.toFixed(4)})]}),e.jsx("div",{className:"text-xs text-slate-600 w-8",children:l>0&&e.jsxs("span",{className:"flex items-center",children:["× ",a]})})]},l)})}),e.jsx("div",{className:"mt-4 text-center text-slate-400 text-sm",children:"Gradient flows from Output (Bottom) to Input (Top)"})]})]})]})}function p(){const[t,x]=i.useState(!1),[a,r]=i.useState(20),[n,m]=i.useState(.5),d=(()=>{let s=1;const l=[s];for(let c=0;c<a;c++)t?s=s*(1+n):s=s*n,l.push(s);return l})(),o=d[d.length-1];return e.jsxs("div",{className:"p-8 h-full flex flex-col items-center overflow-y-auto",children:[e.jsxs("div",{className:"max-w-3xl w-full text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-orange-400 mb-4",children:"The Residual Fix (ResNet)"}),e.jsxs("p",{className:"text-lg text-slate-300 leading-relaxed",children:["How do we train networks with 100+ layers?",e.jsx("br",{}),e.jsx("strong",{children:"Residual Connections"})," add the input to the output: ",e.jsx("code",{className:"bg-slate-800 px-2 py-1 rounded text-orange-300",children:"y = x + f(x)"}),".",e.jsx("br",{}),'This creates a "Superhighway" for gradients to flow backwards without vanishing.']})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-12 w-full max-w-6xl items-start",children:[e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700",children:[e.jsx("h3",{className:"font-bold text-white mb-6",children:"Architecture"}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-900 rounded-lg border border-slate-600 mb-8",children:[e.jsx("span",{className:"text-slate-300 font-bold",children:"Use Residual Connections?"}),e.jsx("button",{onClick:()=>x(!t),className:`w-16 h-8 rounded-full transition-colors relative ${t?"bg-orange-500":"bg-slate-700"}`,children:e.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition-transform ${t?"left-9":"left-1"}`})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Network Depth"}),e.jsx("span",{className:"font-mono font-bold text-orange-400",children:a})]}),e.jsx("input",{type:"range",min:"5",max:"50",step:"1",value:a,onChange:s=>r(parseInt(s.target.value)),className:"w-full accent-orange-400"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("label",{className:"text-sm text-slate-400",children:"Layer Gradient (f'(x))"}),e.jsx("span",{className:"font-mono font-bold text-orange-400",children:n.toFixed(2)})]}),e.jsx("input",{type:"range",min:"-0.5",max:"0.5",step:"0.05",value:n,onChange:s=>m(parseFloat(s.target.value)),className:"w-full accent-orange-400"}),e.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"Small gradients usually kill the signal."})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h4",{className:"font-bold text-white mb-4",children:"Architecture Diagram"}),e.jsx("div",{className:"flex flex-col items-center gap-2 p-4 bg-slate-900 rounded-lg border border-slate-600",children:t?e.jsxs("div",{className:"relative w-32 h-32 flex items-center justify-center",children:[e.jsx("div",{className:"absolute left-0 top-1/2 w-full h-1 bg-orange-500/30 -z-10"})," ",e.jsx("div",{className:"w-16 h-16 bg-slate-800 border-2 border-orange-500 rounded flex items-center justify-center text-orange-400 font-bold z-10",children:"f(x)"}),e.jsx("div",{className:"absolute right-0 top-1/2 transform translate-x-1/2 -translate-y-1/2 w-8 h-8 bg-slate-700 rounded-full flex items-center justify-center border border-slate-500 z-20",children:e.jsx(f,{size:16})}),e.jsx("div",{className:"absolute -top-6 text-xs text-orange-400",children:"x + f(x)"})]}):e.jsx("div",{className:"relative w-32 h-32 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 bg-slate-800 border-2 border-slate-500 rounded flex items-center justify-center text-slate-400 font-bold",children:"f(x)"})})})]})]}),e.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border border-slate-700 min-h-[400px] flex flex-col",children:[e.jsx("h3",{className:"font-bold text-white mb-6",children:"Gradient Strength at Input"}),e.jsxs("div",{className:"flex-1 flex items-end justify-center gap-1 bg-slate-900 rounded-lg p-4 border border-slate-600 overflow-hidden relative",children:[d.map((s,l)=>{const c=Math.min(100,Math.abs(s)*10);return e.jsx("div",{className:`w-2 transition-all duration-300 ${t?"bg-orange-500":"bg-red-500"}`,style:{height:`${c}%`},title:`Layer ${l}: ${s.toFixed(4)}`},l)}),e.jsxs("div",{className:"absolute top-4 left-4 bg-slate-900/80 p-2 rounded backdrop-blur",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Final Gradient:"}),e.jsx("div",{className:`text-2xl font-mono font-bold ${Math.abs(o)<.001?"text-red-500":"text-green-400"}`,children:o.toExponential(2)})]})]}),e.jsx("div",{className:"mt-4 text-sm text-slate-400 text-center",children:t?"With Residuals, the gradient flows through the skip connection (the '1') even if f'(x) is small.":"Without Residuals, multiplying by small numbers (0.5) repeatedly kills the signal."})]})]})]})}const N=[{id:"chain",label:"1. The Chain of Destruction",icon:b},{id:"solution",label:"2. The Residual Fix",icon:g}];function y(){const[t,x]=i.useState("chain"),a=()=>{switch(t){case"chain":return e.jsx(j,{});case"solution":return e.jsx(p,{});default:return null}};return e.jsx("div",{className:"text-slate-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-8",children:N.map(r=>{const n=r.icon;return e.jsxs("button",{onClick:()=>x(r.id),className:`flex items-center gap-2 px-6 py-3 rounded-xl font-bold transition-all transform hover:scale-105 ${t===r.id?"bg-gradient-to-r from-red-600 to-orange-600 text-white shadow-lg scale-105":"bg-slate-800/50 text-slate-300 hover:bg-slate-700/50 shadow-sm border border-slate-700"}`,children:[e.jsx(n,{size:20}),r.label]},r.id)})}),e.jsx("div",{className:"bg-slate-900/70 backdrop-blur-sm rounded-2xl shadow-2xl border border-slate-700 overflow-hidden min-h-[600px]",children:a()})]})})}export{y as default};
