import{r as A,j as h}from"./index-BmgLEcVh.js";import{S as ae,C as se,m as le,W as re,G as oe,n as ne,c as ce,d as ie,L as de,E as ue,o as me,p as Y,q,r as F}from"./three.module-DCYoyzkr.js";import{g as m}from"./index-CH_iu5NA.js";const xe=[[2,3],[1,4]],he=[[1,0,2],[3,2,1]],fe=[[11,6,7],[13,8,6]],d={matrixA:6003669,matrixB:7384391,result:15564081,bg:16777215},g=[{row:0,col:0,calc:"(2×1) + (3×3) = 11"},{row:0,col:1,calc:"(2×0) + (3×2) = 6"},{row:0,col:2,calc:"(2×2) + (3×1) = 7"},{row:1,col:0,calc:"(1×1) + (4×3) = 13"},{row:1,col:1,calc:"(1×0) + (4×2) = 8"},{row:1,col:2,calc:"(1×2) + (4×1) = 6"}];function ye(){const v=A.useRef(null),I=A.useRef(null),H=A.useRef(null),[b,M]=A.useState(0),[f,G]=A.useState(!1),[J,B]=A.useState("Click Play to start the animation"),p=A.useRef({cellsA:[],cellsB:[],cellsR:[],labels:[]});A.useEffect(()=>{if(!v.current)return;p.current={cellsA:[],cellsB:[],cellsR:[],labels:[]};const l=v.current.clientWidth,u=400,a=new ae;a.background=new se(d.bg),I.current=a;const r=new le(l/-2,l/2,u/2,u/-2,.1,1e3);r.position.z=100;const e=new re({antialias:!0});e.setSize(l,u),v.current.appendChild(e.domElement);const t=40,n=4,c=(s,o,i,E)=>{const x=new oe,y=new ne(t,t),$=new ce({color:E,transparent:!0,opacity:.8}),j=new ie(y,$);x.add(j);const D=new de(new ue(y),new me({color:16777215,linewidth:2}));x.add(D);const R=document.createElement("canvas");R.width=128,R.height=128;const S=R.getContext("2d");S.fillStyle="black",S.font="bold 64px Arial",S.textAlign="center",S.textBaseline="middle",S.fillText(s.toString(),64,64);const V=new Y(R),te=new q({map:V,transparent:!0}),L=new F(te);return L.scale.set(32,32,1),x.add(L),x.position.set(o,i,0),x.userData={value:s,originalColor:E,mesh:j,label:L,canvas:R,texture:V},a.add(x),x},C=(s,o,i,E=40)=>{const x=document.createElement("canvas");x.width=512,x.height=128;const y=x.getContext("2d");y.fillStyle="black",y.font=`bold ${E*2}px Arial`,y.textAlign="center",y.textBaseline="middle",y.fillText(s,256,64);const $=new Y(x),j=new q({map:$}),D=new F(j);return D.scale.set(160,40,1),D.position.set(o,i,0),a.add(D),D},k=-220,P=k,X=k+140,T=k+330,w=80;for(let s=0;s<2;s++)for(let o=0;o<2;o++){const i=c(xe[s][o],P+o*(t+n),w-s*(t+n),d.matrixA);i.userData.row=s,i.userData.col=o,p.current.cellsA.push(i)}for(let s=0;s<2;s++)for(let o=0;o<3;o++){const i=c(he[s][o],X+o*(t+n),w-s*(t+n),d.matrixB);i.userData.row=s,i.userData.col=o,p.current.cellsB.push(i)}for(let s=0;s<2;s++)for(let o=0;o<3;o++){const i=c("?",T+o*(t+n),w-s*(t+n),d.result);i.userData.row=s,i.userData.col=o,i.userData.resultValue=fe[s][o],i.visible=!1,p.current.cellsR.push(i)}C("A",P+20,w+50),C("×",P+85,w-20,28),C("B",X+44,w+50),C("=",T-30,w-20,28),C("C",T+44,w+50),C("Row × Column = Element",0,-100+40,18),H.current=e;let O;const U=()=>{O=requestAnimationFrame(U),e.render(a,r)};return U(),()=>{var s;cancelAnimationFrame(O),e.dispose(),(s=v.current)!=null&&s.contains(e.domElement)&&v.current.removeChild(e.domElement)}},[]);const z=(l,u)=>{const{cellsA:a,cellsB:r}=p.current;a.forEach(e=>{m.to(e.userData.mesh.material.color,{r:(d.matrixA>>16&255)/255,g:(d.matrixA>>8&255)/255,b:(d.matrixA&255)/255,duration:.3}),m.to(e.scale,{x:1,y:1,duration:.3})}),r.forEach(e=>{m.to(e.userData.mesh.material.color,{r:(d.matrixB>>16&255)/255,g:(d.matrixB>>8&255)/255,b:(d.matrixB&255)/255,duration:.3}),m.to(e.scale,{x:1,y:1,duration:.3})}),a.filter(e=>e.userData.row===l).forEach((e,t)=>{m.to(e.userData.mesh.material.color,{r:.4,g:.7,b:1,duration:.3,delay:t*.1}),m.to(e.scale,{x:1.2,y:1.2,duration:.3,delay:t*.1})}),r.filter(e=>e.userData.col===u).forEach((e,t)=>{m.to(e.userData.mesh.material.color,{r:.6,g:.9,b:.5,duration:.3,delay:t*.1}),m.to(e.scale,{x:1.2,y:1.2,duration:.3,delay:t*.1})})},K=async()=>{if(!f){G(!0);for(let l=b;l<g.length;l++){const{row:u,col:a,calc:r}=g[l];M(l+1),B(`Step ${l+1}: Row ${u+1} × Column ${a+1}
${r}`),z(u,a),W(u,a),await new Promise(e=>setTimeout(e,1500))}B("Complete! Each result element is the dot product of a row from A and column from B."),G(!1)}},W=(l,u)=>{const{cellsR:a}=p.current,r=a.find(e=>e.userData.row===l&&e.userData.col===u);r&&!r.visible&&(r.visible=!0,r.scale.set(.01,.01,.01),m.to(r.scale,{x:1,y:1,z:1,duration:.5,ease:"back.out"}),setTimeout(()=>{const e=r.userData.canvas,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.fillStyle="black",t.font="bold 64px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(r.userData.resultValue.toString(),64,64),r.userData.texture.needsUpdate=!0},300))},N=l=>{if(f)return;const{cellsR:u}=p.current;for(let a=0;a<g.length;a++){const{row:r,col:e}=g[a],t=u.find(n=>n.userData.row===r&&n.userData.col===e);if(a<l){if(t&&!t.visible){t.visible=!0,t.scale.set(1,1,1);const n=t.userData.canvas,c=n.getContext("2d");c.clearRect(0,0,n.width,n.height),c.fillStyle="black",c.font="bold 64px Arial",c.textAlign="center",c.textBaseline="middle",c.fillText(t.userData.resultValue.toString(),64,64),t.userData.texture.needsUpdate=!0}}else if(t&&t.visible){t.visible=!1,t.scale.set(.01,.01,.01);const n=t.userData.canvas,c=n.getContext("2d");c.clearRect(0,0,n.width,n.height),c.fillStyle="black",c.font="bold 64px Arial",c.textAlign="center",c.textBaseline="middle",c.fillText("?",64,64),t.userData.texture.needsUpdate=!0}}if(M(l),l===0)_(),B("Click Play or use Next to step through the animation");else if(l>g.length)B("Complete! Each result element is the dot product of a row from A and column from B.");else{const{row:a,col:r,calc:e}=g[l-1];B(`Step ${l}: Row ${a+1} × Column ${r+1}
${e}`),z(a,r),W(a,r)}},Q=()=>{f||b>=g.length||N(b+1)},Z=()=>{f||b<=0||N(b-1)},_=()=>{const{cellsA:l,cellsB:u}=p.current;l.forEach(a=>{m.to(a.userData.mesh.material.color,{r:(d.matrixA>>16&255)/255,g:(d.matrixA>>8&255)/255,b:(d.matrixA&255)/255,duration:.3}),m.to(a.scale,{x:1,y:1,duration:.3})}),u.forEach(a=>{m.to(a.userData.mesh.material.color,{r:(d.matrixB>>16&255)/255,g:(d.matrixB>>8&255)/255,b:(d.matrixB&255)/255,duration:.3}),m.to(a.scale,{x:1,y:1,duration:.3})})},ee=()=>{f||N(0)};return h.jsxs("div",{className:"flex flex-col items-center p-3",children:[h.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Animation Demo"}),h.jsx("div",{ref:v,className:"w-full rounded-lg overflow-hidden shadow-lg bg-white"}),h.jsx("div",{className:"mt-2 p-2 bg-white rounded-lg w-full text-center shadow",children:h.jsx("p",{className:"text-gray-800 whitespace-pre-line text-sm",children:J})}),h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx("button",{onClick:Z,disabled:f||b<=0,className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors text-sm",children:"← Prev"}),h.jsxs("div",{className:"px-3 py-1 bg-gray-200 rounded-lg font-mono text-gray-700 min-w-[80px] text-center text-sm",children:[b," / ",g.length]}),h.jsx("button",{onClick:Q,disabled:f||b>=g.length,className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors text-sm",children:"Next →"})]}),h.jsxs("div",{className:"flex gap-2 mt-2",children:[h.jsx("button",{onClick:K,disabled:f||b>=g.length,className:"px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors text-sm",children:f?"Playing...":"▶ Play"}),h.jsx("button",{onClick:ee,disabled:f,className:"px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors text-sm",children:"↺ Reset"})]})]})}export{ye as default};
