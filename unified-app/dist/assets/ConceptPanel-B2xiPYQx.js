import{r as a,j as e,m as x}from"./index-quAWpIA7.js";import{m as i}from"./proxy-D7LjGbFl.js";function h(){const[s,r]=a.useState(0),[l,n]=a.useState(!0);a.useEffect(()=>{if(l){const o=setInterval(()=>{r(d=>(d+1)%8)},1500);return()=>clearInterval(o)}},[l]);const t=45;return e.jsx("div",{className:"p-8 h-full flex flex-col items-center overflow-y-auto",children:e.jsxs("div",{className:"max-w-4xl w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-violet-600 dark:text-violet-400 mb-4",children:"The Key Insight: Position as Rotation"}),e.jsxs("p",{className:"text-lg text-slate-700 dark:text-slate-300 leading-relaxed max-w-2xl mx-auto",children:["Instead of ",e.jsx("em",{children:"adding"})," position vectors (like sinusoidal encoding), RoPE ",e.jsx("strong",{children:"rotates"})," embeddings based on their position in the sequence."]})]}),e.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[e.jsx("button",{onClick:()=>n(!l),className:`px-4 py-2 rounded-lg font-medium ${l?"bg-violet-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:l?"Pause":"Play"}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[e.jsx("span",{className:"text-slate-500",children:"Position:"}),e.jsx("span",{className:"font-bold text-violet-600 text-xl",children:s})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-6 border border-slate-200 dark:border-slate-700",children:[e.jsxs("h3",{className:"font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2",children:[e.jsx(x,{className:"text-violet-500"}),"2D Vector Rotation"]}),e.jsx("div",{className:"relative w-full aspect-square max-w-[300px] mx-auto",children:e.jsxs("svg",{viewBox:"-150 -150 300 300",className:"w-full h-full",children:[e.jsx("circle",{cx:"0",cy:"0",r:"100",fill:"none",stroke:"currentColor",strokeOpacity:"0.1"}),e.jsx("circle",{cx:"0",cy:"0",r:"50",fill:"none",stroke:"currentColor",strokeOpacity:"0.1"}),e.jsx("line",{x1:"-130",y1:"0",x2:"130",y2:"0",stroke:"currentColor",strokeOpacity:"0.2"}),e.jsx("line",{x1:"0",y1:"-130",x2:"0",y2:"130",stroke:"currentColor",strokeOpacity:"0.2"}),e.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"0",stroke:"#94a3b8",strokeWidth:"2",strokeDasharray:"5,5"}),e.jsx("circle",{cx:"100",cy:"0",r:"4",fill:"#94a3b8"}),e.jsxs(i.g,{animate:{rotate:s*t},transition:{type:"spring",stiffness:100},children:[e.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"0",stroke:"url(#gradient)",strokeWidth:"3"}),e.jsx("circle",{cx:"100",cy:"0",r:"6",fill:"#8b5cf6"})]}),e.jsx(i.path,{d:`M 30 0 A 30 30 0 ${s*t>180?1:0} 0 ${30*Math.cos(-s*t*Math.PI/180)} ${30*Math.sin(-s*t*Math.PI/180)}`,fill:"none",stroke:"#8b5cf6",strokeWidth:"2",animate:{d:`M 30 0 A 30 30 0 ${s*t>180?1:0} 0 ${30*Math.cos(-s*t*Math.PI/180)} ${30*Math.sin(-s*t*Math.PI/180)}`}}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8b5cf6"}),e.jsx("stop",{offset:"100%",stopColor:"#d946ef"})]})})]})}),e.jsxs("div",{className:"text-center mt-4",children:[e.jsx("div",{className:"text-sm text-slate-500",children:"Rotation angle:"}),e.jsxs("div",{className:"font-mono text-xl text-violet-600",children:[s," × θ = ",s*t,"°"]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-violet-50 dark:bg-violet-900/20 rounded-xl p-6 border border-violet-200 dark:border-violet-800",children:[e.jsx("h4",{className:"font-bold text-violet-600 dark:text-violet-400 mb-3",children:"Why Rotation?"}),e.jsxs("ul",{className:"space-y-2 text-slate-600 dark:text-slate-300 text-sm",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-violet-500 mt-1",children:"•"}),e.jsxs("span",{children:["Rotation ",e.jsx("strong",{children:"preserves vector magnitude"})," - no information loss"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-violet-500 mt-1",children:"•"}),e.jsxs("span",{children:["The dot product Q·K naturally encodes ",e.jsx("strong",{children:"relative position"})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-violet-500 mt-1",children:"•"}),e.jsxs("span",{children:["Works well with ",e.jsx("strong",{children:"any sequence length"})," (extrapolation)"]})]})]})]}),e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-xl p-6",children:[e.jsx("h4",{className:"font-bold text-slate-700 dark:text-slate-200 mb-3",children:"The Magic of Relative Position"}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:["When query at position ",e.jsx("strong",{children:"m"})," attends to key at position ",e.jsx("strong",{children:"n"}),":"]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg font-mono text-sm text-center",children:[e.jsx("div",{className:"text-violet-600",children:"R(m)q · R(n)k = q · R(n-m)k"}),e.jsx("div",{className:"text-xs text-slate-500 mt-2",children:"The attention only depends on (n - m), not absolute positions!"})]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-xl p-6",children:[e.jsx("h4",{className:"font-bold text-slate-600 dark:text-slate-300 mb-2",children:"Sinusoidal (Original)"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Adds position vectors: ",e.jsx("code",{className:"bg-slate-200 dark:bg-slate-700 px-1 rounded",children:"x + PE(pos)"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-400",children:["❌ Absolute position only",e.jsx("br",{}),"❌ Limited extrapolation"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-violet-500 to-fuchsia-500 rounded-xl p-6 text-white",children:[e.jsx("h4",{className:"font-bold mb-2",children:"RoPE (Modern)"}),e.jsxs("p",{className:"text-sm text-violet-100",children:["Rotates vectors: ",e.jsx("code",{className:"bg-white/20 px-1 rounded",children:"R(pos) × x"})]}),e.jsxs("div",{className:"mt-2 text-xs text-violet-200",children:["✓ Relative position encoded naturally",e.jsx("br",{}),"✓ Better length generalization"]})]})]})]})})}export{h as default};
