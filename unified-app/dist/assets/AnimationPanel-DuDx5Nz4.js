import{r as p,j as r}from"./index-BmgLEcVh.js";import{S as re,C as oe,m as ie,W as ce,G as de,n as ue,c as me,d as be,L as ge,E as xe,o as he,p as O,q as X,r as Y}from"./three.module-DCYoyzkr.js";import{g}from"./index-CH_iu5NA.js";const pe=[[3,1],[1,2]],fe=[[.85,-.53],[.53,.85]],ve=[[3.62,0],[0,1.38]],C={matrixA:15564081,matrixQ:6003669,matrixLambda:7384391,bg:16777215},i=[{id:"show-a",title:"Symmetric Matrix A",desc:"A is a 2×2 symmetric matrix (A = A^T)"},{id:"eigen-concept",title:"Eigenvalue Equation",desc:"A v = λ v (eigenvector v, eigenvalue λ)"},{id:"show-eigen1",title:"First Eigenvector",desc:"v₁ direction with eigenvalue λ₁ = 3.62"},{id:"show-eigen2",title:"Second Eigenvector",desc:"v₂ direction with eigenvalue λ₂ = 1.38 (perpendicular to v₁)"},{id:"show-q",title:"Matrix Q",desc:"Q = [v₁ v₂]: eigenvectors as columns"},{id:"show-lambda",title:"Matrix Λ",desc:"Λ diagonal: eigenvalues on diagonal"},{id:"decomposition",title:"Eigenvalue Decomposition",desc:"A = Q Λ Q^T (for symmetric A)"}];function Ee(){const v=p.useRef(null),H=p.useRef(null),J=p.useRef(null),[u,Q]=p.useState(0),[m,$]=p.useState(!1),[K,A]=p.useState("Click Play to see eigenvalue decomposition"),c=p.useRef({cellsA:[],cellsQ:[],cellsLambda:[],arrows:[],labels:[]});p.useEffect(()=>{if(!v.current)return;c.current={cellsA:[],cellsQ:[],cellsLambda:[],arrows:[],labels:[]};const s=v.current.clientWidth,e=450,t=new re;t.background=new oe(C.bg),H.current=t;const o=new ie(s/-2,s/2,e/2,e/-2,.1,1e3);o.position.z=100;const f=new ce({antialias:!0});f.setSize(s,e),v.current.appendChild(f.domElement);const x=40,w=4,N=(a,l,b,d,y=!0)=>{const n=new de,k=new ue(x,x),q=new me({color:d,transparent:!0,opacity:.8}),h=new be(k,q);n.add(h);const le=new ge(new xe(k),new he({color:3355443,linewidth:2}));n.add(le);const S=document.createElement("canvas");S.width=128,S.height=128;const j=S.getContext("2d");j.fillStyle="black",j.font=a.toString().length>4?"bold 42px Arial":"bold 50px Arial",j.textAlign="center",j.textBaseline="middle",j.fillText(a.toString(),64,64);const I=new O(S),ne=new X({map:I,transparent:!0}),D=new Y(ne);return D.scale.set(30,30,1),n.add(D),n.position.set(l,b,0),n.visible=y,n.userData={value:a,originalColor:d,mesh:h,label:D,canvas:S,texture:I},t.add(n),n},E=(a,l,b,d=32)=>{const y=document.createElement("canvas");y.width=512,y.height=128;const n=y.getContext("2d");n.fillStyle="black",n.font=`bold ${d*2}px Arial`,n.textAlign="center",n.textBaseline="middle",n.fillText(a,256,64);const k=new O(y),q=new X({map:k}),h=new Y(q);return h.scale.set(a.length*d/2,d,1),h.position.set(l,b,0),h.visible=!1,t.add(h),h},T=-30,R=140;for(let a=0;a<2;a++)for(let l=0;l<2;l++){const b=N(pe[a][l],T+l*(x+w),R-a*(x+w),C.matrixA,!1);c.current.cellsA.push(b)}const _=E("A",T+22,R+50);c.current.labels.push(_);const P=-180,M=30;for(let a=0;a<2;a++)for(let l=0;l<2;l++){const b=fe[a][l].toFixed(2),d=N(b,P+l*(x+w),M-a*(x+w),C.matrixQ,!1);c.current.cellsQ.push(d)}const ee=E("Q",P+22,M+60);c.current.labels.push(ee);const G=-50,z=30;for(let a=0;a<2;a++)for(let l=0;l<2;l++){const b=ve[a][l].toFixed(2),d=N(b,G+l*(x+w),z-a*(x+w),C.matrixLambda,!1);c.current.cellsLambda.push(d)}const te=E("Λ",G+22,z+60);c.current.labels.push(te);const se=E("×",P+100,M,28),ae=E("=",T-40,R-20,32);c.current.labels.push(se,ae),J.current=f;let B;const W=()=>{B=requestAnimationFrame(W),f.render(t,o)};return W(),()=>{var a;cancelAnimationFrame(B),f.dispose(),(a=v.current)!=null&&a.contains(f.domElement)&&v.current.removeChild(f.domElement)}},[]);const L=s=>{const e=c.current;switch(s){case 1:e.cellsA.forEach((t,o)=>{t.visible=!0,t.scale.set(.01,.01,.01),g.to(t.scale,{x:1,y:1,z:1,duration:.4,delay:o*.1,ease:"back.out"})}),e.labels[0].visible=!0;break;case 2:break;case 3:e.cellsA.forEach((t,o)=>{o%2===0&&g.to(t.scale,{x:1.15,y:1.15,duration:.3})}),setTimeout(()=>{e.cellsA.forEach(t=>{g.to(t.scale,{x:1,y:1,duration:.3})})},1e3);break;case 4:e.cellsA.forEach((t,o)=>{o%2===1&&g.to(t.scale,{x:1.15,y:1.15,duration:.3})}),setTimeout(()=>{e.cellsA.forEach(t=>{g.to(t.scale,{x:1,y:1,duration:.3})})},1e3);break;case 5:e.labels[1].visible=!0,e.cellsQ.forEach((t,o)=>{t.visible=!0,t.scale.set(.01,.01,.01),g.to(t.scale,{x:1,y:1,z:1,duration:.4,delay:o*.08,ease:"back.out"})}),e.labels[3].visible=!0;break;case 6:e.labels[2].visible=!0,e.cellsLambda.forEach((t,o)=>{t.visible=!0,t.scale.set(.01,.01,.01),g.to(t.scale,{x:1,y:1,z:1,duration:.4,delay:o*.1,ease:"back.out"})}),e.labels[4].visible=!0;break;case 7:[...e.cellsQ,...e.cellsLambda].forEach(t=>{g.to(t.userData.mesh.material,{opacity:.3,duration:.2,yoyo:!0,repeat:2})}),e.cellsA.forEach(t=>{g.to(t.userData.mesh.material,{opacity:.5,duration:.2,yoyo:!0,repeat:3})});break}},U=async()=>{if(!m){$(!0);for(let s=u;s<i.length;s++)Q(s+1),A(`${i[s].title}
${i[s].desc}`),L(s+1),await new Promise(e=>setTimeout(e,1600));A("Complete! Eigenvalue decomposition: A = Q Λ Q^T for symmetric matrices."),$(!1)}},V=()=>{if(m||u>=i.length)return;const s=u+1;Q(s),A(`${i[s-1].title}
${i[s-1].desc}`),L(s)},Z=()=>{if(m||u<=0)return;F();const s=u-1;setTimeout(()=>{for(let e=1;e<=s;e++)L(e);Q(s),s>0&&A(`${i[s-1].title}
${i[s-1].desc}`)},100)},F=()=>{if(m)return;const s=c.current;[...s.cellsA,...s.cellsQ,...s.cellsLambda].forEach(e=>{e&&(e.visible=!1,e.scale.set(1,1,1),e.userData.mesh&&(e.userData.mesh.material.opacity=.8))}),s.labels.forEach(e=>{e&&(e.visible=!1)}),Q(0),A("Click Play to see eigenvalue decomposition")};return r.jsxs("div",{className:"flex flex-col items-center p-3",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Animation Demo"}),r.jsx("div",{ref:v,className:"w-full rounded-lg overflow-hidden shadow-lg bg-white"}),r.jsx("div",{className:"mt-2 p-2 bg-white rounded-lg w-full text-center shadow",children:r.jsx("p",{className:"text-gray-800 whitespace-pre-line text-sm",children:K})}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("button",{onClick:Z,disabled:m||u<=0,className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors text-sm",children:"← Prev"}),r.jsxs("div",{className:"px-3 py-1 bg-gray-200 rounded-lg font-mono text-gray-700 min-w-[80px] text-center text-sm",children:[u," / ",i.length]}),r.jsx("button",{onClick:V,disabled:m||u>=i.length,className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors text-sm",children:"Next →"})]}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsx("button",{onClick:U,disabled:m||u>=i.length,className:"px-4 py-2 bg-green-500 hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors text-sm",children:m?"Playing...":"▶ Play"}),r.jsx("button",{onClick:F,disabled:m,className:"px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors text-sm",children:"↺ Reset"})]}),r.jsx("div",{className:"mt-2 p-2 bg-green-100 rounded-lg w-full text-center border border-green-300",children:r.jsx("p",{className:"text-green-800 text-xs font-medium",children:"A v = λ v | A = Q Λ Q^T | Q^T Q = I (orthogonal eigenvectors)"})})]})}export{Ee as default};
